(function(){"use strict";var m;function aa(a){var b=0;return function(){return b<a.length?{done:!1,value:a[b++]}:{done:!0}}}function q(a){var b="undefined"!=typeof Symbol&&Symbol.iterator&&a[Symbol.iterator];return b?b.call(a):{next:aa(a)}}function ba(a){return"loading"!=a.readyState&&"uninitialized"!=a.readyState}function ca(a,b){var c=ba(a);if(c)b(a);else{var d=function(){ba(a)&&(c||(c=!0,b(a)),a.removeEventListener("readystatechange",d))};a.addEventListener("readystatechange",d)}}function da(a){return a?Array.prototype.slice.call(a):[]}var t=Array.isArray;function ea(a,b){for(var c=[],d=0,e=0;e<a.length;e++){var g=a[e];b(g,e,a)?c.push(g):(d<e&&(a[d]=g),d++)}d<a.length&&(a.length=d);return c}function fa(a,b){for(var c=0;c<a.length;c++)if(b(a[c],c,a))return c;return-1}function u(a){return a||{}}function ha(a){return 1==(null==a?void 0:a.nodeType)?a.tagName.toLowerCase()+(a.id?"#"+a.id:""):a}function ia(a,b,c,d){var e=void 0===c?"Assertion failed":c;if(b)return b;a&&-1==e.indexOf(a)&&(e+=a);for(var g=3,f=e.split("%s"),h=f.shift(),k=[h];f.length;){var l=arguments[g++],p=f.shift();h+=ha(l)+p;k.push(l,p.trim())}g=Error(h);g.messageArray=ea(k,(function(w){return""!==w}));var n,r;null==(r=(n=self).__AMP_REPORT_ERROR)||r.call(n,g);throw g}function v(a,b,c,d,e){t(e)?a(c,e.concat([b])):a(c,(e||d)+": %s",b);return b}function ja(a){var b;if(null==(b=Object.getOwnPropertyDescriptor(a,"message"))?0:b.writable)return a;var c=a.stack;b=Error(a.message);for(var d in a)b[d]=a[d];b.stack=c;return b}function ka(a){for(var b=null,c="",d=q(arguments),e=d.next();!e.done;e=d.next())e=e.value,e instanceof Error&&!b?b=ja(e):(c&&(c+=" "),c+=e);b?c&&(b.message=c+": "+b.message):b=Error(c);return b}function la(a){var b=ka.apply(null,arguments);b.expected=!0;return b}function ma(a){var b=!1,c=null,d=a;return function(e){for(var g=[],f=0;f<arguments.length;++f)g[f-0]=arguments[f];b||(c=d.apply(self,g),b=!0,d=null);return c}}function na(a,b,c){function d(h){f=null;g=a.setTimeout(e,c);b.apply(null,h)}function e(){g=0;f&&d(f)}var g=0,f=null;return function(h){for(var k=[],l=0;l<arguments.length;++l)k[l-0]=arguments[l];g?f=k:d(k)}}var oa=/(?:^[#?]?|&)([^=&]+)(?:=([^&]*))?/g;function pa(a,b){var c=b=void 0===b?"":b;try{return decodeURIComponent(a)}catch(d){return c}}function qa(a){var b=Object.create(null);if(!a)return b;for(var c;c=oa.exec(a);){var d=pa(c[1],c[1]);c=c[2]?pa(c[2].replace(/\+/g," "),c[2]):"";b[d]=c}return b}function x(a){a=(a||self).location;return qa(a.originalHash||a.hash)}var y=self.AMP_CONFIG||{},ra=("string"==typeof y.cdnProxyRegex?new RegExp(y.cdnProxyRegex):y.cdnProxyRegex)||/^https:\/\/([a-zA-Z0-9_-]+\.)?cdn\.ampproject\.org$/;function sa(a){if(!self.document||!self.document.head||self.location&&ra.test(self.location.origin))return null;var b=self.document.head.querySelector('meta[name="'+a+'"]');return b&&b.getAttribute("content")||null}var z={thirdParty:y.thirdPartyUrl||"https://3p.ampproject.net",thirdPartyFrameHost:y.thirdPartyFrameHost||"ampproject.net",thirdPartyFrameRegex:("string"==typeof y.thirdPartyFrameRegex?new RegExp(y.thirdPartyFrameRegex):y.thirdPartyFrameRegex)||/^d-\d+\.ampproject\.net$/,cdn:y.cdnUrl||sa("runtime-host")||"https://cdn.ampproject.org",cdnProxyRegex:ra,localhostRegex:/^https?:\/\/localhost(:\d+)?$/,errorReporting:y.errorReportingUrl||"https://us-central1-amp-error-reporting.cloudfunctions.net/r",betaErrorReporting:y.betaErrorReportingUrl||"https://us-central1-amp-error-reporting.cloudfunctions.net/r-beta",localDev:y.localDev||!1,trustedViewerHosts:[/(^|\.)google\.(com?|[a-z]{2}|com?\.[a-z]{2}|cat)$/,/(^|\.)gmail\.(com|dev)$/],geoApi:y.geoApiUrl||sa("amp-geo-api")};var A="";function ta(a){a=a||self;if(a.__AMP_MODE)var b=a.__AMP_MODE;else{var c=x(a)||x(a);c=["1","actions","amp","amp4ads","amp4email"].includes(c.development)||!!a.AMP_DEV_MODE;A||(A=(null==(b=a.AMP_CONFIG)?void 0:b.v)||"012110171511011");b=a.__AMP_MODE={localDev:!1,development:c,esm:!1,test:!1,rtvVersion:A}}return b}function ua(){}function va(a,b){return b.reduce((function(c,d){return c+"&s[]="+encodeURIComponent(String(ha(d)))}),"https://log.amp.dev/?v=012110171511011&id="+encodeURIComponent(a))}function B(a,b,c){var d=this,e=c=void 0===c?"":c;this.win=a;this.ta=b;this.ua=wa(this);this.T=e;this.$=null;this.qa=ma((function(){a.fetch(z.cdn+"/rtv/012110171511011/log-messages.simple.json").then((function(g){return g.json()}),ua).then((function(g){g&&(d.$=g)}))}));this.N=this.assert.bind(this)}function wa(a){var c,b=a.win;return null!=(c=b.console)&&c.log&&0!=parseInt(x(b).log,10)?a.ta(parseInt(x(void 0).log,10),ta().development):0}function C(a,b,c,d){if(c>a.ua)return!1;var g,e=a.win.console,f={};c=null!=(g=(f[1]=e.error,f[3]=e.info,f[2]=e.warn,f)[c])?g:e.log;a=t(d[0])?xa(a,d[0]):d;b="["+b+"]";"string"==typeof a[0]?a[0]=b+" "+a[0]:a.unshift(b);c.apply(e,a);return!0}m=B.prototype;m.fine=function(a,b){for(var c=[],d=1;d<arguments.length;++d)c[d-1]=arguments[d];C(this,a,4,c)};m.info=function(a,b){for(var c=[],d=1;d<arguments.length;++d)c[d-1]=arguments[d];C(this,a,3,c)};m.warn=function(a,b){for(var c=[],d=1;d<arguments.length;++d)c[d-1]=arguments[d];C(this,a,2,c)};m.error=function(a,b){for(var c=[],d=1;d<arguments.length;++d)c[d-1]=arguments[d];if(!C(this,a,1,c)){c=this.createError.apply(this,c);c.name=a||c.name;var e,g;null==(g=(e=self).__AMP_REPORT_ERROR)||g.call(e,c)}};m.expectedError=function(a,b){for(var c=[],d=1;d<arguments.length;++d)c[d-1]=arguments[d];if(!C(this,a,1,c)){var e,g;null==(g=(e=self).__AMP_REPORT_ERROR)||g.call(e,this.createExpectedError.apply(this,c))}};m.createError=function(a){return ya(this,ka.apply(null,arguments))};m.createExpectedError=function(a){return ya(this,la.apply(null,arguments))};function ya(a,b){b=ja(b);a.T?b.message?-1==b.message.indexOf(a.T)&&(b.message+=a.T):b.message=a.T:0<=b.message.indexOf("​​​")&&(b.message=b.message.replace("​​​",""));return b}function xa(a,b){var c=b.shift();ta(a.win).development&&a.qa();var d;return(null==(d=a.$)?0:d[c])?[a.$[c]].concat(b):["More info at "+va(c,b)]}m.assert=function(a,b,c){return t(b)?this.assert.apply(this,[a].concat(xa(this,b))):ia.apply(null,[this.T].concat(Array.prototype.slice.call(arguments)))};m.assertElement=function(a,b){return v(this.N,a,1==(null==a?void 0:a.nodeType),"Element expected",b)};m.assertString=function(a,b){return v(this.N,a,"string"==typeof a,"String expected",b)};m.assertNumber=function(a,b){return v(this.N,a,"number"==typeof a,"Number expected",b)};m.assertArray=function(a,b){return v(this.N,a,t(a),"Array expected",b)};m.assertBoolean=function(a,b){return v(this.N,a,!!a===a,"Boolean expected",b)};self.__AMP_LOG=self.__AMP_LOG||{user:null,dev:null,userForEmbed:null};var D=self.__AMP_LOG,E=null;function za(a,b){if(!E)throw Error("failed to call initLogConstructor");return new E(self,a,b)}function Aa(){return za((function(a,b){return b||1<=a?4:2}),"​​​")}function F(){return D.dev||(D.dev=za((function(a){return 3<=a?4:2<=a?3:0})))}function G(a,b){this.j=a;this.h=b;this.I=this.j.document;this.S=this.P=!1;this.D=null}G.prototype.buildCallback=function(){this.P||(this.Y(),this.P=!0)};G.prototype.layoutCallback=function(){this.S||(this.S=!0)};G.prototype.Y=function(){this.D=this.I.createElement("main");var a=this.h.attachShadow({mode:"open"}),b=this.I.createElement("style");b.textContent="amp-story-entry-point{position:relative;display:block}\n/*# sourceURL=/css/amp-story-entry-point.css*/";a.appendChild(b);a.appendChild(this.D)};G.prototype.getElement=function(){return this.h};var H;function I(){return H?H:H=Promise.resolve(void 0)}function J(){var a=this;this.promise=new Promise((function(b,c){a.resolve=b;a.reject=c}))}var Ba="ase art bmp blp cd5 cit cpt cr2 cut dds dib djvu egt exif gif gpl grf icns ico iff jng jpeg jpg jfif jp2 jps lbm max miff mng msp nitf ota pbm pc1 pc2 pc3 pcf pcx pdn pgm PI1 PI2 PI3 pict pct pnm pns ppm psb psd pdd psp px pxm pxr qfx raw rle sct sgi rgb int bw tga tiff tif vtf xbm xcf xpm 3dv amf ai awg cgm cdr cmx dxf e2d egt eps fs gbr odg svg stl vrml x3d sxd v2d vnd wmf emf art xar png webp jxr hdp wdp cur ecw iff lbm liff nrrd pam pcx pgf sgi rgb rgba bw int inta sid ras sun tga".split(" ");function Ca(a){return Ba.some((function(b){return a.endsWith("."+b)?!0:!1}))}var Da="### #gf $on $tf 0b 8m 8u 12u 15u 64c 075 75 085 85 91 091 096 96 abf acfm acs afm afn afs all amfm apf asf aspf atm auf b30 bco bdf bepf bez bfn bmap bmf bx bzr cbtf cct cef cff cfn cga ch4 cha chm chr chx claf collection compositefont dfont dus dzk eft eot etx euf f00 f06 f08 f09 f3f f10 f11 f12 f13 f16 fd fdb ff ffil flf fli fn3 fnb fnn fnt fnta fo1 fo2 fog fon font fonts fot frf frs ftm fxr fyi gdr gf gft glf glif glyphs gsf gxf hbf ice intellifont lepf lft lwfn mcf mcf mfd mfm mft mgf mmm mrf mtf mvec nlq ntf odttf ofm okf otf pcf pcf pfa pfb pfm pft phf pk pkt prs pss qbf qfn r8? scr sfd sff sfi sfl sfn sfo sfp sfs sif snf spd spritefont sui suit svg sxs t1c t2 tb1 tb2 tdf tfm tmf tpf ttc tte ttf type ufm ufo usl usp us? vf vf1 vf3 vfb vfm vfont vlw vmf vnf w30 wfn wnf woff woff2 xfc xfn xfr xft zfi zsu _v".split(" ");function Ea(a){return Da.some((function(b){return a.endsWith("."+b)?!0:!1}))}var Fa="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{};function Ga(a,b){b=b.split(":")[0];a=+a;if(!a)return!1;switch(b){case"http":case"ws":return 80!==a;case"https":case"wss":return 443!==a;case"ftp":return 21!==a;case"gopher":return 70!==a;case"file":return!1}return 0!==a}var Ha=Object.prototype.hasOwnProperty;function Ia(a){try{return decodeURIComponent(a.replace(/\+/g," "))}catch(b){return null}}function Ja(a,b){b=b||"";var d,c=[];"string"!==typeof b&&(b="?");for(e in a)if(Ha.call(a,e)){(d=a[e])||null!==d&&void 0!==d&&!isNaN(d)||(d="");var e=encodeURIComponent(e);d=encodeURIComponent(d);null!==e&&null!==d&&c.push(e+"="+d)}return c.length?b+c.join("&"):""}function Ka(a){for(var d,b=/([^=?&]+)=?([^&]*)/g,c={};d=b.exec(a);){var e=Ia(d[1]);d=Ia(d[2]);null===e||null===d||e in c||(c[e]=d)}return c}var La=/^[A-Za-z][A-Za-z0-9+-.]*:[\\/]+/,Ma=/^([a-z][a-z0-9.+-]*:)?([\\/]{1,})?([\S\s]*)/i,Pa=/^[\x09\x0A\x0B\x0C\x0D\x20\xA0\u1680\u180E\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029\uFEFF]+/,K=[["#","hash"],["?","query"],function(a){return a.replace("\\","/")},["/","pathname"],["@","auth",1],[NaN,"host",void 0,1,1],[/:(\d+)$/,"port",void 0,1],[NaN,"hostname",void 0,1,1]],Qa={hash:1,query:1};function L(a,b,c){a=(a?a:"").toString().replace(Pa,"");if(!(this instanceof L))return new L(a,b,c);var d=K.slice(),e=typeof b,g=0;"object"!==e&&"string"!==e&&(c=b,b=null);c&&"function"!==typeof c&&(c=Ka);e=("undefined"!==typeof window?window:"undefined"!==typeof Fa?Fa:"undefined"!==typeof self?self:{}).location||{};b=b||e;e={};var f=typeof b;if("blob:"===b.protocol)e=new L(unescape(b.pathname),{});else if("string"===f)for(h in e=new L(b,{}),Qa)delete e[h];else if("object"===f){for(h in b)h in Qa||(e[h]=b[h]);void 0===e.slashes&&(e.slashes=La.test(b.href))}b=e;a=a||"";a=(a?a:"").toString().replace(Pa,"");a=Ma.exec(a);var h={protocol:a[1]?a[1].toLowerCase():"",slashes:!!(a[2]&&2<=a[2].length),rest:a[2]&&1===a[2].length?"/"+a[3]:a[3]};e=!h.protocol&&!h.slashes;this.slashes=h.slashes||e&&b.slashes;this.protocol=h.protocol||b.protocol||"";a=h.rest;for(h.slashes||(d[3]=[/(.*)/,"pathname"]);g<d.length;g++)if(h=d[g],"function"===typeof h)a=h(a);else{f=h[0];var k=h[1];if(f!==f)this[k]=a;else if("string"===typeof f)~(f=a.indexOf(f))&&("number"===typeof h[2]?(this[k]=a.slice(0,f),a=a.slice(f+h[2])):(this[k]=a.slice(f),a=a.slice(0,f)));else if(f=f.exec(a))this[k]=f[1],a=a.slice(0,f.index);this[k]=this[k]||(e&&h[3]?b[k]||"":"");h[4]&&(this[k]=this[k].toLowerCase())}c&&(this.query=c(this.query));if(e&&b.slashes&&"/"!==this.pathname.charAt(0)&&(""!==this.pathname||""!==b.pathname)){a=this.pathname;b=b.pathname;if(""!==a){b=(b||"/").split("/").slice(0,-1).concat(a.split("/"));a=b.length;c=b[a-1];d=!1;for(g=0;a--;)"."===b[a]?b.splice(a,1):".."===b[a]?(b.splice(a,1),g++):g&&(0===a&&(d=!0),b.splice(a,1),g--);d&&b.unshift("");"."!==c&&".."!==c||b.push("");b=b.join("/")}this.pathname=b}"/"!==this.pathname.charAt(0)&&this.hostname&&(this.pathname="/"+this.pathname);Ga(this.port,this.protocol)||(this.host=this.hostname,this.port="");this.username=this.password="";this.auth&&(h=this.auth.split(":"),this.username=h[0]||"",this.password=h[1]||"");this.origin=this.protocol&&this.host&&"file:"!==this.protocol?this.protocol+"//"+this.host:"null";this.href=this.toString()}L.prototype={set:function(a,b,c){switch(a){case"query":"string"===typeof b&&b.length&&(b=(c||Ka)(b));this[a]=b;break;case"port":this[a]=b;Ga(b,this.protocol)?b&&(this.host=this.hostname+":"+b):(this.host=this.hostname,this[a]="");break;case"hostname":this[a]=b;this.port&&(b+=":"+this.port);this.host=b;break;case"host":this[a]=b;/:\d+$/.test(b)?(b=b.split(":"),this.port=b.pop(),this.hostname=b.join(":")):(this.hostname=b,this.port="");break;case"protocol":this.protocol=b.toLowerCase();this.slashes=!c;break;case"pathname":case"hash":b?(c="pathname"===a?"/":"#",this[a]=b.charAt(0)!==c?c+b:b):this[a]=b;break;default:this[a]=b}for(a=0;a<K.length;a++)b=K[a],b[4]&&(this[b[1]]=this[b[1]].toLowerCase());this.origin=this.protocol&&this.host&&"file:"!==this.protocol?this.protocol+"//"+this.host:"null";this.href=this.toString();return this},toString:function(a){a&&"function"===typeof a||(a=Ja);var b=this.protocol;b&&":"!==b.charAt(b.length-1)&&(b+=":");b+=this.slashes?"//":"";this.username&&(b+=this.username,this.password&&(b+=":"+this.password),b+="@");b+=this.host+this.pathname;(a="object"===typeof this.query?a(this.query):this.query)&&(b+="?"!==a.charAt(0)?"?"+a:a);this.hash&&(b+=this.hash);return b}};var Ra=/^xn--/,Sa=/[^\0-\x7E]/,Ta=/[\x2E\u3002\uFF0E\uFF61]/g,Ua={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},M=Math.floor,N=String.fromCharCode;function O(a){throw new RangeError(Ua[a])}function Va(a,b){var c=a.split("@"),d="";1<c.length&&(d=c[0]+"@",a=c[1]);a=a.replace(Ta,".");a=a.split(".");c=[];for(var e=a.length;e--;)c[e]=b(a[e]);b=c.join(".");return d+b}function Wa(a,b,c){var d=0;a=c?M(a/700):a>>1;for(a+=M(a/b);455<a;d+=36)a=M(a/35);return M(d+36*a/(a+38))}function Xa(a){return Va(a,(function(b){if(Sa.test(b)){var c=[];for(var d=[],e=0,g=b.length;e<g;){var f=b.charCodeAt(e++);if(55296<=f&&56319>=f&&e<g){var h=b.charCodeAt(e++);56320==(64512&h)?d.push(((1023&f)<<10)+(1023&h)+65536):(d.push(f),e--)}else d.push(f)}b=d;d=b.length;e=128;g=0;f=72;var k=q(b);for(h=k.next();!h.done;h=k.next())h=h.value,128>h&&c.push(N(h));for((k=h=c.length)&&c.push("-");k<d;){for(var l=2147483647,p=q(b),n=p.next();!n.done;n=p.next())n=n.value,n>=e&&n<l&&(l=n);p=k+1;l-e>M((2147483647-g)/p)&&O("overflow");g+=(l-e)*p;e=l;n=q(b);for(l=n.next();!l.done;l=n.next())if(l=l.value,l<e&&2147483647<++g&&O("overflow"),l==e){var r=g;for(l=36;;l+=36){var w=l<=f?1:l>=f+26?26:l-f;if(r<w)break;r-=w;var Na=36-w,Oa=c;w+=r%Na;Oa.push.call(Oa,N(w+22+75*(26>w)-0));r=M(r/Na)}c.push(N(r+22+75*(26>r)-0));f=Wa(g,p,k==h);g=0;++k}++g;++e}c="xn--"+c.join("")}else c=b;return c}))}function Ya(a){return Va(a,(function(b){if(Ra.test(b)){var c=b.slice(4).toLowerCase();b=[];var d=c.length,e=0,g=128,f=72,h=c.lastIndexOf("-");0>h&&(h=0);for(var k=0;k<h;++k)128<=c.charCodeAt(k)&&O("not-basic"),b.push(c.charCodeAt(k));for(h=0<h?h+1:0;h<d;){k=e;for(var l=1,p=36;;p+=36){h>=d&&O("invalid-input");var n=c.charCodeAt(h++);n=10>n-48?n-22:26>n-65?n-65:26>n-97?n-97:36;(36<=n||n>M((2147483647-e)/l))&&O("overflow");e+=n*l;var r=p<=f?1:p>=f+26?26:p-f;if(n<r)break;n=36-r;l>M(2147483647/n)&&O("overflow");l*=n}n=b.length+1;f=Wa(e-k,n,0==k);M(e/n)>2147483647-g&&O("overflow");g+=M(e/n);e%=n;b.splice(e++,0,g)}c=String.fromCodePoint;d=c.apply;e=String;if(!(b instanceof Array)){b=q(b);for(f=[];!(g=b.next()).done;)f.push(g.value);b=f}b=d.call(c,e,b)}return b}))}function Za(a){a=new TextEncoder("utf-8").encode(a);return window.crypto.subtle.digest("SHA-256",a).then((function(b){var c=[];b=new DataView(b);for(var d=0;d<b.byteLength;d+=4){var e=("00000000"+b.getUint32(d).toString(16)).slice(-8);c.push(e)}return c.join("")}))}var $a=/[A-Za-z\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u02b8\u0300-\u0590\u0800-\u1fff\u200e\u2c00-\ufb1c\ufe00-\ufe6f\ufefd-\uffff]/,ab=/[\u0591-\u06ef\u06fa-\u07ff\u200f\ufb1d-\ufdff\ufe70-\ufefc]/;function bb(a){a=new L(a).hostname;if(cb(a))var b=!1;else b=Ya(a),b=63>=a.length&&!($a.test(b)&&ab.test(b))&&-1!=a.indexOf(".");if(b){b=Ya(a);b=b.split("-").join("--");b=b.split(".").join("-");b=Xa(b).toLowerCase();if(63<b.length)return db(a);cb(b)&&(b="0-".concat(b,"-0"));return Promise.resolve(b)}return db(a)}function db(a){a="undefined"!==typeof window?Za(a):void 0;return a.then((function(b){return eb("ffffffffff"+b+"000000").substr(8,Math.ceil(4*b.length/5))}))}function eb(a){var b=[];a.match(/.{1,2}/g).forEach((function(g,f){b[f]=parseInt(g,16)}));var c=b.length%5,d=Math.floor(b.length/5);a=[];if(0!=c){for(var e=0;e<5-c;e++)b+="\0";d+=1}for(e=0;e<d;e++)a.push("abcdefghijklmnopqrstuvwxyz234567".charAt(b[5*e]>>3)),a.push("abcdefghijklmnopqrstuvwxyz234567".charAt((7&b[5*e])<<2|b[5*e+1]>>6)),a.push("abcdefghijklmnopqrstuvwxyz234567".charAt((63&b[5*e+1])>>1)),a.push("abcdefghijklmnopqrstuvwxyz234567".charAt((1&b[5*e+1])<<4|b[5*e+2]>>4)),a.push("abcdefghijklmnopqrstuvwxyz234567".charAt((15&b[5*e+2])<<1|b[5*e+3]>>7)),a.push("abcdefghijklmnopqrstuvwxyz234567".charAt((127&b[5*e+3])>>2)),a.push("abcdefghijklmnopqrstuvwxyz234567".charAt((3&b[5*e+3])<<3|b[5*e+4]>>5)),a.push("abcdefghijklmnopqrstuvwxyz234567".charAt(31&b[5*e+4]));d=0;1==c?d=6:2==c?d=4:3==c?d=3:4==c&&(d=1);for(c=0;c<d;c++)a.pop();for(c=0;c<d;c++)a.push("=");return a.join("")}function cb(a){return"--"==a.slice(2,4)&&"xn"!=a.slice(0,2)}function fb(a,b){var c="viewer";c=void 0===c?null:c;var d=new L(b),e=gb(d.pathname,c);e+="https:"===d.protocol?"/s/":"/";b.endsWith("/")||(d.pathname=d.pathname.replace(/\/$/,""));return bb(d.toString()).then((function(g){var f=new L(b);f.protocol="https";g=g+"."+a;f.host=g;f.hostname=g;f.pathname=e+d.hostname+d.pathname;return f.toString()}))}function gb(a,b){b=void 0===b?null:b;return Ca(a)?"/i":Ea(a)?"/r":"viewer"===b?"/v":"/c"}function hb(a){if("string"!=typeof a)return a;if("{"!=a.charAt(0))return null;try{return JSON.parse(a)}catch(b){return null}}function P(a,b,c){this.j=a;this.aa=b;this.la=c}P.prototype.addEventListener=function(a,b){var c=this;this.j.addEventListener("message",(function(d){d.origin==c.aa&&d.source==c.la&&b(d)}))};P.prototype.postMessage=function(a){this.la.postMessage(a,"null"===this.aa?"*":this.aa)};P.prototype.start=function(){};function ib(a){this.j=null;this.ca=a;this.sa=!1;this.W=null;this.ma=!0;this.va=0;this.ga={};this.Z={};this.ka=null;this.ca.addEventListener("message",this.ra.bind(this));this.ca.start()}function jb(a,b,c){var d=z.cdnProxyRegex;return new Promise((function(e){function g(f){var h=hb(f.data);!h||!(f.origin==c||d&&d.test(f.origin))||f.source&&f.source!=b||"__AMPHTML__"!==h.app||"channelOpen"!==h.name||(a.removeEventListener("message",g),f=new P(a,f.origin,b),f=new ib(f),kb(f,h.requestid,"channelOpen",null),e(f))}a.addEventListener("message",g)}))}m=ib.prototype;m.registerHandler=function(a,b){this.Z[a]=b};m.unregisterHandler=function(a){delete this.Z[a]};m.setDefaultHandler=function(a){this.ka=a};m.ra=function(a){if((a=hb(a.data))&&"__AMPHTML__"===a.app)if(this.W&&this.ma&&a.messagingToken!==this.W)lb(this,"amp-viewer-messaging: handleMessage_ error: ","invalid token");else if("q"===a.type)mb(this,a);else if("s"===a.type){var b=a.requestid,c=this.ga[b];c&&(delete this.ga[b],a.error?(lb(this,"amp-viewer-messaging: handleResponse_ error: ",a.error),c.reject(Error("Request "+a.name+" failed: "+a.error))):c.resolve(a.data))}};m.sendRequest=function(a,b,c){var d=this,e=++this.va,g=void 0;c&&(g=new Promise((function(f,h){d.ga[e]={resolve:f,reject:h}})));nb(this,{app:"__AMPHTML__",requestid:e,type:"q",name:a,data:b,rsvp:c});return g};function kb(a,b,c,d){nb(a,{app:"__AMPHTML__",requestid:b,type:"s",name:c,data:d})}function ob(a,b,c,d){var e=d?d.message?d.message:String(d):"unknown error";lb(a,"amp-viewer-messaging: sendResponseError_, message name: "+c,e);nb(a,{app:"__AMPHTML__",requestid:b,type:"s",name:c,data:null,error:e})}function nb(a,b){var c=Object.assign(b,{});a.W&&!a.ma&&(c.messagingToken=a.W);a.ca.postMessage(a.sa?JSON.stringify(c):c)}function mb(a,b){var c=a.Z[b.name];c||(c=a.ka);if(!c)throw c=Error("Cannot handle request because no default handler is set!"),c.args=b.name,c;c=c(b.name,b.data,!!b.rsvp);if(b.rsvp){var d=b.requestid;if(!c)throw ob(a,d,b.name,Error("no response")),Error("expected response but none given: "+b.name);c.then((function(e){kb(a,d,b.name,e)}),(function(e){ob(a,d,b.name,e)}))}}function lb(a,b,c){if(a.j){var d="amp-messaging-error-logger: "+b;d+=" data: "+(c?c.message?c.message:String(c):"unknown error");a.j.viewerState=d}}
/* https://mths.be/cssescape v1.5.1 by @mathias | MIT license */
var Q,pb="Webkit webkit Moz moz ms O o".split(" ");function qb(a,b,c){var d=a.style;if(!b.startsWith("--")){Q||(Q=Object.create(null));var e=Q[b];if(!e){e=b;if(void 0===d[b]){var g=b.charAt(0).toUpperCase()+b.slice(1);b:{for(var f=0;f<pb.length;f++){var h=pb[f]+g;if(void 0!==d[h]){g=h;break b}}g=""}void 0!==d[g]&&(e=g)}Q[b]=e}b=e}b&&(b.startsWith("--")?a.style.setProperty(b,c):a.style[b]=c)}function rb(a,b){for(var c in b)qb(a,c,b[c])}function sb(a){for(var b=["transform","transition"],c=0;c<b.length;c++)qb(a,b[c],null)}var R;function tb(a,b){function c(f){try{return e(f)}catch(l){var h,k;null==(k=(h=self).__AMP_REPORT_ERROR)||k.call(h,l);throw l}}var d=a,e=b,g=ub();d.addEventListener("transitionend",c,g?void 0:!1);return function(){var f;null==(f=d)||f.removeEventListener("transitionend",c,g?void 0:!1);c=d=e=null}}function ub(){if(void 0!==R)return R;R=!1;try{var a={get capture(){R=!0}};self.addEventListener("test-options",null,a);self.removeEventListener("test-options",null,a)}catch(b){}return R}function S(a,b,c){var d={detail:c};Object.assign(d,void 0);if("function"==typeof a.CustomEvent)return new a.CustomEvent(b,d);a=a.document.createEvent("CustomEvent");a.initCustomEvent(b,!!d.bubbles,!!d.cancelable,c);return a}function vb(a,b){var c=b,d=tb(a,(function(e){try{c(e)}finally{c=null,d()}}))}function wb(a,b,c){this.j=a;this.h=b;this.ia=c;this.da=null;this.j.IntersectionObserver&&this.j===this.j.parent?xb(this):(this.da=na(this.j,this.ja.bind(this),500),this.j.addEventListener("scroll",this.da),this.ja(this.h))}function xb(a){var b=new a.j.IntersectionObserver((function(c){c.forEach((function(d){d.isIntersecting&&(a.ia(),b.unobserve(a.h))}))}));b.observe(a.h)}wb.prototype.ja=function(){var a=this.h.getBoundingClientRect().top;this.j.innerHeight>a&&(this.ia(),this.j.removeEventListener("scroll",this.da))};function yb(a){this.j=a;this.C={startY:0,lastDelta:0,touchStartTimeMs:null,touchEndTimeMs:null,touchMoveTimeMs:null};this.o={startY:0,isRunning:!1,acceleration:1,speedLimit:.3,startTimeMs:null,maxTimeBetweenSwipesMs:250,moveTimeThresholdMs:100,durationMs:null,meetsDeltaYThreshold:!1,deltaYThresholdPx:5,deltaY:null,offsetThresholdPx:30,offsetPx:null,multiplier:1}}m=yb.prototype;m.onTouchStart=function(a,b){this.C.startY=b;this.C.touchStartTimeMs=a;this.o.startY=this.j.scrollY;this.o.multiplier=this.o.isRunning&&this.C.touchEndTimeMs-this.C.touchStartTimeMs<this.o.maxTimeBetweenSwipesMs?this.o.multiplier+this.o.acceleration:1;this.o.isRunning=!1};m.onTouchMove=function(a,b){this.o.acceleration=Math.abs(this.o.deltaY/(a-this.C.touchMoveTimeMs));this.C.touchMoveTimeMs=a;na(this.j,this.wa.bind(this,b),50)()};m.wa=function(a){this.o.deltaY=a-this.C.startY;this.o.meetsDeltaYThreshold=Math.abs(this.o.deltaY)>this.o.deltaYThresholdPx;this.o.meetsDeltaYThreshold&&this.j.scrollBy(0,-this.o.deltaY)};m.onTouchEnd=function(a){var b=this;this.C.touchEndTimeMs=a;if(this.o.meetsDeltaYThreshold){var c=this.C.touchEndTimeMs-this.C.touchMoveTimeMs;this.o.offsetPx=zb(this);c<this.o.moveTimeThresholdMs&&Math.abs(this.o.offsetPx)>this.o.offsetThresholdPx&&(this.o.durationMs=1.2*this.j.innerHeight,this.o.isRunning=!0,requestAnimationFrame((function(d){b.o.startTimeMs=d;b.o.startY=b.j.scrollY;b.ea(d)})));this.o.multiplier=1;this.C.startY=0;this.o.deltaY=0}};function zb(a){var b=Math.pow(a.o.acceleration,2)*a.j.innerHeight;b=Math.min(a.j.innerHeight*a.o.speedLimit,b);return b*=0<a.o.deltaY?-a.o.multiplier:a.o.multiplier}m.ea=function(a){var b=a-this.o.startTimeMs;if(!(b>this.o.durationMs)){a=b/this.o.durationMs;a=1- --a*a*a*a;var c=this.o.startY+a*this.o.offsetPx;this.o.isRunning?(this.j.scroll(0,c),requestAnimationFrame(this.ea.bind(this))):cancelAnimationFrame(requestAnimationFrame(this.ea.bind(this)))}};function T(){this.pa=100;this.X=this.fa=0;this.V=Object.create(null)}T.prototype.has=function(a){return!!this.V[a]};T.prototype.get=function(a){var b=this.V[a];if(b)return b.access=++this.X,b.payload};T.prototype.put=function(a,b){this.has(a)||this.fa++;this.V[a]={payload:b,access:this.X};if(!(this.fa<=this.pa)){a=this.V;var d,c=this.X+1;for(d in a){var e=a[d].access;if(e<c){c=e;var g=d}}void 0!==g&&(delete a[g],this.fa--)}};new Set(["c","v","a","ad"]);var Ab,Bb;function Cb(a){return"string"==typeof a?Db(a):a}function Db(a){Ab||(Ab=self.document.createElement("a"),Bb=self.__AMP_URL_CACHE||(self.__AMP_URL_CACHE=new T));return Eb(Ab,a,Bb)}function Eb(a,b,c){if(c&&c.has(b))return c.get(b);a.href=b;a.protocol||(a.href=a.href);var d={href:a.href,protocol:a.protocol,host:a.host,hostname:a.hostname,port:"0"==a.port?"":a.port,pathname:a.pathname,search:a.search,hash:a.hash,origin:null};"/"!==d.pathname[0]&&(d.pathname="/"+d.pathname);if("http:"==d.protocol&&80==d.port||"https:"==d.protocol&&443==d.port)d.port="",d.host=d.hostname;d.origin=a.origin&&"null"!=a.origin?a.origin:"data:"!=d.protocol&&d.host?d.protocol+"//"+d.host:d.href;c&&c.put(b,d);return d}function Fb(a){var c,b=[];for(c in a){var d=a[c];if(null!=d){d=t(d)?d:[d];for(var e=0;e<d.length;e++){var g=b,f=g.push;var h=d[e];h=encodeURIComponent(c)+"="+encodeURIComponent(h);f.call(g,h)}}}return b.join("&")}function Gb(a){var b=a.indexOf("#");return-1==b?a:a.substring(0,b)}function Hb(a){var b=a.indexOf("#");return-1==b?"":a.substring(b)}function Ib(a){var b=a.indexOf("?");if(-1==b)return a;var c=Hb(a);return a.substring(0,b)+c}var Jb=["cdn.ampproject.org","www.bing-amp.com"],Kb=["allow-top-navigation"],Lb={BACK:"back-button",CLOSE:"close-button"},U={},V=(U.BASE="amp-story-player-exit-control-button",U.HIDDEN="amp-story-player-hide-button",U["back-button"]="amp-story-player-back-button",U["close-button"]="amp-story-player-close-button",U),Mb={},Nb=(Mb["back-button"]="amp-story-player-back",Mb["close-button"]="amp-story-player-close",Mb);function Ob(a,b){this.j=a;this.h=b;this.I=a.document;this.oa=this.I.createElement("a");this.B=[];this.D=null;this.M=this.A=0;this.H=this.R=this.G=null;this.C={startX:0,startY:0,lastX:0,isSwipeX:null};this.O=null;this.na=new J;this.h.buildPlayer=this.buildPlayer.bind(this);this.h.layoutPlayer=this.layoutPlayer.bind(this);this.h.getElement=this.getElement.bind(this);this.h.getStories=this.getStories.bind(this);this.h.load=this.load.bind(this);this.h.show=this.show.bind(this);this.h.add=this.add.bind(this);this.h.play=this.play.bind(this);this.h.pause=this.pause.bind(this);this.h.go=this.go.bind(this);this.h.mute=this.mute.bind(this);this.h.unmute=this.unmute.bind(this);this.h.getStoryState=this.getStoryState.bind(this);this.h.rewind=this.rewind.bind(this);this.J=new yb(a);this.ba=!0;this.K=this.L=this.ha=null;return this.h}m=Ob.prototype;m.load=function(){if(!this.h.isConnected)throw Error("[amp-story-player] element must be connected to the DOM before calling load().");if(this.h.P)throw Error("[amp-story-player] calling load() on an already loaded element.");this.buildPlayer();this.layoutPlayer()};function Pb(a,b){b.idx=a.B.length;b.distance=b.idx-a.A;b.connectedDeferred=new J;a.B.push(b)}m.add=function(a){if(!(0>=a.length)){var b=function(g){return g&&g.href};if(!Array.isArray(a)||!a.every(b))throw Error('"stories" parameter has the wrong structure');for(var c=this.B.length,d=0;d<a.length;d++){var e=a[d];Pb(this,e);Qb(this,e)}W(this,c)}};m.play=function(){this.h.S||this.layoutPlayer();Rb(this,!1)};m.pause=function(){Rb(this,!0)};function Rb(a,b){a.ba=!b;Sb(a.B[a.A],b?"paused":"visible")}m.getElement=function(){return this.h};m.getStories=function(){return this.B};m.buildPlayer=function(){if(!this.h.P){Tb(this);this.Y();Ub(this);Vb(this);if(!this.G){var a=this.h.getAttribute("amp-cache");a&&!Jb.includes(a)&&console.error("[amp-story-player]","Unsupported cache specified, use one of following: "+Jb);if(a=this.h.querySelector("script")){var b;if("SCRIPT"!=a.tagName||"APPLICATION/JSON"!=(null==(b=a.getAttribute("type"))?void 0:b.toUpperCase()))throw Error('<script> child must have type="application/json"');try{this.G=JSON.parse(a.textContent)}catch(c){console.error("[amp-story-player] ",c)}}}Wb(this,this.B.length-this.A-1);this.G&&(b=this.G.behavior)&&"boolean"===typeof b.autoplay&&(this.ba=b.autoplay);this.G&&(b=this.G.display)&&"auto"===b.attribution&&(this.ha="auto");this.G&&(b=this.G.behavior)&&!1===b.pageScroll&&(this.J=null);Xb(this);Yb(this);this.h.dispatchEvent(S(this.j,"ready",u({})));this.h.isReady=!0;this.h.P=!0}};function Tb(a){da(a.h.querySelectorAll("a")).forEach((function(b){var c=b.querySelector("img[data-amp-story-player-poster-img]"),d=c&&c.getAttribute("src");b={href:b.href,title:b.textContent&&b.textContent.trim()||null,posterImage:b.getAttribute("data-poster-portrait-src")||d};Pb(a,b)}))}function Ub(a){a.B.forEach((function(b){Qb(a,b)}))}m.Y=function(){this.D=this.I.createElement("div");this.D.classList.add("i-amphtml-story-player-main-container");var a=this.I.createElement("div");a.classList.add("i-amphtml-fill-content","i-amphtml-story-player-shadow-root-intermediary");this.h.appendChild(a);var b=this.h.attachShadow?a.attachShadow({mode:"open"}):a,c=this.I.createElement("style");c.textContent=":host{all:initial;color:initial}.story-player-iframe{height:100%;width:100%;-ms-flex:0 0 100%;flex:0 0 100%;border:0;opacity:0;transition:opacity 500ms ease;position:absolute}.i-amphtml-story-player-main-container{height:100%;position:relative;overflow:hidden;transform-style:preserve-3d}.i-amphtml-story-player-loaded .story-player-iframe{opacity:1;transition:transform 200ms cubic-bezier(0.4,0,0.2,1)}.i-amphtml-story-player-no-navigation-transition .story-player-iframe{transition-duration:0.01s}.i-amphtml-story-player-main-container .story-player-iframe[i-amphtml-iframe-position=\"0\"],.i-amphtml-story-player-main-container iframe:first-of-type{transform:translateZ(1px)}.i-amphtml-story-player-main-container .story-player-iframe[i-amphtml-iframe-position=\"1\"],.i-amphtml-story-player-main-container iframe:nth-of-type(2),.i-amphtml-story-player-main-container iframe:nth-of-type(3){transform:translate3d(100%,0,0)}.i-amphtml-story-player-main-container .story-player-iframe[i-amphtml-iframe-position=\"-1\"]{transform:translate3d(-100%,0,0)}.amp-story-player-exit-control-button{position:absolute;height:48px;width:48px;background-repeat:no-repeat;background-position:50%;margin-top:7px;background-size:28px;border:0px;background-color:transparent;outline:transparent;cursor:pointer;z-index:1}.amp-story-player-close-button{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' height='24' width='24' fill='%23FFF'%3E%3Cpath d='M0 0h24v24H0z' fill='none'/%3E%3Cpath d='M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z'/%3E%3C/svg%3E\")}.amp-story-player-back-button{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' height='24' width='24' fill='%23FFF'%3E%3Cpath d='M0 0h24v24H0z' fill='none'/%3E%3Cpath d='M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z'/%3E%3C/svg%3E\")}.amp-story-player-hide-button{display:none}.i-amphtml-story-player-panel{--i-amphtml-story-player-panel-ratio:69/116;--i-amphtml-story-player-panel-responsive-margin:max(74px,calc(var(--i-amphtml-story-player-height)*0.0825));--i-amphtml-story-player-panel-height:calc(var(--i-amphtml-story-player-height) - var(--i-amphtml-story-player-panel-responsive-margin)*2);--i-amphtml-story-player-panel-width:calc(var(--i-amphtml-story-player-panel-height)*var(--i-amphtml-story-player-panel-ratio));--i-amphtml-story-player-panel-button-margin:max(10px,calc(50vw - 145px - var(--i-amphtml-story-player-panel-width)/2))}.i-amphtml-story-player-panel.i-amphtml-story-player-panel-medium{--i-amphtml-story-player-panel-responsive-margin:0px;--i-amphtml-story-player-panel-width:calc(var(--i-amphtml-story-player-height)*var(--i-amphtml-story-player-panel-ratio))}.i-amphtml-story-player-panel.i-amphtml-story-player-panel-small{--i-amphtml-story-player-panel-ratio:36/53}.i-amphtml-story-player-panel-next,.i-amphtml-story-player-panel-prev{position:absolute;top:50%;transform:translateY(-50%);width:48px;height:48px;z-index:1;background-color:transparent;border:none;background-position:50%;background-repeat:no-repeat;cursor:pointer;transition:opacity 150ms}.i-amphtml-story-player-panel-next[disabled],.i-amphtml-story-player-panel-prev[disabled]{opacity:.1;cursor:initial}.i-amphtml-story-player-full-bleed-story .i-amphtml-story-player-panel-next,.i-amphtml-story-player-full-bleed-story .i-amphtml-story-player-panel-prev,:not(.i-amphtml-story-player-panel) .i-amphtml-story-player-panel-next,:not(.i-amphtml-story-player-panel) .i-amphtml-story-player-panel-prev{opacity:0;pointer-events:none}.i-amphtml-story-player-panel-prev{margin-inline-start:calc(var(--i-amphtml-story-player-panel-button-margin));background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='16' height='16' fill='%23fff' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath fill-rule='evenodd' clip-rule='evenodd' d='M4.667 8 16 16V0L4.667 8zM0 16h2.667V0H0v16z'/%3E%3Cpath fill-rule='evenodd' clip-rule='evenodd' d='M4.667 8 16 16V0L4.667 8zM0 16h2.667V0H0v16z'/%3E%3C/svg%3E\")!important}.i-amphtml-story-player-panel-next{margin-inline-end:var(--i-amphtml-story-player-panel-button-margin);background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='16' height='16' fill='%23fff' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath fill-rule='evenodd' clip-rule='evenodd' d='M11.333 8 0 16V0l11.333 8zM16 16h-2.667V0H16v16z'/%3E%3Cpath fill-rule='evenodd' clip-rule='evenodd' d='M11.333 8 0 16V0l11.333 8zM16 16h-2.667V0H16v16z'/%3E%3C/svg%3E\")!important;right:0}[dir=rtl].i-amphtml-story-player-panel-prev{right:0}[dir=rtl].i-amphtml-story-player-panel-next{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='16' height='16' fill='%23fff' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath fill-rule='evenodd' clip-rule='evenodd' d='M4.667 8 16 16V0L4.667 8zM0 16h2.667V0H0v16z'/%3E%3Cpath fill-rule='evenodd' clip-rule='evenodd' d='M4.667 8 16 16V0L4.667 8zM0 16h2.667V0H0v16z'/%3E%3C/svg%3E\")!important;left:0}\n/*# sourceURL=/css/amp-story-player-shadow.css*/";b.appendChild(c);b.insertBefore(this.D,b.firstElementChild)};function Vb(a){var b=a.h.getAttribute("exit-control");if(Object.values(Lb).includes(b)){var c=a.I.createElement("button");a.D.appendChild(c);c.classList.add(V[b]);c.classList.add(V.BASE);c.addEventListener("click",(function(){a.h.dispatchEvent(S(a.j,Nb[b],u({})))}))}}function Qb(a,b){var c=a.I.createElement("iframe");b.posterImage&&qb(c,"backgroundImage",b.posterImage);c.classList.add("story-player-iframe");c.setAttribute("allow","autoplay");a:if(c.sandbox&&c.sandbox.supports){for(var d=["allow-top-navigation-by-user-activation","allow-popups-to-escape-sandbox"],e=0;e<d.length;e++){var g=d[e];if(!c.sandbox.supports(g)){F().info("3p-frame","Iframe doesn't support %s",g);break a}}c.sandbox=d.join(" ")+" allow-forms allow-modals allow-pointer-lock allow-popups allow-same-origin allow-scripts"}if(c.sandbox&&c.sandbox.supports&&!(0>=c.sandbox.length))for(d=0;d<Kb.length;d++){e=Kb[d];if(!c.sandbox.supports(e))throw Error("Iframe doesn't support: "+e);c.sandbox.add(e)}Zb(a,c);b.iframe=c}function $b(a,b){var c=b.iframe;b.messagingPromise=new Promise((function(d){ac(a,b,c).then((function(e){e.setDefaultHandler((function(){return I()}));e.registerHandler("touchstart",(function(g,f){if(g=bc(f))a.C.startX=g.screenX,a.C.startY=g.screenY,a.J&&a.J.onTouchStart(f.timeStamp,g.clientY),a.h.dispatchEvent(S(a.j,"amp-story-player-touchstart",u({touches:f.touches})))}));e.registerHandler("touchmove",(function(g,f){a:if(g=bc(f))if(a.h.dispatchEvent(S(a.j,"amp-story-player-touchmove",u({touches:f.touches,isNavigationalSwipe:a.C.isSwipeX}))),!1===a.C.isSwipeX)a.J&&a.J.onTouchMove(f.timeStamp,g.clientY);else{f=g.screenX;g=g.screenY;a.C.lastX=f;if(null===a.C.isSwipeX&&(a.C.isSwipeX=Math.abs(a.C.startX-f)>Math.abs(a.C.startY-g),!a.C.isSwipeX))break a;cc(a,{deltaX:f-a.C.startX,last:!1})}}));e.registerHandler("touchend",(function(g,f){a.h.dispatchEvent(S(a.j,"amp-story-player-touchend",u({touches:f.touches,isNavigationalSwipe:a.C.isSwipeX})));!0===a.C.isSwipeX?cc(a,{deltaX:a.C.lastX-a.C.startX,last:!0}):a.J&&a.J.onTouchEnd(f.timeStamp);a.C.startX=0;a.C.startY=0;a.C.lastX=0;a.C.isSwipeX=null;a.M=0}));e.registerHandler("selectDocument",(function(g,f){if(!a.H&&(f.next||f.previous)){if(f.next){g=a.A+1===a.B.length;var h="noNextStory"}else g=0===a.A,h="noPreviousStory";g&&a.h.dispatchEvent(S(a.j,h,u({})))}f.next?X(a):f.previous&&dc(a)}));e.sendRequest("onDocumentState",u({state:"PAGE_ATTACHMENT_STATE"}),!1);e.sendRequest("onDocumentState",u({state:"CURRENT_PAGE_ID"}),!1);e.sendRequest("onDocumentState",u({state:"MUTED_STATE"}));e.sendRequest("onDocumentState",u({state:"UI_STATE"}));e.registerHandler("documentStateUpdate",(function(g,f){switch(f.state){case"PAGE_ATTACHMENT_STATE":g=f.value;f=!g;var h=a.D.querySelector("button.amp-story-player-exit-control-button");h&&(f?h.classList.remove(V.HIDDEN):h.classList.add(V.HIDDEN));ec(a,g);break;case"CURRENT_PAGE_ID":fc(a,f.value,e);break;case"MUTED_STATE":a.h.dispatchEvent(S(a.j,"amp-story-muted-state",{muted:f.value}));break;case"UI_STATE":gc(a,f.value);break;case"AMP_STORY_PLAYER_EVENT":switch(g=f.value,g){case"amp-story-player-skip-next":case"amp-story-player-skip-to-next":X(a);break;default:a.h.dispatchEvent(S(a.j,g,u({})))}}}));a.G&&a.G.controls&&(hc(a,b.idx),e.sendRequest("customDocumentUI",u({controls:a.G.controls}),!1));d(e)}),(function(e){console.error("[amp-story-player]",e)}))}))}function hc(a,b){if(b===a.B.length-1){var c=fa(a.G.controls,(function(d){return"skip-next"===d.name||"skip-to-next"===d.name}));0<=c&&(a.G.controls[c].state="disabled")}}function ac(a,b,c){return ic(a,b.href).then((function(d){return jb(a.j,c.contentWindow,jc(a,d).origin)}))}function Zb(a,b){a.D.classList.add("i-amphtml-story-player-loading");b.onload=function(){a.D.classList.remove("i-amphtml-story-player-loading");a.D.classList.add("i-amphtml-story-player-loaded");a.h.classList.add("i-amphtml-story-player-loaded")};b.onerror=function(){a.D.classList.remove("i-amphtml-story-player-loading");a.D.classList.add("i-amphtml-story-player-error");a.h.classList.add("i-amphtml-story-player-error")}}m.layoutPlayer=function(){var a=this;if(!this.h.S){new wb(this.j,this.h,(function(){return a.na.resolve()}));if(this.j.ResizeObserver)new this.j.ResizeObserver((function(c){c=c[0].contentRect;kc(a,c.height,c.width)})).observe(this.h);else{var b=this.h.getBoundingClientRect();kc(this,b.height,b.width)}W(this);this.h.S=!0}};function Yb(a){a.L=a.I.createElement("button");a.L.classList.add("i-amphtml-story-player-panel-prev");a.L.addEventListener("click",(function(){return dc(a)}));a.L.setAttribute("aria-label","previous story");a.D.appendChild(a.L);a.K=a.I.createElement("button");a.K.classList.add("i-amphtml-story-player-panel-next");a.K.addEventListener("click",(function(){return X(a)}));a.K.setAttribute("aria-label","next story");a.D.appendChild(a.K);lc(a)}function lc(a){a.L.toggleAttribute("disabled",Y(a,a.A-1)&&!a.H);a.K.toggleAttribute("disabled",Y(a,a.A+1)&&!a.H)}function kc(a,b,c){var d=.75<c/b;a.D.classList.toggle("i-amphtml-story-player-panel",d);d&&(rb(a.D,{"--i-amphtml-story-player-height":b+"px"}),a.D.classList.toggle("i-amphtml-story-player-panel-medium",756>b),a.D.classList.toggle("i-amphtml-story-player-panel-small",538>b))}function mc(a){var b=a.G.behavior.endpoint;if(!b)return a.R=!1,I();b=b.replace(/\${offset}/,a.B.length.toString());return fetch(b,{method:"GET",headers:{Accept:"application/json"}}).then((function(c){return c.json()})).catch((function(c){console.error("[amp-story-player]",c)}))}function nc(a,b){a.O=new J;b.messagingPromise.then((function(c){return c.registerHandler("storyContentLoaded",(function(){b.storyContentLoaded=!0;a.O.resolve()}))}))}m.show=function(a,b,c){var d=this;b=void 0===b?null:b;c=void 0===c?{}:c;var e=b,g=oc(this,a),f=I();g.idx!==this.A&&(this.A=g.idx,f=W(this),!1===c.animate&&(this.D.classList.toggle("i-amphtml-story-player-no-navigation-transition",!0),vb(g.iframe,(function(){d.D.classList.remove("i-amphtml-story-player-no-navigation-transition")}))),pc(this));return null!=e?f.then((function(){return qc(d,e)})):f};m.mute=function(){rc(this.B[this.A],!0)};m.unmute=function(){rc(this.B[this.A],!1)};m.getStoryState=function(a){switch(a){case"page-attachment":sc(this)}};function tc(a,b){b=S(a.j,"navigation",b);a.h.dispatchEvent(b)}function pc(a){var b=a.B.length-a.A-1,c={index:a.A,remaining:b};lc(a);uc(a).then((function(d){return gc(a,d)}));tc(a,c);Wb(a,b)}function uc(a){var b=a.B[a.A];return new Promise((function(c){b.messagingPromise.then((function(d){d.sendRequest("getDocumentState",{state:"UI_STATE"},!0).then((function(e){return c(e.value)}))}))}))}function gc(a,b){a.D.classList.toggle("i-amphtml-story-player-full-bleed-story",2===b||0===b)}function Wb(a,b){a.G&&a.G.behavior&&vc(a)&&2>=b&&mc(a).then((function(c){c&&a.add(c)})).catch((function(c){console.error("[amp-story-player]",c)}))}function vc(a){function b(d){return"end"===d.on&&"fetch"===d.action&&d.endpoint}if(null!==a.R)return a.R;var c=a.G.behavior;a.R=c&&c.on&&c.action&&b(c);return a.R}function X(a){if(a.H||!Y(a,a.A+1))a.H&&Y(a,a.A+1)?a.go(1):(a.A++,W(a),pc(a))}function dc(a){if(a.H||!Y(a,a.A-1))a.H&&Y(a,a.A-1)?a.go(-1):(a.A--,W(a),pc(a))}m.go=function(a,b,c){var d=this;b=void 0===b?0:b;c=void 0===c?{}:c;var e=b,g=c;if(0!==a||0!==e){if(!this.H&&Y(this,this.A+a))throw Error("Out of Story range.");var f=this.A+a,h=0<a?this.B[f%this.B.length]:this.B[(f%this.B.length+this.B.length)%this.B.length],k=I();this.A!==h.idx&&(k=this.show(h.href,null,g));k.then((function(){0!==e&&wc(d,e)}))}};function xc(a,b){var c=0===b.distance?0:b.idx>a.A?1:-1;requestAnimationFrame((function(){var d=b.iframe;sb(d);d.setAttribute("i-amphtml-iframe-position",c)}))}function yc(a,b){if(a.B[a.A].storyContentLoaded)return I();if(0!==b.distance)return a.O.promise;a.O&&a.O.reject("[amp-story-player-dev] Cancelling previous story load promise.");nc(a,b);return I()}function W(a,b){for(var c=b=void 0===b?a.A:b,d=[],e={},g=0;g<a.B.length;e={F:e.F,U:e.U},g++)e.F=a.B[(g+c)%a.B.length],e.U=e.F.distance,e.F.distance=Math.abs(a.A-e.F.idx),1>=e.U&&1<e.F.distance&&zc(e.F),1>=e.F.distance&&!e.F.iframe.isConnected&&Ac(a,e.F),1<e.F.distance||d.push(yc(a,e.F).then(function(f){return function(){return ic(a,f.F.href)}}(e)).then(function(f){return function(h){var k=f.F.iframe.src;if(0>=k.length)k=!1;else{k=Gb(Ib(k));var l=Gb(Ib(h));k=k===l}k||(k=f.F,l=k.iframe,h=jc(a,h,"prerender").href,l.setAttribute("src",h),k.title&&l.setAttribute("title",k.title))}}(e)).then((function(){return a.na.promise})).then(function(f){return function(){0===f.F.distance&&a.ba&&Sb(f.F,"visible");0===f.U&&1===f.F.distance&&Sb(f.F,"inactive")}}(e)).then(function(f){return function(){xc(a,f.F);if(0===f.F.distance)try{f.F.iframe.focus()}catch(h){}}}(e)).catch((function(f){f.includes("amp-story-player-dev")||console.error("[amp-story-player]",f)})));return Promise.all(d)}function Ac(a,b){a.D.appendChild(b.iframe);$b(a,b);b.connectedDeferred.resolve()}function zc(a){a.storyContentLoaded=!1;a.connectedDeferred=new J;a.iframe.setAttribute("src","");a.iframe.remove()}function ic(a,b){a=a.h.getAttribute("amp-cache");return a&&Jb.includes(a)?z.cdnProxyRegex.test(Cb(b).origin)?(b=Db(b),b.pathname.startsWith("/c/")&&(b.pathname="/v/"+b.pathname.substr(3)),Promise.resolve(b.toString())):fb(a,b).then((function(c){return c})):Promise.resolve(b)}function jc(a,b,c){c=void 0===c?"inactive":c;var d={visibilityState:c,origin:a.j.origin,showStoryUrlInfo:"0",storyPlayer:"v0",cap:"swipe"};"auto"===a.ha&&(d.attribution="auto");var e=Hb(b),g=qa(e),f=Object.assign({},g,d),h=Gb(b);if(z.cdnProxyRegex.test(Cb(b).origin)){var k=u({amp_js_v:"0.1"});var l=h;if(b=Fb(k)){l=l.split("#",2);var p=l[0].split("?",2);b=p[0]+(p[1]?"?"+p[1]+"&"+b:"?"+b);h=b+=l[1]?"#"+l[1]:""}else h=l}var n=h+"#"+Fb(f);return Eb(a.oa,n)}function Sb(a,b){a.messagingPromise.then((function(c){return c.sendRequest("visibilitychange",{state:b},!0)}))}function rc(a,b){a.messagingPromise.then((function(c){c.sendRequest("setDocumentState",{state:"MUTED_STATE",value:b})}))}function sc(a){a.B[a.A].messagingPromise.then((function(b){b.sendRequest("getDocumentState",{state:"PAGE_ATTACHMENT_STATE"},!0).then((function(c){return ec(a,c.value)}))}))}function qc(a,b){a.B[a.A].messagingPromise.then((function(c){return c.sendRequest("selectPage",{id:b})}))}function oc(a,b){var c=b?fa(a.B,(function(d){return d.href===b})):a.A;if(!a.B[c])throw Error("Story URL not found in the player: "+b);return a.B[c]}m.rewind=function(a){var b=oc(this,a);(b.iframe.isConnected?I():b.connectedDeferred.promise).then((function(){return b.messagingPromise})).then((function(c){return c.sendRequest("rewind",{})}))};function wc(a,b){a.B[a.A].messagingPromise.then((function(c){return c.sendRequest("selectPage",{delta:b})}))}function fc(a,b,c){c.sendRequest("getDocumentState",u({state:"STORY_PROGRESS"}),!0).then((function(d){a.h.dispatchEvent(S(a.j,"storyNavigation",u({pageId:b,progress:d.value})))}))}function ec(a,b){a.h.dispatchEvent(S(a.j,b?"page-attachment-open":"page-attachment-close",u({})))}function cc(a,b){if(!(1>=a.B.length)){var c=b.deltaX;if(!0===b.last){var d=Math.abs(c);1===a.M&&(50<d&&(Z(a)||a.H)?X(a):Bc(a));2===a.M&&(50<d&&(Z(a)||a.H)?dc(a):Bc(a))}else Cc(a,c)}}function Bc(a){var b=a.B[a.A].iframe;requestAnimationFrame((function(){sb(b)}));var c=Z(a);c&&requestAnimationFrame((function(){sb(c.iframe)}))}function Z(a){var b=1===a.M?a.A+1:a.A-1;return Y(a,b)?null:a.B[b]}function Y(a,b){return b>=a.B.length||0>b}function Xb(a){if(null===a.H)if(a.G){var b=a.G.behavior,c=function(d){return"end"===d.on&&"circular-wrapping"===d.action};a.H=b&&b.on&&b.action&&c(b)}else a.H=!1}function Cc(a,b){if(0>b){a.M=1;var c="translate3d(calc(100% + "+b+"px), 0, 0)"}else a.M=2,c="translate3d(calc("+b+"px - 100%), 0, 0)";var d=a.B[a.A].iframe,e="translate3d("+b+"px, 0, 0)";requestAnimationFrame((function(){rb(d,{transform:e,transition:"none"})}));var g=Z(a);g&&requestAnimationFrame((function(){rb(g.iframe,{transform:c,transition:"none"})}))}function bc(a){a=a.touches;if(!a||1>a.length)return null;a=a[0];return{screenX:a.screenX,screenY:a.screenY,clientX:a.clientX,clientY:a.clientY}}function Dc(){this.j=self}function Ec(a,b){function c(){b.layoutPlayer();a.j.removeEventListener("scroll",c)}new wb(a.j,b,(function(){return b.layoutPlayer()}));a.j.addEventListener("scroll",c)}Dc.prototype.loadPlayers=function(){var a=this.j.document.getElementsByTagName("amp-story-player");E=B;F();D.user||(D.user=Aa());for(var b=0;b<a.length;b++){var c=new Ob(this.j,a[b]);c.buildPlayer();Ec(this,c)}};Dc.prototype.loadEntryPoints=function(){var a=this.j.document.getElementsByTagName("amp-story-entry-point");E=B;F();D.user||(D.user=Aa());for(var b=0;b<a.length;b++){var c=new G(this.j,a[b]);c.buildCallback();Ec(this,c)}};(function(a,b){ca(a,b)})(self.document,(function(){(new Dc).loadPlayers()}));globalThis.AmpStoryPlayer=Ob})();//# sourceMappingURL=amp-story-player-v0.js.map