(self.AMP=self.AMP||[]).push({m:0,v:"2110121450047",n:"amp-soundcloud",ev:"0.1",l:true,f:function(AMP,_){"use strict";var k;function l(a){var b=0;return function(){return b<a.length?{done:!1,value:a[b++]}:{done:!0}}}var m="function"==typeof Object.create?Object.create:function(a){function b(){}b.prototype=a;return new b};function n(a){for(var b=["object"==typeof globalThis&&globalThis,a,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global],d=0;d<b.length;++d){var c=b[d];if(c&&c.Math==Math)return}(function(){throw Error("Cannot find global object")})()}n(this);"function"===typeof Symbol&&Symbol("x");var p;if("function"==typeof Object.setPrototypeOf)p=Object.setPrototypeOf;else{var q;a:{var r={a:!0},t={};try{t.__proto__=r;q=t.a;break a}catch(a){}q=!1}p=q?function(a,b){a.__proto__=b;if(a.__proto__!==b)throw new TypeError(a+" is not extensible");return a}:null}var u=p;function v(a,b){for(var d=[],c=0,e=0;e<a.length;e++){var f=a[e];b(f,e,a)?d.push(f):(c<e&&(a[c]=f),c++)}c<a.length&&(a.length=c)}function w(a){var b=null,d="";var c=arguments;var e="undefined"!=typeof Symbol&&Symbol.iterator&&c[Symbol.iterator];c=e?e.call(c):{next:l(c)};for(e=c.next();!e.done;e=c.next())if(e=e.value,e instanceof Error&&!b){var f=b=void 0;if(null==(f=Object.getOwnPropertyDescriptor(e,"message"))?0:f.writable)b=e;else{f=e.stack;var g=Error(e.message);for(b in e)g[b]=e[b];g.stack=f;b=g}}else d&&(d+=" "),d+=e;b?d&&(b.message=d+": "+b.message):b=Error(d);return b}function x(a){var b=w.apply(null,arguments);setTimeout((function(){var d,c;null==(c=(d=self).__AMP_REPORT_ERROR)||c.call(d,b);throw b}))}function y(a,b){for(var d=[],c=1;c<arguments.length;++c)d[c-1]=arguments[c];try{a.apply(null,d)}catch(e){x(e)}}var z={getPropertyPriority:function(){return""},getPropertyValue:function(){return""}};var A=/vertical/,B=new WeakMap,E=new WeakMap,F=new WeakMap;function G(a,b){var d=a.ownerDocument.defaultView;if(d){var c=E.get(a);c||(c=[],E.set(a,c),H(d).observe(a));if(!c.some((function(f){return f.callback===b&&1===f.type}))){c.push({type:1,callback:b});var e=F.get(a);e&&setTimeout((function(){return I(1,b,e)}))}}}function J(a,b){var d=E.get(a);d&&(v(d,(function(c){return c.callback===b&&1===c.type})),0==d.length&&(E.delete(a),F.delete(a),(d=a.ownerDocument.defaultView)&&H(d).unobserve(a)))}function H(a){var b=B.get(a);b||(b=new a.ResizeObserver(K),B.set(a,b));return b}function K(a){for(var b=new Set,d=a.length-1;0<=d;d--){var c=a[d],e=c.target;if(!b.has(e)){b.add(e);var f=E.get(e);if(f)for(F.set(e,c),e=0;e<f.length;e++){var g=f[e];I(g.type,g.callback,c)}}}}function I(a,b,d){if(0==a)a=d.contentRect,y(b,{width:a.width,height:a.height});else if(1==a){var c=d.borderBoxSize;if(c)var e=0<c.length?c[0]:{inlineSize:0,blockSize:0};else{a=d.target;var f=A.test(((a.ownerDocument||a).defaultView.getComputedStyle(a)||z)["writing-mode"]),g=a.offsetHeight,h=a.offsetWidth;if(f){var C=h;var D=g}else D=h,C=g;e={inlineSize:D,blockSize:C}}y(b,e)}}function L(a){this.o=a;this.A=this.B=!1;this.j=this.j.bind(this)}L.prototype.updatePlaying=function(a){a!==this.B&&((this.B=a)?(this.A=!1,G(this.o,this.j)):J(this.o,this.j))};L.prototype.j=function(a){var b=a.blockSize,d=0<a.inlineSize&&0<b;d!==this.A&&(this.A=d,a=this.o,d||a.pause())};
/* https://mths.be/cssescape v1.5.1 by @mathias | MIT license */var M=self.AMP_CONFIG||{},N=("string"==typeof M.cdnProxyRegex?new RegExp(M.cdnProxyRegex):M.cdnProxyRegex)||/^https:\/\/([a-zA-Z0-9_-]+\.)?cdn\.ampproject\.org$/;function O(a){if(self.document&&self.document.head&&(!self.location||!N.test(self.location.origin))){var b=self.document.head.querySelector('meta[name="'+a+'"]');b&&b.getAttribute("content")}}M.cdnUrl||O("runtime-host");M.geoApiUrl||O("amp-geo-api");self.__AMP_LOG=self.__AMP_LOG||{user:null,dev:null,userForEmbed:null};var P=self.__AMP_LOG;function Q(a){a=AMP.BaseElement.call(this,a)||this;a.h=null;a.C=new L(a.element);return a}var R=AMP.BaseElement;Q.prototype=m(R.prototype);Q.prototype.constructor=Q;if(u)u(Q,R);else for(var S in R)if("prototype"!=S)if(Object.defineProperties){var T=Object.getOwnPropertyDescriptor(R,S);T&&Object.defineProperty(Q,S,T)}else Q[S]=R[S];Q.D=R.prototype;k=Q.prototype;k.preconnectCallback=function(a){var b=this.win;b=b.__AMP_TOP||(b.__AMP_TOP=b);var d=b.__AMP_SERVICES;d||(d=b.__AMP_SERVICES={});b=d.preconnect;b.obj||(b.obj=new b.ctor(b.context),b.context=null,b.resolve&&b.resolve(b.obj));b.obj.url(this.getAmpDoc(),"https://api.soundcloud.com/",a)};k.isLayoutSupported=function(a){return"fixed"==a||"fixed-height"==a||"responsive"==a||"fill"==a||"flex-item"==a||"fluid"==a||"intrinsic"==a};k.buildCallback=function(){this.element.classList.add("i-amphtml-media-component")};k.layoutCallback=function(){var a=this.element.getAttribute("height"),b=this.element.getAttribute("data-color"),d=this.element.getAttribute("data-visual"),c="https://api.soundcloud.com/"+(this.element.hasAttribute("data-trackid")?"tracks":"playlists")+"/";var e=this.element.getAttribute("data-trackid")||this.element.getAttribute("data-playlistid");var f=this.element;if(!P.user)throw Error("failed to call initLogConstructor");e=P.user.assert(e,"data-trackid or data-playlistid is required for <amp-soundcloud> %s",f,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0);var g=this.element.getAttribute("data-secret-token"),h=this.element.ownerDocument.createElement("iframe");h.setAttribute("frameborder","no");h.setAttribute("scrolling","no");c="https://w.soundcloud.com/player/?url="+encodeURIComponent(c+e);g&&(c+=encodeURIComponent("?secret_token="+g));"true"===d?c+="&visual=true":b&&(c+="&color="+encodeURIComponent(b));h.src=c;h.classList.add("i-amphtml-fill-content");h.height=a;this.element.appendChild(h);this.h=h;this.C.updatePlaying(!0);return this.loadPromise(h)};k.unlayoutCallback=function(){var a=this.h;a&&(this.element.removeChild(a),this.h=null);this.C.updatePlaying(!1);return!0};k.unlayoutCallback=function(){var a=this.h;a&&(this.element.removeChild(a),this.h=null);return!0};k.pauseCallback=function(){if(this.h&&this.h.contentWindow){var a=this.h.contentWindow,b=JSON;a.postMessage.call(a,b.stringify.call(b,{method:"pause"}),"https://w.soundcloud.com")}};AMP.registerElement("amp-soundcloud",Q)}});//# sourceMappingURL=amp-soundcloud-0.1.js.map