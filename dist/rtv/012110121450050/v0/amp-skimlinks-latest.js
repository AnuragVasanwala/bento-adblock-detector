(self.AMP=self.AMP||[]).push({m:0,v:"2110121450047",n:"amp-skimlinks",ev:"0.1",l:true,f:function(AMP,_){"use strict";var h;function aa(a){var b=0;return function(){return b<a.length?{done:!1,value:a[b++]}:{done:!0}}}var ba="function"==typeof Object.create?Object.create:function(a){function b(){}b.prototype=a;return new b};function ca(a){for(var b=["object"==typeof globalThis&&globalThis,a,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global],c=0;c<b.length;++c){var d=b[c];if(d&&d.Math==Math)return d}return function(){throw Error("Cannot find global object")}()}var da=ca(this);"function"===typeof Symbol&&Symbol("x");var m;if("function"==typeof Object.setPrototypeOf)m=Object.setPrototypeOf;else{var p;a:{var ea={a:!0},q={};try{q.__proto__=ea;p=q.a;break a}catch(a){}p=!1}m=p?function(a,b){a.__proto__=b;if(a.__proto__!==b)throw new TypeError(a+" is not extensible");return a}:null}var r=m;function fa(a,b){a.prototype=ba(b.prototype);a.prototype.constructor=a;if(r)r(a,b);else for(var c in b)if("prototype"!=c)if(Object.defineProperties){var d=Object.getOwnPropertyDescriptor(b,c);d&&Object.defineProperty(a,c,d)}else a[c]=b[c];a.Ba=b.prototype}function ha(a){var b=!1,c=null,d=a;return function(e){for(var f=[],g=0;g<arguments.length;++g)f[g-0]=arguments[g];b||(c=d.apply(self,f),b=!0,d=null);return c}}function t(a){return a||{}}var ia=Array.isArray;
/* https://mths.be/cssescape v1.5.1 by @mathias | MIT license */var u;function ja(a,b,c){a=a.createElement(b);for(var d in c)a.setAttribute(d,c[d]);return a}var v=self.AMP_CONFIG||{},ka=("string"==typeof v.cdnProxyRegex?new RegExp(v.cdnProxyRegex):v.cdnProxyRegex)||/^https:\/\/([a-zA-Z0-9_-]+\.)?cdn\.ampproject\.org$/;function la(a){if(self.document&&self.document.head&&(!self.location||!ka.test(self.location.origin))){var b=self.document.head.querySelector('meta[name="'+a+'"]');b&&b.getAttribute("content")}}v.cdnUrl||la("runtime-host");v.geoApiUrl||la("amp-geo-api");self.__AMP_LOG=self.__AMP_LOG||{user:null,dev:null,userForEmbed:null};var w=self.__AMP_LOG;function ma(){throw Error("failed to call initLogConstructor")}function x(){return w.dev||(w.dev=ma())}function na(a,b){w.user||(w.user=ma());w.user.assert(a,b,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0)}var y;function A(){return y?y:y=Promise.resolve(void 0)}function oa(){var a=this;this.promise=new Promise((function(b,c){a.resolve=b;a.reject=c}))}function B(a,b){a=a.__AMP_TOP||(a.__AMP_TOP=a);return C(a,b)}function D(a,b){var c=E(a);c=F(c);return C(c,b)}function E(a){return a.nodeType?B((a.ownerDocument||a).defaultView,"ampdoc").getAmpDoc(a):a}function F(a){a=E(a);return a.isSingleDoc()?a.win:a}function C(a,b){a=G(a)[b];a.obj||(a.obj=new a.ctor(a.context),a.context=null,a.resolve&&a.resolve(a.obj));return a.obj}function pa(a,b){var c=qa(a,b);if(c)return c;a=G(a);a[b]=ra();return a[b].promise}function qa(a,b){var c=G(a)[b];if(c){if(c.promise)return c.promise;C(a,b);return c.promise=Promise.resolve(c.obj)}return null}function G(a){var b=a.__AMP_SERVICES;b||(b=a.__AMP_SERVICES={});return b}function ra(){var a=new oa,b=a.promise,c=a.reject;a=a.resolve;b.catch((function(){}));return{obj:null,promise:b,resolve:a,reject:c,context:null,ctor:null}}function sa(a){var b=qa(F(a),"amp-analytics-instrumentation");if(b)return b;var c=E(a);return c.whenExtensionsKnown().then((function(){var d=c.getExtensionVersion("amp-analytics");return d?B(c.win,"extensions").waitForExtension("amp-analytics",d):null})).then((function(d){return d?pa(F(a),"amp-analytics-instrumentation"):null}))}function ta(a,b){this.syncResponse=a;this.asyncResponse=b}function H(){this.pa=100;this.U=this.aa=0;this.O=Object.create(null)}H.prototype.has=function(a){return!!this.O[a]};H.prototype.get=function(a){var b=this.O[a];if(b)return b.access=++this.U,b.payload};H.prototype.put=function(a,b){this.has(a)||this.aa++;this.O[a]={payload:b,access:this.U};if(!(this.aa<=this.pa)){a=this.O;var d,c=this.U+1;for(d in a){var e=a[d].access;if(e<c){c=e;var f=d}}void 0!==f&&(delete a[f],this.aa--)}};new Set(["c","v","a","ad"]);var I,ua;function va(a){I||(I=self.document.createElement("a"),ua=self.__AMP_URL_CACHE||(self.__AMP_URL_CACHE=new H));var b=I,c=ua;if(c&&c.has(a))a=c.get(a);else{b.href=a;b.protocol||(b.href=b.href);var d={href:b.href,protocol:b.protocol,host:b.host,hostname:b.hostname,port:"0"==b.port?"":b.port,pathname:b.pathname,search:b.search,hash:b.hash,origin:null};"/"!==d.pathname[0]&&(d.pathname="/"+d.pathname);if("http:"==d.protocol&&80==d.port||"https:"==d.protocol&&443==d.port)d.port="",d.host=d.hostname;d.origin=b.origin&&"null"!=b.origin?b.origin:"data:"!=d.protocol&&d.host?d.protocol+"//"+d.host:d.href;c&&c.put(a,d);a=d}return a}function J(a){return a?a.hostname.replace(/^www\./,""):""}function K(a,b){var c=b.excludedDomains;return c&&-1!==c.indexOf(a)}function Ea(a,b){a=J(a);return K(a,b)}function L(a,b,c){this.T=a;this.h=b;this.S=c;this.G=t({});this.firstRequest=null}L.prototype.fetchDomainResolverApi=function(a){var b=t({pubcode:this.h.pubcode,page:"",domains:a}),c=this.h.config.beaconUrl;c=c+"?data="+JSON.stringify(b);return this.T.fetchJson(c,{method:"GET",ampCors:!1,credentials:"include"}).then((function(d){return d.json()}))};L.prototype.resolveUnknownAnchors=function(a){var b=Fa(this,a),c=null,d=Ga(this,a);if(d.length){Ha(this,d);var e=this.X(a,d);c=Ia(this,e,d)}return new ta(b,c)};function Fa(a,b){return b.map((function(c){var d=null;var e=J(c);e=K(e,a.h)?"ignore":a.G[e]||"unknown";if("affiliate"===e||"unknown"===e)d=a.S.getAffiliateUrl(c);return{anchor:c,replacementUrl:d}}))}function Ga(a,b){return b.reduce((function(c,d){d=J(d);var e=a.G[d],f=K(d,a.h),g=-1!==c.indexOf(d);e||f||g||c.push(d);return c}),[])}function Ha(a,b){b.forEach((function(c){a.G[c]||(K(c,a.h)&&(a.G[c]="ignore"),a.G[c]="unknown")}))}L.prototype.X=function(a,b){return a.filter((function(c){var d=J(c);return-1!==b.indexOf(d)}))};function Ia(a,b,c){var d=a.fetchDomainResolverApi(c);a.firstRequest||(a.firstRequest=d);return d.then((function(e){Ja(a,c,e.merchant_domains||[]);return Fa(a,b)}))}function Ja(a,b,c){b.forEach((function(d){var e=-1!==c.indexOf(d);a.G[d]=e?"affiliate":"non-affiliate"}))}var M={pageTrackingUrl:"https://t.skimresources.com/api/track.php?data=${data}",linksTrackingUrl:"https://t.skimresources.com/api/link?data=${data}",nonAffiliateTrackingUrl:"https://t.skimresources.com/api/?call=track&rnd=${rnd}&data=${data}",beaconUrl:"https://r.skimresources.com/api"},Ka="facebook.com go.redirectingat.com go.skimresources.com instagram.com twitter.com youtube.com".split(" ");function N(){this.D=[]}N.prototype.peek=function(){var a=this.length;return a?this.D[a-1].item:null};N.prototype.enqueue=function(a,b){if(isNaN(b))throw Error("Priority must not be NaN.");for(var c=-1,d=0,e=this.length;d<=e;){c=Math.floor((d+e)/2);if(c===this.length)break;if(this.D[c].priority<b)d=c+1;else if(0<c&&this.D[c-1].priority>=b)e=c-1;else break}this.D.splice(c,0,{item:a,priority:b})};N.prototype.forEach=function(a){for(var b=this.length;b--;)a(this.D[b].item)};N.prototype.dequeue=function(){return this.length?this.D.pop().item:null};da.Object.defineProperties(N.prototype,{length:{configurable:!0,enumerable:!0,get:function(){return this.D.length}}});function La(){this.j=null}h=La.prototype;h.add=function(a){var b=this;this.j||(this.j=[]);this.j.push(a);return function(){b.remove(a)}};h.remove=function(a){if(this.j){var b=this.j;a=b.indexOf(a);-1!=a&&b.splice(a,1)}};h.removeAll=function(){this.j&&(this.j.length=0)};h.fire=function(a){if(this.j){var b=this.j;var c="undefined"!=typeof Symbol&&Symbol.iterator&&b[Symbol.iterator];b=c?c.call(b):{next:aa(b)};for(c=b.next();!c.done;c=b.next())c=c.value,c(a)}};h.getHandlerCount=function(){var a,b;return null!=(b=null==(a=this.j)?void 0:a.length)?b:0};function Ma(){this.J=[];this.$=[]}h=Ma.prototype;h.updateLinkList=function(a){this.$=a.map(this.getReplacementUrlForAnchor.bind(this));this.J=a};h.updateReplacementUrls=function(a){var b=this;a.forEach((function(c){var d=c.replacementUrl,e=b.J.indexOf(c.anchor);-1!==e&&(b.$[e]=d)}))};h.getReplacementUrlForAnchor=function(a){a=this.J.indexOf(a);return-1!==a?this.$[a]:null};h.isInCache=function(a){return-1!==this.J.indexOf(a)};h.getAnchorReplacementList=function(){var a=this;return this.J.map((function(b){return{anchor:b,replacementUrl:a.getReplacementUrlForAnchor(b)}}))};var O,Na="Webkit webkit Moz moz ms O o".split(" ");var Oa=!1;var Pa=/nochunking=1/.test(self.location.hash),P=A();function Qa(a,b){if(Pa)P.then(b);else{var c=Q,d=E(a),e=F(d),f=G(e),g=f.chunk;g||(g=f.chunk={obj:null,promise:null,resolve:null,reject:null,context:null,ctor:null,sharedInstance:!1});g.ctor||(g.ctor=c,g.context=d,g.sharedInstance=!1,g.resolve&&C(e,"chunk"));D(a,"chunk").run(b,10)}}function R(a){this.state="not_run";this.W=a}function Ra(a,b){if("run"!=a.state){a.state="run";try{a.W(b)}catch(c){throw a.ja(),c}}}R.prototype.ja=function(){};R.prototype.ha=function(){return!1};R.prototype.la=function(){return!1};function S(a,b,c){R.call(this,a);this.ca=c}fa(S,R);S.prototype.ja=function(){var a=self.document;if(!Oa){Oa=!0;a=a.body;var c,b={opacity:1,visibility:"visible",animation:"none"};for(c in b){var d=a,e=b[c];var f=d.style;var g=c;if(g.startsWith("--"))f=g;else{O||(O=Object.create(null));var k=O[g];if(!k){k=g;if(void 0===f[g]){var n=g;n=n.charAt(0).toUpperCase()+n.slice(1);b:{for(var l=0;l<Na.length;l++){var z=Na[l]+n;if(void 0!==f[z]){n=z;break b}}n=""}void 0!==f[n]&&(k=n)}O[g]=k}f=k}f&&(f.startsWith("--")?d.style.setProperty(f,e):d.style[f]=e)}}};S.prototype.ha=function(){return this.ca.ampdoc.isVisible()};S.prototype.la=function(){return this.ca.da};function Q(a){var b=this;this.ampdoc=a;this.o=a.win;this.I=new N;this.ba=this.fa.bind(this);this.H=0;this.za=!(!this.o.navigator.scheduling||!this.o.navigator.scheduling.isInputPending);this.P=!1;this.na=this.o.document.documentElement.hasAttribute("i-amphtml-no-boilerplate");this.o.addEventListener("message",(function(c){"amp-macro-task"==c.data&&b.fa(null)}));this.da=!1;pa(F(a),"viewer").then((function(){b.da=!0}));a.onVisibilityChanged((function(){a.isVisible()&&T(b)}))}Q.prototype.run=function(a,b){a=new R(a);this.I.enqueue(a,b);T(this)};Q.prototype.runForStartup=function(a){a=new S(a,this.o,this);this.I.enqueue(a,Number.POSITIVE_INFINITY);T(this)};function Sa(a,b){for(var c=a.I.peek();c&&"not_run"!==c.state;)a.I.dequeue(),c=a.I.peek();c&&b&&a.I.dequeue();return c}Q.prototype.fa=function(a){var b=this,c=Sa(this,!0);if(!c)return this.P=!1,this.H=0,!1;try{var d=Date.now();Ra(c,a)}finally{P.then().then().then().then().then().then().then().then().then((function(){b.P=!1;b.H+=Date.now()-d;x().fine("CHUNK",c.W.displayName||c.W.name,"Chunk duration",Date.now()-d,b.H);T(b)}))}return!0};function Ta(a){a.na&&(a.za?a.o.navigator.scheduling.isInputPending():5<a.H)?(a.H=0,Ua(a)):P.then((function(){a.ba(null)}))}function T(a){if(!a.P){var b=Sa(a);b&&(b.ha()?(a.P=!0,Ta(a)):b.la()&&a.o.requestIdleCallback?Va(a.o,a.ba):Ua(a))}}function Ua(a){a.o.postMessage("amp-macro-task","*")}function Va(a,b){function c(e){if(15>e.timeRemaining()){var f=2e3-(Date.now()-d);0>=f||e.didTimeout?(x().fine("CHUNK","Timed out",2e3,e.didTimeout),b(e)):(x().fine("CHUNK","Rescheduling with",f,e.timeRemaining()),a.requestIdleCallback(c,{timeout:f}))}else x().fine("CHUNK","Running idle callback with ",15),b(e)}var d=Date.now();a.requestIdleCallback(c,{timeout:2e3})}function Wa(a,b,c,d){this.events=new La;this.id=b;this.F=a;this.wa=c;this.ra=d.linkSelector||"a";this.xa=300;this.B=new Ma}h=Wa.prototype;h.getReplacementUrl=function(a){return this.isWatchingLink(a)?this.B.getReplacementUrlForAnchor(a):null};h.getAnchorReplacementList=function(){return this.B.getAnchorReplacementList()};h.isWatchingLink=function(a){return this.B.isInCache(a)};h.rewriteAnchorUrl=function(a){var b=this.getReplacementUrl(a);if(!b||b===a.href)return!1;a.setAttribute("data-link-rewriter-original-url",a.href);a.href=b;setTimeout((function(){a.href=a.getAttribute("data-link-rewriter-original-url");a.removeAttribute("data-link-rewriter-original-url")}),this.xa);return!0};h.onDomUpdated=function(){var a=this;return new Promise((function(b){Qa(a.F.nodeType==Node.DOCUMENT_NODE?a.F.documentElement:a.F,(function(){return Xa(a).then((function(){a.events.fire({type:"PAGE_SCANNED"});b()}))}))}))};function Xa(a){var b=Ya(a),c=a.X(b);a.B.updateLinkList(b);if(!c.length)return A();a.B.updateReplacementUrls(c.map((function(e){return{anchor:e,replacementUrl:null}})));var d=a.wa(c);na(d instanceof ta,'Invalid response from provided "resolveUnknownLinks" function."resolveUnknownLinks" should return an instance of TwoStepsResponse');d.syncResponse&&a.B.updateReplacementUrls(d.syncResponse);return d.asyncResponse?d.asyncResponse.then((function(e){a.B.updateReplacementUrls(e)})):A()}h.X=function(a){var b=this,c=[];a.forEach((function(d){b.isWatchingLink(d)||c.push(d)}));return c};function Ya(a){var b=a.F.querySelectorAll(a.ra);return[].slice.call(b)}function U(a){this.F=a.getRootNode();var b=a.getMetaByName("amp-link-rewriter-priorities");this.va=b?b.trim().split(/\s+/):[];this.Y=[];this.F.addEventListener("amp:dom-update",this.ta.bind(this));D(a,"navigation").registerAnchorMutator(this.maybeRewriteLink.bind(this),0)}U.prototype.registerLinkRewriter=function(a,b,c){var d=new Wa(this.F,a,b,c);Za(this.Y,d,this.va);d.onDomUpdated();return d};U.prototype.maybeRewriteLink=function(a,b){var c=$a(this,a);if(c.length){for(var d=null,e=0;e<c.length;e++)if(c[e].rewriteAnchorUrl(a)){d=c[e];break}var f={linkRewriterId:d?d.id:null,anchor:a,clickType:b.type};c.forEach((function(g){g.events.fire({type:"CLICK",eventData:f})}))}};U.prototype.ta=function(){this.Y.forEach((function(a){a.onDomUpdated()}))};function ab(a){var b=a.hasAttribute("data-link-rewriters")?a.getAttribute("data-link-rewriters").trim():null;return b?b.split(/\s+/):[]}function Za(a,b,c){a.push(b);a.sort((function(d,e){var f=c.indexOf(d.id),g=c.indexOf(e.id);return-1===f&&-1===g?0:-1===f?1:-1===g?-1:f>g?1:-1}))}function $a(a,b){var c=ab(b);return a.Y.reduce((function(d,e){e.isWatchingLink(b)&&Za(d,e,c);return d}),[])}function V(a,b){na(a,"<amp-skimlinks> Invalid option => "+b)}function bb(a,b){var c=a.getAttribute("publisher-code");V(c,'"publisher-code" is required.');var d=[];b.canonicalUrl&&d.push(va(b.canonicalUrl).hostname.replace(/^www\./,""));b.sourceUrl&&d.push(va(b.sourceUrl).hostname.replace(/^www\./,""));d=cb(a,d);var e;(e=a.getAttribute("tracking"))?(V("true"===e||"false"===e,'"tracking" possible values are "true" or "false".'),e="true"===e):e=!0;var f=a.getAttribute("custom-tracking-id");f&&V(50>=f.length,'"custom-tracking-id" should be <=50 characters and only contain upper and lowercase characters, numbers, underscores and pipes.');var k,g=a.getAttribute("link-selector")||null;(k=a.getAttribute("custom-redirect-domain"))?(k=k.replace(/^\/\/|^https?:\/\/|\/$/g,""),k="http://"+k):k="https://go.skimresources.com";try{/^[\w-]+$/.test("script");if(void 0!==u)var n=u;else{try{var l=a.ownerDocument,z=l.createElement("div"),wa=l.createElement("div");z.appendChild(wa);var xa=z.querySelector(":scope div")===wa}catch(ya){xa=!1}n=u=xa}if(n)var za=a.querySelectorAll("> script".replace(/^|,/g,"$&:scope "));else{a.classList.add("i-amphtml-scoped");var fb="> script".replace(/^|,/g,"$&.i-amphtml-scoped "),gb=a.querySelectorAll(fb);a.classList.remove("i-amphtml-scoped");za=gb}var Aa=za;var Ba=Aa.length;if(1!==Ba)throw Error("Found "+Ba+" <script> children. Expected 1.");var Ca,W=Aa[0];if("SCRIPT"!=W.tagName||"APPLICATION/JSON"!=(null==(Ca=W.getAttribute("type"))?void 0:Ca.toUpperCase()))throw Error('<script> child must have type="application/json"');try{var hb=JSON.parse(W.textContent)}catch(ya){throw Error("Failed to parse <script> contents. Is it valid JSON?")}a=hb;var Da={pageTrackingUrl:a.pageTrackingUrl||M.pageTrackingUrl,linksTrackingUrl:a.linksTrackingUrl||M.linksTrackingUrl,nonAffiliateTrackingUrl:a.nonAffiliateTrackingUrl||M.nonAffiliateTrackingUrl,beaconUrl:a.beaconUrl||M.beaconUrl}}catch(ya){Da=M}return{pubcode:c,excludedDomains:d,tracking:e,customTrackingId:f,linkSelector:g,waypointBaseUrl:k,config:Da}}function cb(a,b){var c=[].concat(b).concat(Ka),d=a.getAttribute("excluded-domains");d&&(c=c.concat(d.trim().split(/\s+/).map((function(e){return e.replace(/^www\./,"")}))));return c}function db(a,b,c){var d=!1;c=void 0===c?{}:c;d=void 0===d?!0:d;var e=c,f=d;sa(a).then((function(g){g&&g.triggerEventForTarget(a,b,e,f)}))}function eb(a,b){var c=this;this.ga=a.getResourceId();this.K=a;this.C=b;for(var d in b.triggers)b.triggers[d].on="sandbox-"+this.ga+"-"+b.triggers[d].on;this.K.signals().whenSignal("load-start").then((function(){var e=c.K,f=e.ownerDocument;var g=ja(f,"amp-analytics",t({sandbox:"true",trigger:(void 0===g?0:g)?"":"immediate"}));f=ja(f,"script",t({type:"application/json"}));f.textContent=JSON.stringify(b);g.appendChild(f);g.CONFIG=b;f=B((e.ownerDocument||e).defaultView,"extensions");var k=E(e);f.installExtensionForDoc(k,"amp-analytics");e.appendChild(g)}))}eb.prototype.trigger=function(a,b){db(this.K,"sandbox-"+this.ga+"-"+a,b)};function X(a){this.K=a;this.C={requests:{},triggers:{}}}X.prototype.setTransportConfig=function(a){this.C.transport=a};X.prototype.setExtraUrlParams=function(a){this.C.extraUrlParams=a};X.prototype.track=function(a,b){b=ia(b)?b:[b];for(var c=[],d=0;d<b.length;d++){var e=a+"-request-"+d;this.C.requests[e]=b[d];c.push(e)}this.C.triggers[a]={on:a,request:c};return this};X.prototype.build=function(){var a=new eb(this.K,this.C);this.C=null;return a};function Y(a,b,c){this.R=b.tracking;for(var d=b.customTrackingId,e="",f=0;8>f;f++)e+=Math.floor(65536*(1+Math.random())).toString(16).substring(1);this.L={customTrackingId:d,guid:null,pageImpressionId:e,pageUrl:"CANONICAL_URL",pubcode:b.pubcode,referrer:c,timezone:"TIMEZONE"};this.h=b;a=new X(a);b=this.h.config;c=b.linksTrackingUrl;d=b.nonAffiliateTrackingUrl;a.track("page-impressions",b.pageTrackingUrl);a.track("link-impressions",c);a.track("non-affiliate-click",d);a.setTransportConfig(t({beacon:!0,image:!0,xhrpost:!1}));this.V=a.build()}Y.prototype.getTrackingInfo=function(){return this.L};Y.prototype.setTrackingInfo=function(a){Object.assign(this.L,a)};Y.prototype.sendImpressionTracking=function(a){if(this.R){var b=this.L,c=t({pub:b.pubcode,pag:b.pageUrl,guid:b.guid,uuid:b.pageImpressionId,tz:b.timezone,jv:"amp@1.0.3"});b=ib(this,a);var d=b.numberAffiliateLinks,e=b.urls;b=this.L;b=Object.assign(t({slc:d,jsl:0,pref:b.referrer,uc:b.customTrackingId,t:1}),c);this.V.trigger("page-impressions",t({data:JSON.stringify(b)}));0!==d&&(b=Object.assign(t({dl:e,hae:d?1:0,typ:"l"}),c),this.V.trigger("link-impressions",t({data:JSON.stringify(b)})))}};Y.prototype.sendNaClickTracking=function(a){if(this.R&&!Ea(a,this.h)){var b=this.L,c=b.customTrackingId,d=b.pageImpressionId,e=b.timezone;a=t({pubcode:b.pubcode,referrer:b.pageUrl,pref:b.referrer,site:"false",url:a.href,custom:a.getAttribute("data-skimlinks-custom-tracking-id")||c,xtz:e,uuid:d,product:"1",jv:"amp@1.0.3"});this.V.trigger("non-affiliate-click",t({data:JSON.stringify(a),rnd:"RANDOM"}))}};function ib(a,b){var c=0,d=t({});b.forEach((function(e){var f=e.anchor,g=e.replacementUrl,k=Ea(f,a.h);g&&!k&&(d[f.href]=d[f.href]||t({ae:1,count:0}),d[f.href].count+=1,c+=1)}));return{numberAffiliateLinks:c,urls:d}}function jb(a,b,c,d){this.R=c;this.qa=d;this.oa=D(a,"documentInfo").get().canonicalUrl;this.Aa=""+(new Date).getTimezoneOffset();this.h=b}jb.prototype.getAffiliateUrl=function(a){if(!a)return null;var b=this.R.getTrackingInfo(),c=b.customTrackingId,d=b.guid,e=b.pageImpressionId;b=b.pubcode;var f=a.getAttribute("data-skimlinks-custom-tracking-id")||c,g=t({id:b,url:a.href,sref:this.oa,pref:this.qa,xguid:d,xuuid:e,xtz:this.Aa,xs:"1",jv:"amp@1.0.3"});f&&(g.xcust=f);a=this.h.waypointBaseUrl;c=[];for(l in g)if(d=g[l],null!=d)for(d=ia(d)?d:[d],e=0;e<d.length;e++){b=c;var k=b.push;var n=d[e];n=encodeURIComponent(l)+"="+encodeURIComponent(n);k.call(b,n)}var l=c.join("&");l?(a=a.split("#",2),c=a[0].split("?",2),l=c[0]+(c[1]?"?"+c[1]+"&"+l:"?"+l),l+=a[1]?"#"+a[1]:""):l=a;return l};function Z(a){a=AMP.BaseElement.call(this,a)||this;a.T=null;a.A=null;a.ea=null;a.ma=null;a.ia=null;a.h={};a.M=null;a.N=null;a.S=null;a.ka=null;a.Z=null;return a}fa(Z,AMP.BaseElement);h=Z.prototype;h.buildCallback=function(){var a=this;this.T=B(this.win,"xhr");this.A=this.getAmpDoc();this.ea=D(this.A,"documentInfo").get();this.ma=D(this.A,"viewer");this.ia=new U(this.A);this.h=bb(this.element,this.ea);return this.A.waitForBodyOpen().then((function(){return a.ma.getReferrerUrl()})).then((function(b){a.Z=b;a.signals().signal("load-start");b=new Y(a.element,a.h,a.Z);a.M=b;a.S=new jb(a.A,a.h,a.M,a.Z);a.N=new L(a.T,a.h,a.S);a.ka=kb(a)}))};h.ya=function(a){var b=this;this.M.setTrackingInfo({guid:a.guid});this.A.whenFirstVisible().then((function(){b.M.sendImpressionTracking(b.ka.getAnchorReplacementList())}))};h.ua=function(){return(this.N.firstRequest||this.N.fetchDomainResolverApi([])).then(this.ya.bind(this))};function kb(a){var b=a.ia.registerLinkRewriter("amp-skimlinks",(function(e){return a.N.resolveUnknownAnchors(e)}),{linkSelector:a.h.linkSelector}),c={},d=(c.PAGE_SCANNED=ha(a.ua.bind(a)),c.CLICK=a.sa.bind(a),c);b.events.add((function(e){var f=d[e.type];f&&f(e.eventData)}));return b}h.sa=function(a){"amp-skimlinks"!==a.linkRewriterId&&"contextmenu"!==a.clickType&&this.M.sendNaClickTracking(a.anchor)};h.isLayoutSupported=function(){return!0};AMP.registerElement("amp-skimlinks",Z)}});//# sourceMappingURL=amp-skimlinks-0.1.js.map