(self.AMP=self.AMP||[]).push({m:0,v:"2110121450047",n:"amp-audio",ev:"0.1",l:true,f:function(AMP,_){"use strict";var h;function k(a){var b=0;return function(){return b<a.length?{done:!1,value:a[b++]}:{done:!0}}}function l(a){var b="undefined"!=typeof Symbol&&Symbol.iterator&&a[Symbol.iterator];return b?b.call(a):{next:k(a)}}var m="function"==typeof Object.create?Object.create:function(a){function b(){}b.prototype=a;return new b};function n(a){for(var b=["object"==typeof globalThis&&globalThis,a,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global],e=0;e<b.length;++e){var c=b[e];if(c&&c.Math==Math)return}(function(){throw Error("Cannot find global object")})()}n(this);"function"===typeof Symbol&&Symbol("x");var p;if("function"==typeof Object.setPrototypeOf)p=Object.setPrototypeOf;else{var q;a:{var r={a:!0},t={};try{t.__proto__=r;q=t.a;break a}catch(a){}q=!1}p=q?function(a,b){a.__proto__=b;if(a.__proto__!==b)throw new TypeError(a+" is not extensible");return a}:null}var u=p;var v=Array.isArray;var w=Object.prototype.toString;function x(a,b,e){a=v(a)?a:[a];a=l(a);for(var c=a.next();!c.done;c=a.next()){var d=c.value;c=b.getAttribute(d);null!==c&&e.setAttribute(d,c)}}
/* https://mths.be/cssescape v1.5.1 by @mathias | MIT license */
function aa(a,b){var e=[];for(a=a.firstChild;a;a=a.nextSibling)b(a)&&e.push(a);return e}function ba(a){return aa(a,(function(b){if("string"==typeof b)var e=b;else b.nodeType===Node.ELEMENT_NODE&&(e=b.tagName);b=e&&e.toLowerCase().startsWith("i-")?!0:b.nodeType!==Node.ELEMENT_NODE?!1:b.hasAttribute("placeholder")||b.hasAttribute("fallback")||b.hasAttribute("overflow");return!b}))}function ca(a){for(var b=null,e="",c=l(arguments),d=c.next();!d.done;d=c.next())if(d=d.value,d instanceof Error&&!b){var f=b=void 0;if(null==(f=Object.getOwnPropertyDescriptor(d,"message"))?0:f.writable)b=d;else{f=d.stack;var g=Error(d.message);for(b in d)g[b]=d[b];g.stack=f;b=g}}else e&&(e+=" "),e+=d;b?e&&(b.message=e+": "+b.message):b=Error(e);return b}function da(a){var b=ca.apply(null,arguments);b.expected=!0;return b}function ea(a,b){for(var e=[],c=1;c<arguments.length;++c)e[c-1]=arguments[c];e=da.apply(null,e);var d,f;null==(f=(d=self).__AMP_REPORT_ERROR)||f.call(d,e)}var y,z="Webkit webkit Moz moz ms O o".split(" ");function fa(a){var b=a.style;if("width".startsWith("--"))b="width";else{y||(y=Object.create(null));var e=y.width;if(!e){e="width";if(void 0===b.width){var c;b:{for(c=0;c<z.length;c++){var d=z[c]+"Width";if(void 0!==b[d]){c=d;break b}}c=""}void 0!==b[c]&&(e=c)}y.width=e}b=e}b&&(b.startsWith("--")?a.style.setProperty(b,"100%"):a.style[b]="100%")}function ha(){var a=this;this.promise=new Promise((function(b,e){a.resolve=b;a.reject=e}))}function ia(a){return new Promise((function(b){b(a())}))}function A(a){ia((function(){return a.play(!1)})).catch((function(b){ea("TRYPLAY",b)}))}var B=self.AMP_CONFIG||{},ja=("string"==typeof B.cdnProxyRegex?new RegExp(B.cdnProxyRegex):B.cdnProxyRegex)||/^https:\/\/([a-zA-Z0-9_-]+\.)?cdn\.ampproject\.org$/;function C(a){if(self.document&&self.document.head&&(!self.location||!ja.test(self.location.origin))){var b=self.document.head.querySelector('meta[name="'+a+'"]');b&&b.getAttribute("content")}}B.cdnUrl||C("runtime-host");B.geoApiUrl||C("amp-geo-api");self.__AMP_LOG=self.__AMP_LOG||{user:null,dev:null,userForEmbed:null};var D=self.__AMP_LOG;function ka(){}function E(a,b,e,c,d){if(!D.user)throw Error("failed to call initLogConstructor");D.user.assert(a,b,e,c,d,void 0,void 0,void 0,void 0,void 0,void 0)}function F(a,b){a=a.__AMP_TOP||(a.__AMP_TOP=a);return G(a,b)}function la(a){a=H(a);a=I(a);return J(a,"url")?G(a,"url"):null}function H(a){return a.nodeType?F((a.ownerDocument||a).defaultView,"ampdoc").getAmpDoc(a):a}function I(a){a=H(a);return a.isSingleDoc()?a.win:a}function G(a,b){J(a,b);a=K(a)[b];a.obj||(a.obj=new a.ctor(a.context),a.context=null,a.resolve&&a.resolve(a.obj));return a.obj}function L(a){var b=K(a)["amp-analytics-instrumentation"];if(b){if(b.promise)return b.promise;G(a,"amp-analytics-instrumentation");return b.promise=Promise.resolve(b.obj)}return null}function K(a){var b=a.__AMP_SERVICES;b||(b=a.__AMP_SERVICES={});return b}function J(a,b){a=a.__AMP_SERVICES&&a.__AMP_SERVICES[b];return!(!a||!a.ctor)}function ma(){var a=new ha,b=a.promise,e=a.reject;a=a.resolve;b.catch((function(){}));return{obj:null,promise:b,resolve:a,reject:e,context:null,ctor:null}}function na(a){var b=L(I(a));if(b)return b;var e=H(a);return e.whenExtensionsKnown().then((function(){var c=e.getExtensionVersion("amp-analytics");return c?F(e.win,"extensions").waitForExtension("amp-analytics",c):null})).then((function(c){if(c){var d=I(a);var f=L(d);f?d=f:(d=K(d),d["amp-analytics-instrumentation"]=ma(),d=d["amp-analytics-instrumentation"].promise)}else d=null;return d}))}function M(a,b){var e=void 0===e?{}:e;var c=void 0===c?!0:c;na(a).then((function(d){d&&d.triggerEventForTarget(a,b,e,c)}))}var N;function oa(a,b,e){var c=pa();a.addEventListener(b,(function(d){try{return e(d)}catch(Q){var f,g;null==(g=(f=self).__AMP_REPORT_ERROR)||g.call(f,Q);throw Q}}),c?void 0:!1)}function pa(){if(void 0!==N)return N;N=!1;try{var a={get capture(){N=!0}};self.addEventListener("test-options",null,a);self.removeEventListener("test-options",null,a)}catch(b){}return N}function O(a,b,e){oa(a,b,e)}var P={title:"",artist:"",album:"",artwork:[{src:""}]};function qa(a,b,e,c){var d=a.navigator;"mediaSession"in d&&a.MediaMetadata&&(d.mediaSession.metadata=new a.MediaMetadata(P),d.mediaSession.metadata=new a.MediaMetadata(b),d.mediaSession.setActionHandler("play",e),d.mediaSession.setActionHandler("pause",c))}function ra(a){var b=a.querySelector('script[type="application/ld+json"]');if(b){try{var e=JSON.parse(b.textContent)}catch(d){e=null}var c=e;if(c&&c.image){if("string"===typeof c.image)return c.image;if(c.image["@list"]&&"string"===typeof c.image["@list"][0])return c.image["@list"][0];if("string"===typeof c.image.url)return c.image.url;if("string"===typeof c.image[0])return c.image[0]}}}function sa(a,b){var e=la(a);if(b&&b.artwork){var c=b.artwork;ka(v(c));c.forEach((function(d){d&&(d="[object Object]"===w.call(d)?d.src:d,E(e.isProtocolValid(d)))}))}}function R(){this.C=100;this.o=this.B=0;this.j=Object.create(null)}R.prototype.has=function(a){return!!this.j[a]};R.prototype.get=function(a){var b=this.j[a];if(b)return b.access=++this.o,b.payload};R.prototype.put=function(a,b){this.has(a)||this.B++;this.j[a]={payload:b,access:this.o};if(!(this.B<=this.C)){a=this.j;var c,e=this.o+1;for(c in a){var d=a[c].access;if(d<e){e=d;var f=c}}void 0!==f&&(delete a[f],this.B--)}};new Set(["c","v","a","ad"]);var S,T;function U(a,b){var e=void 0===e?"source":e;E(null!=a,"%s %s must be available",b,e);var c=a;if("string"==typeof c){S||(S=self.document.createElement("a"),T=self.__AMP_URL_CACHE||(self.__AMP_URL_CACHE=new R));var d=S,f=T;if(f&&f.has(c))c=f.get(c);else{d.href=c;d.protocol||(d.href=d.href);var g={href:d.href,protocol:d.protocol,host:d.host,hostname:d.hostname,port:"0"==d.port?"":d.port,pathname:d.pathname,search:d.search,hash:d.hash,origin:null};"/"!==g.pathname[0]&&(g.pathname="/"+g.pathname);if("http:"==g.protocol&&80==g.port||"https:"==g.protocol&&443==g.port)g.port="",g.host=g.hostname;g.origin=d.origin&&"null"!=d.origin?d.origin:"data:"!=g.protocol&&g.host?g.protocol+"//"+g.host:g.href;f&&f.put(c,g);c=g}}(d="https:"==c.protocol||"localhost"==c.hostname||"127.0.0.1"==c.hostname)||(c=c.hostname,d=c.length-10,d=0<=d&&c.indexOf(".localhost",d)==d);E(d||/^\/\//.test(a),'%s %s must start with "https://" or "//" or be relative and served from either https or from localhost. Invalid value: %s',b,e,a)}function V(a){a=AMP.BaseElement.call(this,a)||this;a.h=null;a.A=P;a.isPlaying=!1;return a}var W=AMP.BaseElement;V.prototype=m(W.prototype);V.prototype.constructor=V;if(u)u(V,W);else for(var X in W)if("prototype"!=X)if(Object.defineProperties){var Y=Object.getOwnPropertyDescriptor(W,X);Y&&Object.defineProperty(V,X,Y)}else V[X]=W[X];V.G=W.prototype;h=V.prototype;h.isLayoutSupported=function(a){return"fixed"==a||"fixed-height"==a};h.buildCallback=function(){"nodisplay"===this.getLayout()&&(this.element.removeAttribute("autoplay"),this.buildAudioElement());this.element.classList.add("i-amphtml-media-component");this.registerAction("play",this.F.bind(this));this.registerAction("pause",this.D.bind(this))};h.mutatedAttributesCallback=function(a){if(this.h){var b=a.src,e=a.controlsList,c=a.loop;if(void 0!==b||void 0!==e||void 0!==c)void 0!==b&&U(b,this.element),x(["src","loop","controlsList"],this.element,this.h);b=a.title;var d=a.album,f=a.artwork;void 0===a.artist&&void 0===b&&void 0===d&&void 0===f||Z(this)}};h.buildAudioElement=function(){var a=this,b=this.element.ownerDocument.createElement("audio");if(b.play){b.controls=!0;fa(b);var e=this.element.getAttribute("src");e&&U(e,this.element);x("src preload autoplay muted loop aria-label aria-describedby aria-labelledby controlsList".split(" "),this.element,b);b.classList.add("i-amphtml-fill-content");ba(this.element).forEach((function(c){c.getAttribute&&c.getAttribute("src")&&U(c.getAttribute("src"),c);b.appendChild(c)}));this.element.appendChild(b);this.h=b;O(this.h,"playing",(function(){return ta(a)}));O(this.h,"play",(function(){return M(a.element,"audio-play")}));O(this.h,"pause",(function(){return M(a.element,"audio-pause")}))}else this.toggleFallback(!0)};h.layoutCallback=function(){"nodisplay"!==this.getLayout()&&this.buildAudioElement();Z(this);return"none"===this.element.getAttribute("preload")?this.h:this.loadPromise(this.h)};function Z(a){var f,b=a.getAmpDoc().win.document,e=a.element.getAttribute("artist")||"",c=a.element.getAttribute("title")||a.element.getAttribute("aria-label")||b.title||"",d=a.element.getAttribute("album")||"";(f=a.element.getAttribute("artwork")||ra(b))||(f=(f=b.querySelector('meta[property="og:image"]'))?f.getAttribute("content"):void 0);f||(f=(b=b.querySelector('link[rel="shortcut icon"]')||b.querySelector('link[rel="icon"]'))?b.getAttribute("href"):void 0);a.A={title:c,artist:e,album:d,artwork:[{src:f||""}]}}h.renderOutsideViewport=function(){return!0};h.pauseCallback=function(){this.h&&this.h.pause()};h.D=function(){this.h&&this.h.pause()};h.F=function(){this.h&&A(this.h)};function ta(a){sa(a.element,a.A);qa(a.win,a.A,(function(){A(a.h)}),(function(){a.h.pause()}))}AMP.registerElement("amp-audio",V)}});//# sourceMappingURL=amp-audio-0.1.js.map