(self.AMP=self.AMP||[]).push({m:0,v:"2110121450047",n:"amp-ima-video",ev:"0.1",l:true,f:function(AMP,_){"use strict";var k;function aa(a){var b=0;return function(){return b<a.length?{done:!1,value:a[b++]}:{done:!0}}}function p(a){var b="undefined"!=typeof Symbol&&Symbol.iterator&&a[Symbol.iterator];return b?b.call(a):{next:aa(a)}}var ba="function"==typeof Object.create?Object.create:function(a){function b(){}b.prototype=a;return new b};function da(a){for(var b=["object"==typeof globalThis&&globalThis,a,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global],c=0;c<b.length;++c){var d=b[c];if(d&&d.Math==Math)return}(function(){throw Error("Cannot find global object")})()}da(this);"function"===typeof Symbol&&Symbol("x");var ea;if("function"==typeof Object.setPrototypeOf)ea=Object.setPrototypeOf;else{var fa;a:{var ha={a:!0},ia={};try{ia.__proto__=ha;fa=ia.a;break a}catch(a){}fa=!1}ea=fa?function(a,b){a.__proto__=b;if(a.__proto__!==b)throw new TypeError(a+" is not extensible");return a}:null}var ja=ea;function ka(){this.currentTime=0;this.duration=1;this.playedRanges=[]}ka.prototype.update=function(a){this.currentTime=a.currentTime;this.duration=a.duration;var b=a.played,c=b.length;this.playedRanges=[];for(var d=0;d<c;d++)this.playedRanges.push([b.start(d),b.end(d)])};var la;function ma(){return la?la:la=Promise.resolve(void 0)}function na(){var a=this;this.promise=new Promise((function(b,c){a.resolve=b;a.reject=c}))}function oa(a){return new Promise((function(b){b(a())}))}function u(){return"2110121450047"}var ta=Object.prototype.toString;function w(a){var b=Object.create(null);a&&Object.assign(b,a);return b}function z(a){return a||{}}function ua(a){return a?Array.prototype.slice.call(a):[]}var va=Array.isArray;function wa(a,b){for(var c=[],d=0,e=0;e<a.length;e++){var f=a[e];b(f,e,a)?c.push(f):(d<e&&(a[d]=f),d++)}d<a.length&&(a.length=d)}function xa(a){try{return JSON.parse(a)}catch(b){return null}}function ya(a){return"number"===typeof a&&isFinite(a)}
/* https://mths.be/cssescape v1.5.1 by @mathias | MIT license */
var za;function Aa(a,b){/^[\w-]+$/.test(b);b="> "+b;if(void 0!==za)var c=za;else{try{var d=a.ownerDocument,e=d.createElement("div"),f=d.createElement("div");e.appendChild(f);c=e.querySelector(":scope div")===f}catch(g){c=!1}c=za=c}c?a=a.querySelectorAll(b.replace(/^|,/g,"$&:scope ")):(a.classList.add("i-amphtml-scoped"),b=b.replace(/^|,/g,"$&.i-amphtml-scoped "),b=a.querySelectorAll(b),a.classList.remove("i-amphtml-scoped"),a=b);return a}var Ba={bubbles:!0,cancelable:!0};function Ca(a){var b;null==(b=a.parentElement)||b.removeChild(a)}function Da(a){var b;return"SCRIPT"==a.tagName&&"APPLICATION/JSON"==(null==(b=a.getAttribute("type"))?void 0:b.toUpperCase())}function Ea(a,b,c){c=c||{};var d=a.ownerDocument.createEvent("Event");d.data=c;d.initEvent(b,Ba.bubbles,Ba.cancelable);a.dispatchEvent(d)}function Fa(a){a=parseFloat(a);return ya(a)?a:void 0}function Ga(a){a.classList.add("i-amphtml-fill-content")}function Ha(a){for(var b=null,c="",d=p(arguments),e=d.next();!e.done;e=d.next())if(e=e.value,e instanceof Error&&!b){var f=b=void 0;if(null==(f=Object.getOwnPropertyDescriptor(e,"message"))?0:f.writable)b=e;else{f=e.stack;var g=Error(e.message);for(b in e)g[b]=e[b];g.stack=f;b=g}}else c&&(c+=" "),c+=e;b?c&&(b.message=c+": "+b.message):b=Error(c);return b}function Ia(a){var b,c;null==(c=(b=self).__AMP_REPORT_ERROR)||c.call(b,a)}function Ja(a){var b=Ha.apply(null,arguments);setTimeout((function(){Ia(b);throw b}))}function Ka(a,b){for(var c=[],d=1;d<arguments.length;++d)c[d-1]=arguments[d];try{a.apply(null,c)}catch(e){Ja(e)}}function La(a){var b=Ha.apply(null,arguments);b.expected=!0;return b}function Ma(a,b){for(var c=[],d=1;d<arguments.length;++d)c[d-1]=arguments[d];Ia(La.apply(null,c))}var Na,Oa="Webkit webkit Moz moz ms O o".split(" "),Ra={getPropertyPriority:function(){return""},getPropertyValue:function(){return""}};function Sa(a,b,c){var d=a.style;if(!b.startsWith("--")){Na||(Na=w());var e=Na[b];if(!e){e=b;if(void 0===d[b]){var f=b.charAt(0).toUpperCase()+b.slice(1);b:{for(var g=0;g<Oa.length;g++){var h=Oa[g]+f;if(void 0!==d[h]){f=h;break b}}f=""}void 0!==d[f]&&(e=f)}Na[b]=e}b=e}b&&(b.startsWith("--")?a.style.setProperty(b,c):a.style[b]=c)}var Ta=/vertical/,Ua=new WeakMap,B=new WeakMap,Va=new WeakMap;function Wa(a,b,c){var d=a.ownerDocument.defaultView;if(d){var e=B.get(a);e||(e=[],B.set(a,e),Xa(d).observe(a));if(!e.some((function(g){return g.callback===c&&g.type===b}))){e.push({type:b,callback:c});var f=Va.get(a);f&&setTimeout((function(){return Ya(b,c,f)}))}}}function Za(a,b,c){var d=B.get(a);d&&(wa(d,(function(e){return e.callback===c&&e.type===b})),0==d.length&&(B.delete(a),Va.delete(a),(d=a.ownerDocument.defaultView)&&Xa(d).unobserve(a)))}function Xa(a){var b=Ua.get(a);b||(b=new a.ResizeObserver($a),Ua.set(a,b));return b}function $a(a){for(var b=new Set,c=a.length-1;0<=c;c--){var d=a[c],e=d.target;if(!b.has(e)){b.add(e);var f=B.get(e);if(f)for(Va.set(e,d),e=0;e<f.length;e++){var g=f[e];Ya(g.type,g.callback,d)}}}}function Ya(a,b,c){if(0==a)a=c.contentRect,Ka(b,{width:a.width,height:a.height});else if(1==a){var d=c.borderBoxSize;if(d)var e=0<d.length?d[0]:{inlineSize:0,blockSize:0};else{a=c.target;var f=Ta.test(((a.ownerDocument||a).defaultView.getComputedStyle(a)||Ra)["writing-mode"]),g=a.offsetHeight,h=a.offsetWidth;if(f){var m=h;var l=g}else l=h,m=g;e={inlineSize:l,blockSize:m}}Ka(b,e)}}function ab(a){this.ba=a;this.da=this.C=!1;this.U=this.U.bind(this)}ab.prototype.updatePlaying=function(a){a!==this.C&&((this.C=a)?(this.da=!1,Wa(this.ba,1,this.U)):Za(this.ba,1,this.U))};ab.prototype.U=function(a){var b=a.blockSize,c=0<a.inlineSize&&0<b;c!==this.da&&(this.da=c,a=this.ba,c||a.pause())};var C=self.AMP_CONFIG||{},bb=("string"==typeof C.cdnProxyRegex?new RegExp(C.cdnProxyRegex):C.cdnProxyRegex)||/^https:\/\/([a-zA-Z0-9_-]+\.)?cdn\.ampproject\.org$/;function cb(a){if(!self.document||!self.document.head||self.location&&bb.test(self.location.origin))return null;var b=self.document.head.querySelector('meta[name="'+a+'"]');return b&&b.getAttribute("content")||null}var db={thirdParty:C.thirdPartyUrl||"https://3p.ampproject.net",thirdPartyFrameHost:C.thirdPartyFrameHost||"ampproject.net",thirdPartyFrameRegex:("string"==typeof C.thirdPartyFrameRegex?new RegExp(C.thirdPartyFrameRegex):C.thirdPartyFrameRegex)||/^d-\d+\.ampproject\.net$/,cdn:C.cdnUrl||cb("runtime-host")||"https://cdn.ampproject.org",cdnProxyRegex:bb,localhostRegex:/^https?:\/\/localhost(:\d+)?$/,errorReporting:C.errorReportingUrl||"https://us-central1-amp-error-reporting.cloudfunctions.net/r",betaErrorReporting:C.betaErrorReportingUrl||"https://us-central1-amp-error-reporting.cloudfunctions.net/r-beta",localDev:C.localDev||!1,trustedViewerHosts:[/(^|\.)google\.(com?|[a-z]{2}|com?\.[a-z]{2}|cat)$/,/(^|\.)gmail\.(com|dev)$/],geoApi:C.geoApiUrl||cb("amp-geo-api")};var eb=/(?:^[#?]?|&)([^=&]+)(?:=([^&]*))?/g;function fb(a,b){var c=b=void 0===b?"":b;try{return decodeURIComponent(a)}catch(d){return c}}function gb(a){var b=w();if(!a)return b;for(var c;c=eb.exec(a);){var d=fb(c[1],c[1]);c=c[2]?fb(c[2].replace(/\+/g," "),c[2]):"";b[d]=c}return b}function hb(a){a=(a||self).location;return gb(a.originalHash||a.hash)}var ib="";function jb(){var a=self;if(a.__AMP_MODE)a=a.__AMP_MODE;else{var b=hb(a)||hb(a);b=["1","actions","amp","amp4ads","amp4email"].includes(b.development)||!!a.AMP_DEV_MODE;if(!ib){var c;ib=(null==(c=a.AMP_CONFIG)?void 0:c.v)||"01"+u()}a=a.__AMP_MODE={localDev:!1,development:b,esm:!1,test:!1,rtvVersion:ib}}return a}function kb(a){var b=!1,c=null,d=a;return function(e){for(var f=[],g=0;g<arguments.length;++g)f[g-0]=arguments[g];b||(c=d.apply(self,f),b=!0,d=null);return c}}self.__AMP_LOG=self.__AMP_LOG||{user:null,dev:null,userForEmbed:null};var F=self.__AMP_LOG;function lb(){throw Error("failed to call initLogConstructor")}function G(){F.user||(F.user=lb());return F.user}function I(a,b,c,d,e){return G().assert(a,b,c,d,e,void 0,void 0,void 0,void 0,void 0,void 0)}function mb(a){var b=nb,c=J(a),d=K(c),e=ob(d),f=e["video-manager"];f||(f=e["video-manager"]={obj:null,promise:null,resolve:null,reject:null,context:null,ctor:null,sharedInstance:!1});f.ctor||(f.ctor=b,f.context=c,f.sharedInstance=!1,f.resolve&&L(d,"video-manager"))}function M(a,b){a=a.__AMP_TOP||(a.__AMP_TOP=a);return L(a,b)}function N(a,b){var c=J(a);c=K(c);return L(c,b)}function pb(a,b){a=J(a);a=K(a);return qb(a,b)?L(a,b):null}function J(a){return a.nodeType?M((a.ownerDocument||a).defaultView,"ampdoc").getAmpDoc(a):a}function K(a){a=J(a);return a.isSingleDoc()?a.win:a}function L(a,b){qb(a,b);a=ob(a)[b];a.obj||(a.obj=new a.ctor(a.context),a.context=null,a.resolve&&a.resolve(a.obj));return a.obj}function rb(a){var b=ob(a).consentPolicyManager;if(b){if(b.promise)return b.promise;L(a,"consentPolicyManager");return b.promise=Promise.resolve(b.obj)}return null}function ob(a){var b=a.__AMP_SERVICES;b||(b=a.__AMP_SERVICES={});return b}function qb(a,b){a=a.__AMP_SERVICES&&a.__AMP_SERVICES[b];return!(!a||!a.ctor)}function sb(){var a=new na,b=a.promise,c=a.reject;a=a.resolve;b.catch((function(){}));return{obj:null,promise:b,resolve:a,reject:c,context:null,ctor:null}}function tb(a){var b=rb(K(a));if(b)return b;var c=J(a);return c.whenExtensionsKnown().then((function(){var d=c.getExtensionVersion("amp-consent");return d?M(c.win,"extensions").waitForExtension("amp-consent",d):null})).then((function(d){if(d){var e=K(a);var f=rb(e);f?e=f:(e=ob(e),e.consentPolicyManager=sb(),e=e.consentPolicyManager.promise)}else e=null;return e}))}function ub(a,b,c){var d=c=void 0===c?{}:c,e=d.needsRootBounds;return new b.IntersectionObserver(a,{threshold:d.threshold,root:b.parent&&b.parent!=b&&e?b.document:void 0})}new WeakMap;new WeakMap;var O,vb;function wb(a){O||(O=new WeakMap,vb=new WeakMap);var b=vb.get(a);b||(b=ub((function(c){for(var d=new Set,e=c.length-1;0<=e;e--){var f=c[e].target;d.has(f)||(d.add(f),b.unobserve(f),O.get(f).resolve(c[e]),O.delete(f))}}),a,{needsRootBounds:!0}),vb.set(a,b));return b}function xb(a){if(O&&O.has(a))return O.get(a).promise;wb((a.ownerDocument||a).defaultView).observe(a);var b=new na;O.set(a,b);return b.promise}function yb(a){if(null==a.__AMP_AUTOPLAY){var b=a.document.createElement("video");b.setAttribute("muted","");b.setAttribute("playsinline","");b.setAttribute("webkit-playsinline","");b.setAttribute("height","0");b.setAttribute("width","0");b.muted=!0;b.playsInline=!0;b.playsinline=!0;b.webkitPlaysinline=!0;var d,c={position:"fixed",top:"0",width:"0",height:"0",opacity:"0"};for(d in c)Sa(b,d,c[d]);zb(b);b=Promise.resolve(!b.paused);a.__AMP_AUTOPLAY=b}return a.__AMP_AUTOPLAY}function Ab(a,b){var c=oa((function(){return a.play(!!b)}));c.catch((function(d){Ma("TRYPLAY",d)}));return c}function zb(a){oa((function(){return a.play()})).catch((function(){}))}var R;function S(a,b,c){function d(h){try{return f(h)}catch(v){var m,l;null==(l=(m=self).__AMP_REPORT_ERROR)||l.call(m,v);throw v}}var e=a,f=c,g=Bb();e.addEventListener(b,d,g?void 0:!1);return function(){var h;null==(h=e)||h.removeEventListener(b,d,g?void 0:!1);d=e=f=null}}function Bb(){if(void 0!==R)return R;R=!1;try{var a={get capture(){R=!0}};self.addEventListener("test-options",null,a);self.removeEventListener("test-options",null,a)}catch(b){}return R}function Cb(a,b,c){var d={detail:c};Object.assign(d,void 0);if("function"==typeof a.CustomEvent)return new a.CustomEvent(b,d);a=a.document.createEvent("CustomEvent");a.initCustomEvent(b,!!d.bubbles,!!d.cancelable,c);return a}function T(a,b,c){return S(a,b,c)}function Db(a,b){var c=b,d=S(a,"loadedmetadata",(function(e){try{c(e)}finally{c=null,d()}}));return d}function Eb(){this.A=null}k=Eb.prototype;k.add=function(a){var b=this;this.A||(this.A=[]);this.A.push(a);return function(){b.remove(a)}};k.remove=function(a){if(this.A){var b=this.A;a=b.indexOf(a);-1!=a&&b.splice(a,1)}};k.removeAll=function(){this.A&&(this.A.length=0)};k.fire=function(a){if(this.A)for(var b=p(this.A),c=b.next();!c.done;c=b.next())c=c.value,c(a)};k.getHandlerCount=function(){var a,b;return null!=(b=null==(a=this.A)?void 0:a.length)?b:0};function U(){this.R=!1;this.na=new Eb}U.prototype.onSessionEnd=function(a){this.na.add(a)};U.prototype.beginSession=function(){this.R=!0};U.prototype.endSession=function(){this.R&&this.na.fire();this.R=!1};U.prototype.isSessionActive=function(){return this.R};var Fb;function Gb(a){a=a.ownerDocument||a;Fb&&Fb.ownerDocument===a||(Fb=a.createElement("div"));return Hb}function Hb(a){var b=Fb;b.innerHTML=a[0];a=b.firstElementChild;b.removeChild(a);return a}var Ib=['<button aria-label="Unmute video" class="i-amphtml-video-mask i-amphtml-fill-content" tabindex=0></button>'],Jb=["<i-amphtml-video-icon class=amp-video-eq><div class=amp-video-eq-col><div class=amp-video-eq-filler></div><div class=amp-video-eq-filler></div></div></i-amphtml-video-icon>"];function Lb(a,b){var c=Gb(a)(Ib);b&&b.title&&c.setAttribute("aria-label",b.title);return c}function Mb(a){var b=Gb(a)(Jb),c=b.firstElementChild;for(a=0;4>a;a++){for(var d=c.cloneNode(!0),e=d.children,f=0;f<e.length;f++)e[f].classList.add("amp-video-eq-"+(a+1)+"-"+(f+1));b.appendChild(d)}Ca(c);return b}function Nb(a,b,c){return b[c]?b[c]:(a=a.querySelector("style["+c+"]"))?b[c]=a:null}var Ob={title:"",artist:"",album:"",artwork:[{src:""}]};function Pb(a){var b=a.querySelector('script[type="application/ld+json"]');if(b){var c=xa(b.textContent);if(c&&c.image){if("string"===typeof c.image)return c.image;if(c.image["@list"]&&"string"===typeof c.image["@list"][0])return c.image["@list"][0];if("string"===typeof c.image.url)return c.image.url;if("string"===typeof c.image[0])return c.image[0]}}}function Qb(a,b){var c=pb(a,"url");if(b&&b.artwork){var d=b.artwork;va(d);d.forEach((function(e){e&&(e="[object Object]"===ta.call(e)?e.src:e,I(c.isProtocolValid(e)))}))}}function Rb(a){a.signals().signal("user-interacted")}function nb(a){var b=this;this.ampdoc=a;this.installAutoplayStyles=kb((function(){var c=b.ampdoc.getHeadNode(),d=c.__AMP_CSS_TR;var e=d?d(".i-amphtml-video-mask{display:block;z-index:1;-webkit-appearance:none;appearance:none;background:transparent;border:none}.amp-video-eq{display:none}.i-amphtml-video-interface:not(amp-video) .amp-video-eq,amp-story .amp-video-eq,amp-video[controls] .amp-video-eq{display:-ms-flexbox;display:flex}[noaudio] .amp-video-eq{display:none!important}.amp-video-eq{pointer-events:none!important;-ms-flex-align:end;align-items:flex-end;bottom:7px;height:12px;opacity:0.8;overflow:hidden;position:absolute;right:7px;width:20px;z-index:1}.amp-video-eq-col{-ms-flex:1;flex:1;height:100%;margin-right:1px;position:relative}.amp-video-eq-col div{animation-name:amp-video-eq-animation;animation-timing-function:linear;animation-iteration-count:infinite;animation-direction:alternate;background-color:#fafafa;height:100%;position:absolute;width:100%;will-change:transform;animation-play-state:paused}.amp-video-eq-play .amp-video-eq-col div{animation-play-state:running}.amp-video-eq-1-1{animation-duration:0.3s;transform:translateY(60%)}.amp-video-eq-1-2{animation-duration:0.45s;transform:translateY(60%)}.amp-video-eq-2-1{animation-duration:0.5s;transform:translateY(30%)}.amp-video-eq-2-2{animation-duration:0.4s;transform:translateY(30%)}.amp-video-eq-3-1{animation-duration:0.3s;transform:translateY(70%)}.amp-video-eq-3-2{animation-duration:0.35s;transform:translateY(70%)}.amp-video-eq-4-1{animation-duration:0.4s;transform:translateY(50%)}.amp-video-eq-4-2{animation-duration:0.25s;transform:translateY(50%)}@keyframes amp-video-eq-animation{0%{transform:translateY(100%)}to{transform:translateY(0)}}\n/*# sourceURL=/css/video-autoplay.css*/"):".i-amphtml-video-mask{display:block;z-index:1;-webkit-appearance:none;appearance:none;background:transparent;border:none}.amp-video-eq{display:none}.i-amphtml-video-interface:not(amp-video) .amp-video-eq,amp-story .amp-video-eq,amp-video[controls] .amp-video-eq{display:-ms-flexbox;display:flex}[noaudio] .amp-video-eq{display:none!important}.amp-video-eq{pointer-events:none!important;-ms-flex-align:end;align-items:flex-end;bottom:7px;height:12px;opacity:0.8;overflow:hidden;position:absolute;right:7px;width:20px;z-index:1}.amp-video-eq-col{-ms-flex:1;flex:1;height:100%;margin-right:1px;position:relative}.amp-video-eq-col div{animation-name:amp-video-eq-animation;animation-timing-function:linear;animation-iteration-count:infinite;animation-direction:alternate;background-color:#fafafa;height:100%;position:absolute;width:100%;will-change:transform;animation-play-state:paused}.amp-video-eq-play .amp-video-eq-col div{animation-play-state:running}.amp-video-eq-1-1{animation-duration:0.3s;transform:translateY(60%)}.amp-video-eq-1-2{animation-duration:0.45s;transform:translateY(60%)}.amp-video-eq-2-1{animation-duration:0.5s;transform:translateY(30%)}.amp-video-eq-2-2{animation-duration:0.4s;transform:translateY(30%)}.amp-video-eq-3-1{animation-duration:0.3s;transform:translateY(70%)}.amp-video-eq-3-2{animation-duration:0.35s;transform:translateY(70%)}.amp-video-eq-4-1{animation-duration:0.4s;transform:translateY(50%)}.amp-video-eq-4-2{animation-duration:0.25s;transform:translateY(50%)}@keyframes amp-video-eq-animation{0%{transform:translateY(100%)}to{transform:translateY(0)}}\n/*# sourceURL=/css/video-autoplay.css*/";(d=c.__AMP_CSS_SM)||(d=c.__AMP_CSS_SM=w());var f=Nb(c,d,"amp-extension=amp-video-autoplay");f?f.textContent!==e&&(f.textContent=e):(f=(c.ownerDocument||c).createElement("style"),f.textContent=e,f.setAttribute("amp-extension","amp-video-autoplay"),e=Nb(c,d,"amp-runtime"),(e=void 0===e?null:e)?c.insertBefore(f,e.nextSibling):c.insertBefore(f,c.firstChild),d["amp-extension=amp-video-autoplay"]=f)}));this.fa=this.M=this.o=null;this.Y=L(a.win,"timer");this.xa=pb(a.getHeadNode(),"action");this.ma=function(){for(var c=0;c<b.o.length;c++){var d=b.o[c];if("paused"!==d.getPlayingState()){V(d,"video-seconds-played");var e=d.video.getCurrentTime(),f=d.video.getDuration();ya(e)&&ya(f)&&0<f&&(e=Cb(b.ampdoc.win,"video-manager.timeUpdate",z({time:e,percent:e/f})),b.xa.trigger(d.video.element,"timeUpdate",e,1))}}b.Y.delay(b.ma,1e3)};this.ca=kb((function(){return new Sb(b.ampdoc,b)}));this.Y.delay(this.ma,1e3)}k=nb.prototype;k.dispose=function(){this.ca().dispose();this.M.disconnect();this.M=null;if(this.o)for(var a=0;a<this.o.length;a++)this.o[a].dispose()};k.register=function(a){var b=this;Tb(a);if(a.supportsPlatform()&&!W(this,a)){this.M||(this.M=ub((function(e){return e.forEach((function(f){var g=f.isIntersecting;W(b,f.target).updateVisibility(g)}))}),this.ampdoc.win,{threshold:.5}));this.M.observe(a.element);T(a.element,"reloaded",(function(){return c.videoLoaded()}));this.o=this.o||[];var c=new Ub(this,a);this.o.push(c);var d=c.video.element;Ea(d,"registered");d.classList.add("i-amphtml-media-component");a.signals().signal("registered");d.classList.add("i-amphtml-video-interface")}};function Tb(a){function b(){return a.fullscreenEnter()}function c(d,e){a.registerAction(d,(function(){Rb(a);e()}),1)}c("play",(function(){return Ab(a,!1)}));c("pause",(function(){return a.pause()}));c("mute",(function(){return a.mute()}));c("unmute",(function(){return a.unmute()}));c("fullscreenenter",b);c("fullscreen",b)}function W(a,b){if(Vb(a.fa,b))return a.fa;for(var c=0;a.o&&c<a.o.length;c++){var d=a.o[c];if(Vb(d,b))return a.fa=d}return null}k.registerForAutoFullscreen=function(a){this.ca().register(a)};k.Ea=function(){return this.ca()};k.getVideoStateProperty=function(a,b){var c=this.ampdoc.getRootNode(),d=G().assertElement(c.getElementById(a),'Could not find an element with id="'+a+'" for VIDEO_STATE');a=W(this,d);return(a?a.getAnalyticsDetails():ma()).then((function(e){return e?e[b]:""}))};k.getPlayingState=function(a){return W(this,a).getPlayingState()};k.isMuted=function(a){return W(this,a).isMuted()};k.userInteracted=function(a){return W(this,a).userInteracted()};k.isRollingAd=function(a){return W(this,a).isRollingAd()};k.pauseOtherVideos=function(a){this.o.forEach((function(b){b.isPlaybackManaged()&&b!==a&&"playing_manual"==b.getPlayingState()&&b.video.pause()}))};function Vb(a,b){return!!a&&(a.video===b||a.video.element===b)}function Ub(a,b){var c=this;this.H=a;this.h=a.ampdoc;this.video=b;this.ga=!0;this.G=this.K=this.C=this.ta=!1;this.aa=new U;this.aa.onSessionEnd((function(){return V(c,"video-session")}));this.I=new U;this.I.onSessionEnd((function(){return V(c,"video-session-visible")}));this.pa=kb((function(){return new Wb(c.h.win,c)}));this.ha=this.ua=!1;this.ea=null;this.qa=this.S=!1;(this.hasAutoplay=b.element.hasAttribute("autoplay"))&&this.H.installAutoplayStyles();this.D=Ob;this.Ba=function(){Ab(c.video,!1)};this.Aa=function(){c.video.pause()};T(b.element,"load",(function(){return c.videoLoaded()}));T(b.element,"pause",(function(){V(c,"video-pause");c.C=!1;c.ha?c.ha=!1:c.aa.endSession()}));T(b.element,"play",(function(){c.qa=!0;V(c,"video-play")}));T(b.element,"playing",(function(){c.C=!0;"playing_manual"==c.getPlayingState()&&(c.oa(),c.H.pauseOtherVideos(c));var d=c.video,e=d.element;if(!d.preimplementsMediaSessionAPI()&&!e.classList.contains("i-amphtml-disable-mediasession")){Qb(e,c.D);d=c.h.win;e=c.D;var f=c.Ba,g=c.Aa,h=d.navigator;"mediaSession"in h&&d.MediaMetadata&&(h.mediaSession.metadata=new d.MediaMetadata(Ob),h.mediaSession.metadata=new d.MediaMetadata(e),h.mediaSession.setActionHandler("play",f),h.mediaSession.setActionHandler("pause",g))}c.aa.beginSession();c.G&&c.I.beginSession();c.qa||V(c,"video-play")}));T(b.element,"muted",(function(){return c.S=!0}));T(b.element,"unmuted",(function(){c.S=!1;c.H.pauseOtherVideos(c)}));T(b.element,"amp:video:tick",(function(d){d=d.data;var e=d.eventType;e&&Xb(c,e,d.vars)}));T(b.element,"ended",(function(){c.K=!1;V(c,"video-ended")}));T(b.element,"ad_start",(function(){c.K=!0;V(c,"video-ad-start")}));T(b.element,"ad_end",(function(){c.K=!1;V(c,"video-ad-end")}));b.signals().whenSignal("registered").then((function(){var d=c.video.element;(c.video.preimplementsAutoFullscreen()||!d.hasAttribute("rotate-to-fullscreen")?0:I(c.video.isInteractive(),"Only interactive videos are allowed to enter fullscreen on rotate. Set the `controls` attribute on %s to enable.",d))&&c.H.registerForAutoFullscreen(c);c.hasAutoplay&&Yb(c)}));this.oa=kb((function(){var d=Cb(c.h.win,"firstPlay",z({})),e=c.video.element;pb(e,"action").trigger(e,"firstPlay",d,1)}));Zb(this)}k=Ub.prototype;k.dispose=function(){this.pa().stop()};function Xb(a,b,c){var d={},e=(d["__amp:eventType"]=b,d);Object.keys(c).forEach((function(f){e["custom_"+f]=c[f]}));V(a,"video-hosted-custom",e)}function Zb(a){a.video.signals().whenSignal("playback-delegated").then((function(){a.ga=!1;a.C&&a.video.pause()}))}k.isMuted=function(){return this.S};k.isPlaybackManaged=function(){return this.ga};k.videoLoaded=function(){this.ta=!0;this.ea=this.video.element.querySelector("video, iframe");if(!this.video.preimplementsMediaSessionAPI()){this.video.getMetadata()&&(this.D=w(this.video.getMetadata()));var a=this.h.win.document;if(!this.D.artwork||0==this.D.artwork.length){var b;(b=Pb(a))||(b=(b=a.querySelector('meta[property="og:image"]'))?b.getAttribute("content"):void 0);b||(b=(b=a.querySelector('link[rel="shortcut icon"]')||a.querySelector('link[rel="icon"]'))?b.getAttribute("href"):void 0);b&&(this.D.artwork=[{src:b}])}!this.D.title&&(a=this.video.element.getAttribute("title")||this.video.element.getAttribute("aria-label")||this.ea.getAttribute("title")||this.ea.getAttribute("aria-label")||a.title)&&(this.D.title=a)}this.pa().start();this.G&&$b(this)};function $b(a){a.h.isVisible()&&yb(a.h.win).then((function(b){a.hasAutoplay&&!a.userInteracted()&&b?a.ga&&(a.G?(a.I.beginSession(),Ab(a.video,!0),a.ua=!0):(a.C&&a.I.endSession(),a.video.pause(),a.ha=!0)):a.G?a.I.beginSession():a.C&&a.I.endSession()}))}function Yb(a){a.video.isInteractive()&&a.video.hideControls();yb(a.h.win).then((function(b){!b&&a.video.isInteractive()?a.video.showControls():(a.video.mute(),ac(a))}))}function ac(a){function b(l){d.mutateElementSkipRemeasure((function(){g.forEach((function(v){var D=l;void 0===D&&(D=v.hasAttribute("hidden"));D?v.removeAttribute("hidden"):v.setAttribute("hidden","")}))}))}function c(l){d.mutateElementSkipRemeasure((function(){return f.classList.toggle("amp-video-eq-play",l)}))}var d=a.video,e=a.video.element;if(!e.hasAttribute("noaudio")&&!e.signals().get("user-interacted")){var f=Mb(e),g=[f],h=[T(e,"pause",(function(){return c(!1)})),T(e,"playing",(function(){return c(!0)})),T(e,"ad_start",(function(){b(!1);d.showControls()})),T(e,"ad_end",(function(){b(!0);d.hideControls()})),T(e,"unmuted",(function(){return Rb(d)}))];if(d.isInteractive()){d.hideControls();var m=Lb(e,a.D);g.push(m);h.push(T(m,"click",(function(){return Rb(d)})))}d.mutateElementSkipRemeasure((function(){g.forEach((function(l){e.appendChild(l)}))}));a.K&&b(!1);d.signals().whenSignal("user-interacted").then((function(){a.oa();d.isInteractive()&&d.showControls();d.unmute();h.forEach((function(l){l()}));d.mutateElementSkipRemeasure((function(){g.forEach((function(l){Ca(l)}))}))}))}}k.updateVisibility=function(a){var b=this.G;this.G=a;a!=b&&this.ta&&$b(this)};k.getPlayingState=function(){return this.C?this.C&&this.ua&&!this.userInteracted()?"playing_auto":"playing_manual":"paused"};k.isRollingAd=function(){return this.K};k.userInteracted=function(){return null!=this.video.signals().get("user-interacted")};k.getAnalyticsDetails=function(){var a=this,b=this.video;return Promise.all([yb(this.h.win),xb(b.element)]).then((function(c){var d=c[0],e=c[1].boundingClientRect,f=e.height;e=e.width;var g=a.hasAutoplay&&d,h=b.getPlayedRanges(),m=h.reduce((function(l,v){return l+v[1]-v[0]}),0);return{autoplay:g,currentTime:b.getCurrentTime(),duration:b.getDuration(),height:f,id:b.element.id,muted:a.S,playedTotal:m,playedRangesJson:JSON.stringify(h),state:a.getPlayingState(),width:e}}))};function Sb(a,b){var c=this;this.H=b;this.h=a;this.F=this.J=null;this.o=[];this.j=[];this.N=function(){return bc(c)};this.za=function(d){return"playing_manual"==c.H.getPlayingState(d)};this.ya=function(d,e){var f=d.boundingClientRect;var g=e.boundingClientRect;d=d.intersectionRatio-e.intersectionRatio;.1<Math.abs(d)?f=d:(e=N(c.h,"viewport"),d=cc(e,f),e=cc(e,g),f=d<e||d>e?d-e:f.top-g.top);return f};dc(this);ec(this)}Sb.prototype.dispose=function(){this.j.forEach((function(a){return a()}));this.j.length=0};Sb.prototype.register=function(a){a=a.video;var b=a.element;if("video"==b.querySelector("video, iframe").tagName.toLowerCase())var c=!0;else c=M(this.h.win,"platform"),c=c.isIos()||c.isSafari()?!!{"amp-dailymotion":!0,"amp-ima-video":!0}[b.tagName.toLowerCase()]:!0;c&&(this.o.push(a),S(b,"pause",this.N),S(b,"playing",this.N),S(b,"ended",this.N),a.signals().whenSignal("user-interacted").then(this.N),bc(this))};function ec(a){function b(){a.J=null}var c=a.h.getRootNode();a.j.push(S(c,"webkitfullscreenchange",b),S(c,"mozfullscreenchange",b),S(c,"fullscreenchange",b),S(c,"MSFullscreenChange",b))}Sb.prototype.isInLandscape=function(){var a=this.h.win;return a.screen&&"orientation"in a.screen?a.screen.orientation.type.startsWith("landscape"):90==Math.abs(a.orientation)};function dc(a){var b=a.h.win,c=b.screen;c&&"orientation"in c&&a.j.push(T(c.orientation,"change",(function(){return fc(a)})));a.j.push(T(b,"orientationchange",(function(){return fc(a)})))}function fc(a){a.isInLandscape()?null!=a.F&&gc(a,a.F):a.J&&hc(a,a.J)}function gc(a,b){var c=M(a.h.win,"platform");a.J=b;c.isAndroid()&&c.isChrome()?b.fullscreenEnter():ic(a,b).then((function(){return b.fullscreenEnter()}))}function hc(a,b){a.J=null;ic(a,b,"center").then((function(){return b.fullscreenExit()}))}function ic(a,b,c){var d=c=void 0===c?null:c,e=b.element,f=N(a.h,"viewport");return L(a.h.win,"timer").promise(330).then((function(){return xb(e)})).then((function(g){var h=g.boundingClientRect;g=h.bottom;h=h.top;var m=f.getSize().height;return 0<=h&&g<=m?ma():f.animateScrollIntoView(e,d?d:g>m?"bottom":"top")}))}function bc(a){if(a.isInLandscape())return Promise.resolve(a.F);a.F=null;var b=a.o.filter(a.za).map((function(c){return xb(c.element)}));return Promise.all(b).then((function(c){var d=c.sort(a.ya)[0];return d&&.5<d.intersectionRatio?d.target.getImpl().then((function(e){return a.F=e})):a.F}))}function cc(a,b){b=b.top+b.height/2;var c=a.getSize().height/2;return Math.abs(b-c)}function Wb(a,b){this.Y=L(a,"timer");this.P=b;this.j=null;this.Z=this.sa=0}Wb.prototype.start=function(){var a=this,b=this.P.video.element;this.stop();this.j=this.j||[];jc(this)?kc(this,this.Z):this.j.push(Db(b,(function(){jc(a)&&kc(a,a.Z)})));this.j.push(T(b,"ended",(function(){jc(a)&&lc(a,100)})))};Wb.prototype.stop=function(){if(this.j){for(;0<this.j.length;)this.j.pop()();this.Z++}};function jc(a){var b=a.P.video,c=b.getDuration();if(!(c&&!isNaN(c)&&1<c))return!1;250>50*c&&a.Da("This video is too short for `video-percentage-played`. Reports may be innacurate. For best results, use videos over",5,"seconds long.",b.element);return!0}Wb.prototype.Da=function(a){for(var b=[],c=0;c<arguments.length;++c)b[c-0]=arguments[c];G().warn.apply(G(),["video-manager"].concat(b))};function kc(a,b){if(b==a.Z){var c=a.P,d=a.Y,e=c.video,f=function(){return kc(a,b)};if("paused"==c.getPlayingState())d.delay(f,500);else if((c=e.getDuration())&&!isNaN(c)&&1<c){var g=Math.min(Math.max(50*c,250),4e3),h=e.getCurrentTime()/c*100,m=5*Math.floor(h/5);ya(m);lc(a,m);d.delay(f,g)}else d.delay(f,500)}}function lc(a,b){0>=b||a.sa==b||(a.sa=b,V(a.P,"video-percentage-played",{normalizedPercentage:b.toString()}))}function V(a,b,c){var d=a.video;a.getAnalyticsDetails().then((function(e){c&&Object.assign(e,c);Ea(d.element,b,e)}))}function mc(){this.Ca=100;this.$=this.ka=0;this.O=w()}mc.prototype.has=function(a){return!!this.O[a]};mc.prototype.get=function(a){var b=this.O[a];if(b)return b.access=++this.$,b.payload};mc.prototype.put=function(a,b){this.has(a)||this.ka++;this.O[a]={payload:b,access:this.$};if(!(this.ka<=this.Ca)){a=this.O;var d,c=this.$+1;for(d in a){var e=a[d].access;if(e<c){c=e;var f=d}}void 0!==f&&(delete a[f],this.ka--)}};new Set(["c","v","a","ad"]);var nc,oc;function pc(a){nc||(nc=self.document.createElement("a"),oc=self.__AMP_URL_CACHE||(self.__AMP_URL_CACHE=new mc));var b=nc,c=oc;if(c&&c.has(a))a=c.get(a);else{b.href=a;b.protocol||(b.href=b.href);var d={href:b.href,protocol:b.protocol,host:b.host,hostname:b.hostname,port:"0"==b.port?"":b.port,pathname:b.pathname,search:b.search,hash:b.hash,origin:null};"/"!==d.pathname[0]&&(d.pathname="/"+d.pathname);if("http:"==d.protocol&&80==d.port||"https:"==d.protocol&&443==d.port)d.port="",d.host=d.hostname;d.origin=b.origin&&"null"!=b.origin?b.origin:"data:"!=d.protocol&&d.host?d.protocol+"//"+d.host:d.href;c&&c.put(a,d);a=d}return a}function qc(a,b){var c=void 0===c?"source":c;I(null!=a,"%s %s must be available",b,c);var d=a;d="string"==typeof d?pc(d):d;var e;(e="https:"==d.protocol||"localhost"==d.hostname||"127.0.0.1"==d.hostname)||(d=d.hostname,e=d.length-10,e=0<=e&&d.indexOf(".localhost",e)==e);I(e||/^\/\//.test(a),'%s %s must start with "https://" or "//" or be relative and served from either https or from localhost. Invalid value: %s',b,c,a);return a}var rc={};function sc(a,b,c){I("ima-video","Attribute type required for <amp-ad>: %s",b);var d=0;for(var e=a;e&&e!=e.parent;e=e.parent)d++;d=String(d)+"-"+tc(a);var h,f=e={},g=b.dataset;for(h in g)h.startsWith("vars")||(f[h]=g[h]);if(h=b.getAttribute("json")){h=xa(h);if(void 0===h)throw G().createError("Error parsing JSON in json attribute in element %s",b);for(var m in h)f[m]=h[m]}m=e;e=Date.now();f=b.getAttribute("width");h=b.getAttribute("height");m=m?m:{};m.width=Fa(f);m.height=Fa(h);b.getAttribute("title")&&(m.title=b.getAttribute("title"));var l=a.location.href;"about:srcdoc"==l&&(l=a.parent.location.href);var v=J(b),D=N(b,"documentInfo").get();f=N(b,"viewer").getUnconfirmedReferrerUrl();var P=b.ownerDocument.body;g=h=0;for(var x=b;x&&x!=P;x=x.offsetParent)h+=x.offsetLeft,g+=x.offsetTop;P=b.offsetWidth;x=b.offsetHeight;var q={left:h,top:g,width:P,height:x,bottom:g+x,right:h+P,x:h,y:g};h=m;g=u();P=db.thirdParty+"/"+u()+"/ampcontext-v0.js";x=D.sourceUrl;var yc=D.canonicalUrl;D=D.pageViewId;l={href:l};var pa,zc=b.tagName,Ac={localDev:!1,development:jb().development,esm:jb().esm,test:!1,rtvVersion:jb().rtvVersion};var Bc=!(null==(pa=a.AMP_CONFIG)||!pa.canary);pa=!v.isVisible();v=q?{left:q.left,top:q.top,width:q.width,height:q.height}:null;q=b;for(var y=[],E=0;1==(null==q?void 0:q.nodeType)&&25>E;){var qa="";q.id&&(qa="/"+q.id);var Pa=q.nodeName.toLowerCase(),Q=y,Cc=Q.push;qa=""+Pa+qa;Pa=q.nodeName;for(var Qa=0,ra=0,sa=q.previousElementSibling;sa&&25>ra&&100>Qa;)sa.nodeName==Pa&&ra++,Qa++,sa=sa.previousElementSibling;Cc.call(Q,qa+(25>ra&&100>Qa?"."+ra:""));E++;q=q.parentElement}q=y.join();y=q.length;E=5381;for(Q=0;Q<y;Q++)E=33*E^q.charCodeAt(Q);q=String(E>>>0);if(a.__AMP__EXPERIMENT_TOGGLES)a=a.__AMP__EXPERIMENT_TOGGLES;else{a.__AMP__EXPERIMENT_TOGGLES=w();y=a.__AMP__EXPERIMENT_TOGGLES;var r,A,Kb;E=Object.assign({},null!=(A=a.AMP_CONFIG)?A:{},null!=(Kb=a.AMP_EXP)?Kb:JSON.parse((null==(r=a.__AMP_EXP)?void 0:r.textContent)||"{}"));for(var H in E)r=E[H],"number"===typeof r&&0<=r&&1>=r&&(y[H]=Math.random()<r);var n;H=null==(n=a.AMP_CONFIG)?void 0:n["allow-doc-opt-in"];if(va(H)&&H.length&&(n=a.document.head.querySelector('meta[name="amp-experiments-opt-in"]')))for(n=n.getAttribute("content").split(","),r=p(n),n=r.next();!n.done;n=r.next())n=n.value,H.includes(n)&&(y[n]=!0);n=Object;H=n.assign;r="";try{"localStorage"in a&&(r=a.localStorage.getItem("amp-experiment-toggles"))}catch(Hc){(F.dev||(F.dev=lb())).warn("EXPERIMENTS","Failed to retrieve experiments from localStorage.")}var t;r=(null==(t=r)?void 0:t.split(/\s*,\s*/g))||[];t=w();r=p(r);for(A=r.next();!A.done;A=r.next())(A=A.value)&&("-"==A[0]?t[A.substr(1)]=!1:t[A]=!0);H.call(n,y,t);var ca;t=null==(ca=a.AMP_CONFIG)?void 0:ca["allow-url-opt-in"];if(va(t)&&t.length)for(a=gb(a.location.originalHash||a.location.hash),ca=p(t),n=ca.next();!n.done;n=ca.next())t=n.value,n=a["e-"+t],"1"==n&&(y[t]=!0),"0"==n&&(y[t]=!1);a=y}h._context=z({ampcontextVersion:g,ampcontextFilepath:P,sourceUrl:x,referrer:f,canonicalUrl:yc,pageViewId:D,location:l,startTime:e,tagName:zc,mode:Ac,canary:Bc,hidden:pa,initialLayoutRect:v,domFingerprint:q,experimentToggles:a,sentinel:d});(b=b.getAttribute("src"))&&(m.src=b);e=m;e.type="ima-video";Object.assign(e._context,c);return e}function uc(a,b,c){var d={allowFullscreen:!0};d=void 0===d?{}:d;var e=void 0===d.allowFullscreen?!1:d.allowFullscreen,f=d.initialIntersection;c=sc(a,b,c);f&&(c._context.initialIntersection=f);var g=a.document.createElement("iframe");rc[c.type]||(rc[c.type]=0);rc[c.type]+=1;d=b.getAmpDoc();a=vc(a,d);var h=pc(a).hostname;d=JSON.stringify(z({host:h,bootstrap:wc(c.type),type:c.type,count:rc[c.type],attributes:c}));g.src=a;g.ampLocation=pc(a);g.name=d;c.width&&(g.width=c.width);c.height&&(g.height=c.height);c.title&&(g.title=c.title);e&&g.setAttribute("allowfullscreen","true");g.setAttribute("scrolling","no");Sa(g,"border","none");g.onload=function(){this.readyState="complete"};g.setAttribute("allow","sync-xhr 'none';");["facebook"].includes("ima-video")||xc(g);g.setAttribute("data-amp-3p-sentinel",c._context.sentinel);return g}function wc(a){return db.thirdParty+"/"+u()+"/vendor/"+a+".js"}function vc(a,b){if(b=b.getMetaByName("amp-3p-iframe-src")){var c=qc(b,'meta[name="amp-3p-iframe-src"]');I(-1==c.indexOf("?"),"3p iframe url must not include query string %s in element %s.",c,b);var d=pc(c);I("localhost"==d.hostname&&!0||d.origin!=pc(a.location.href).origin,"3p iframe url must not be on the same origin as the current document %s (%s) in element %s. See https://github.com/ampproject/amphtml/blob/main/docs/spec/amp-iframe-origin-policy.md for details.",c,d.origin,b);b=c+"?"+u()}else b=null;b||(a.__AMP_DEFAULT_BOOTSTRAP_SUBDOMAIN=a.__AMP_DEFAULT_BOOTSTRAP_SUBDOMAIN||"d-"+tc(a),b="https://"+a.__AMP_DEFAULT_BOOTSTRAP_SUBDOMAIN+"."+db.thirdPartyFrameHost+"/"+u()+"/frame.html");return b}function tc(a){if(a.crypto&&a.crypto.getRandomValues){var b=new Uint32Array(2);a.crypto.getRandomValues(b);var c=String(b[0])+b[1]}else c=String(a.Math.random()).substr(2)+"0";return c}function xc(a){if(a.sandbox&&a.sandbox.supports){for(var b=["allow-top-navigation-by-user-activation","allow-popups-to-escape-sandbox"],c=0;c<b.length;c++){var d=b[c];if(!a.sandbox.supports(d)){(F.dev||(F.dev=lb())).info("3p-frame","Iframe doesn't support %s",d);return}}a.sandbox=b.join(" ")+" allow-forms allow-modals allow-pointer-lock allow-popups allow-same-origin allow-scripts"}}function Dc(a,b){var c=b=void 0===b?"default":b;return tb(a).then((function(d){return d?d.whenPolicyResolved(c):null}))}function Ec(a){var b=a.getAttribute("allow")||"";a.setAttribute("allow",b+"autoplay;")}function X(a){a=AMP.BaseElement.call(this,a)||this;a.B=null;a.wa=null;a.L=null;a.ja=null;a.la=null;a.va=null;a.W=null;a.X=null;a.ra=!1;a.j={};a.V=new ka;a.T=a.T.bind(a);a.ia=new ab(a.element);return a}var Y=AMP.BaseElement;X.prototype=ba(Y.prototype);X.prototype.constructor=X;if(ja)ja(X,Y);else for(var Fc in Y)if("prototype"!=Fc)if(Object.defineProperties){var Gc=Object.getOwnPropertyDescriptor(Y,Fc);Gc&&Object.defineProperty(X,Fc,Gc)}else X[Fc]=Y[Fc];X.Fa=Y.prototype;k=X.prototype;k.buildCallback=function(){var a=this;this.wa=this.getViewport();"true"===this.element.getAttribute("data-delay-ad-request")&&(this.j.onFirstScroll=this.wa.onScroll((function(){Z(a,"onFirstScroll")})),L(this.win,"timer").delay((function(){Z(a,"onAdRequestDelayTimeout")}),3e3));qc(this.element.getAttribute("data-tag"),"The data-tag attribute is required for <amp-video-ima> and must be https");var b=Aa(this.element,"SOURCE"),c=Aa(this.element,"TRACK");this.va=ua(b).concat(ua(c)).map((function(e){var f=e.tagName,g=e.getAttribute("src");"SOURCE"!=f||a.W?"TRACK"!=f||a.X||(a.X=g):a.W=g;e=e.attributes;g={};for(var h=0;h<e.length;h++){var m=e[h];g[m.name]=m.value}return[f,g]}));var d=Aa(this.element,"SCRIPT")[0];d&&Da(d)&&this.element.setAttribute("data-ima-settings",d.innerHTML)};k.preconnectCallback=function(){var a=this.element,b=M(this.win,"preconnect");b.preload(this.getAmpDoc(),"https://imasdk.googleapis.com/js/sdkloader/ima3.js","script");var c=a.getAttribute("data-src");c&&b.url(this.getAmpDoc(),c);this.W&&b.url(this.getAmpDoc(),this.W);this.X&&b.url(this.getAmpDoc(),this.X);b.url(this.getAmpDoc(),a.getAttribute("data-tag"));a=this.getAmpDoc();c=vc(this.win,a);b.preload(a,c,"document");b.preload(a,wc("ima-video"),"script")};k.isLayoutSupported=function(a){return"fixed"==a||"fixed-height"==a||"responsive"==a||"fill"==a||"flex-item"==a||"fluid"==a||"intrinsic"==a};k.getConsentPolicy=function(){return null};k.layoutCallback=function(){var a=this,b=this.element,c=this.win,d=AMP.BaseElement.prototype.getConsentPolicy.call(this),e=d?Dc(b,d):Promise.resolve(null);b.setAttribute("data-source-children",JSON.stringify(this.va));return e.then((function(f){var g=uc(c,b,{initialConsentState:f});g.title=a.element.title||"IMA video";Ga(g);Ec(g);a.B=g;var h=new na;a.L=h.promise;a.ja=h.resolve;a.la=T(a.win,"message",(function(m){if(m.source==a.B.contentWindow&&(m=m.data,"[object Object]"===ta.call(m))){var l=m.event;if("registered"===l||"load"===l||"loadedmetadata"===l||"loadeddata"===l||"play"===l||"playing"===l||"pause"===l||"ended"===l||"muted"===l||"unmuted"===l||"amp:video:visibility"===l||"reloaded"===l||"ad_start"===l||"ad_end"===l||"amp:video:tick"===l){switch(l){case"load":a.ja(a.B);break;case"ad_start":case"play":case"playing":a.ia.updatePlaying(!0);break;case"pause":case"ended":a.ia.updatePlaying(!1)}Ea(a.element,l)}else"imaPlayerData"==l?(a.V=m.data,Ea(a.element,"loadedmetadata")):"fullscreenchange"==l&&(a.ra=!!m.isFullscreen)}}));b.appendChild(g);mb(b);N(b,"video-manager").register(a);Wa(a.element,0,a.T);return a.loadPromise(g).then((function(){return a.L}))}))};k.unlayoutCallback=function(){this.B&&(Ca(this.B),this.B=null);this.la&&this.la();Za(this.element,0,this.T);var a=new na;this.L=a.promise;this.ja=a.resolve;this.ia.updatePlaying(!1);return!0};k.T=function(a){this.B&&Z(this,"resize",{width:a.width,height:a.height})};function Z(a,b,c){a.L&&a.L.then((function(){a.B&&a.B.contentWindow&&a.B.contentWindow.postMessage(JSON.stringify(z({event:"command",func:b,args:c||""})),"*")}));if(a.j[b])a.j[b]()}k.createPlaceholderCallback=function(){var a=this.element.dataset.poster;if(!a)return null;var b=new Image;b.src=a;b.setAttribute("placeholder","");b.setAttribute("loading","lazy");Ga(b);return b};k.pauseCallback=function(){this.pause()};k.supportsPlatform=function(){return!0};k.isInteractive=function(){return!0};k.play=function(){Z(this,"play")};k.pause=function(){Z(this,"pause")};k.mute=function(){Z(this,"mute")};k.unmute=function(){Z(this,"unmute")};k.showControls=function(){Z(this,"showControls")};k.hideControls=function(){Z(this,"hideControls")};k.fullscreenEnter=function(){Z(this,"requestFullscreen")};k.fullscreenExit=function(){Z(this,"exitFullscreen")};k.isFullscreen=function(){return this.ra};k.getMetadata=function(){};k.preimplementsMediaSessionAPI=function(){return!1};k.preimplementsAutoFullscreen=function(){return!1};k.getCurrentTime=function(){return this.V.currentTime};k.getDuration=function(){return this.V.duration};k.getPlayedRanges=function(){return this.V.playedRanges};k.seekTo=function(){this.user().error("amp-ima-video","`seekTo` not supported.")};AMP.registerElement("amp-ima-video",X)}});//# sourceMappingURL=amp-ima-video-0.1.js.map