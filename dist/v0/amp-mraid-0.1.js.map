{"version":3,"mappings":"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","names":["env","self","AMP_CONFIG","cdnProxyRegex","RegExp","getMetaUrl","name","document","head","location","test","origin","metaEl","querySelector","getAttribute","urls","thirdParty","thirdPartyFrameHost","thirdPartyFrameRegex","cdn","localhostRegex","errorReporting","betaErrorReporting","localDev","trustedViewerHosts","geoApi","QUERY_STRING_REGEX","tryDecodeUriComponent","component","fallback","_fallback","decodeURIComponent","e","getHashParams","opt_win","a","hash","Object","create","queryString","match","exec","value","replace","params","rtvVersion","getMode","win","__AMP_MODE","devParam","b","devModes","includes","AMP_DEV_MODE","v","development","esm","__AMP_LOG","user","dev","userForEmbed","logs","Error","constructor","Deferred","this","promise","Promise","res","rej","resolve","reject","registerServiceBuilderForDoc","nodeOrDoc","id","ampdoc","getAmpdoc","holder","getAmpdocServiceHolder","services","getServices","s","obj","context","ctor","sharedInstance","getServiceInternal","rejectServicePromiseForDoc","error","emptyServiceHolderWithPromise","nodeType","ownerDocument","defaultView","__AMP_TOP","getAmpDoc","isSingleDoc","__AMP_SERVICES","deferred","catch","installVisibilityServiceForDoc","E","elementOrAmpDoc","impl","VISIBILITY","rejectVisibilityServiceForDoc","F","installFullscreenServiceForDoc","G","FULLSCREEN","rejectFullscreenServiceForDoc","H","installExitServiceForDoc","I","EXIT","rejectExitServiceForDoc","J","MraidService","mraid","mraid_","expanded_","K","callback","addEventListener","exposedPercentage","visibleRectangle","x","g","y","h","width","f","height","visibleRect","left","top","bottom","right","visibleRatio","expand","prototype","close","url","open","mraidReady_","mraidService","HostServices$$module$src$inabox$host_services.installVisibilityServiceForDoc","ampdoc_","HostServices$$module$src$inabox$host_services.rejectVisibilityServiceForDoc","HostServices$$module$src$inabox$host_services.installFullscreenServiceForDoc","HostServices$$module$src$inabox$host_services.rejectFullscreenServiceForDoc","HostServices$$module$src$inabox$host_services.installExitServiceForDoc","HostServices$$module$src$inabox$host_services.rejectExitServiceForDoc","registeredWithHostServices_","mraidLoadSuccess_","window","getState","handleMismatch_","fallback_","AMP","registerServiceForDoc","TAG","ampMraidScripts","getHeadNode","querySelectorAll","length","NO_FALLBACK","runtime","fine","mraidJs","createElement","setAttribute","getElementsByTagName","item","appendChild"],"sources":["src/config.js","src/core/types/string/url.js","src/core/types/object/index.js","src/mode.js","src/core/mode/local-dev.js","src/core/mode/esm.js","src/core/mode/test.js","src/utils/log.js","src/core/data-structures/promise.js","src/service-helpers.js","src/core/window/index.js","src/inabox/host-services.js","extensions/amp-mraid/0.1/amp-mraid.js","extensions/amp-mraid/0.1/mraid-service.js","src/core/dom/layout/rect.js"],"sourceRoot":"https://raw.githubusercontent.com/ampproject/amphtml/2110121450047/"}
