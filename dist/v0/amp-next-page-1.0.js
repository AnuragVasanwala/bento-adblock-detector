(self.AMP=self.AMP||[]).push({m:0,v:"2110121450047",n:"amp-next-page",ev:"1.0",l:true,f:function(AMP,_){"use strict";var m;function aa(a){var b=0;return function(){return b<a.length?{done:!1,value:a[b++]}:{done:!0}}}var ba="function"==typeof Object.create?Object.create:function(a){function b(){}b.prototype=a;return new b};function ca(a){for(var b=["object"==typeof globalThis&&globalThis,a,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global],c=0;c<b.length;++c){var d=b[c];if(d&&d.Math==Math)return d}return function(){throw Error("Cannot find global object")}()}var p=ca(this);"function"===typeof Symbol&&Symbol("x");var q;if("function"==typeof Object.setPrototypeOf)q=Object.setPrototypeOf;else{var t;a:{var da={a:!0},ea={};try{ea.__proto__=da;t=ea.a;break a}catch(a){}t=!1}q=t?function(a,b){a.__proto__=b;if(a.__proto__!==b)throw new TypeError(a+" is not extensible");return a}:null}var fa=q;function ha(a,b){a.prototype=ba(b.prototype);a.prototype.constructor=a;if(fa)fa(a,b);else for(var c in b)if("prototype"!=c)if(Object.defineProperties){var d=Object.getOwnPropertyDescriptor(b,c);d&&Object.defineProperty(a,c,d)}else a[c]=b[c];a.$a=b.prototype}function u(a){return a?Array.prototype.slice.call(a):[]}var ia=Array.isArray;function ja(a,b){for(var c=0;c<a.length;c++)if(b(a[c],c,a))return c;return-1}var ka=Object.prototype,la=ka.hasOwnProperty,ma=ka.toString;function na(a,b){try{return JSON.parse(a)}catch(c){return null==b||b(c),null}}function oa(a){return(a.ownerDocument||a).defaultView}
/* https://mths.be/cssescape v1.5.1 by @mathias | MIT license */
var w=/(\0)|^(-)$|([\x01-\x1f\x7f]|^-?[0-9])|([\x80-\uffff0-9a-zA-Z_-]+)|[^]/g;function x(a,b,c,d,e){return e?e:b?"ï¿½":d?a.slice(0,-1)+"\\"+a.slice(-1).charCodeAt(0).toString(16)+" ":"\\"+a}var y;function pa(a){try{var b=a.ownerDocument,c=b.createElement("div"),d=b.createElement("div");c.appendChild(d);return c.querySelector(":scope div")===d}catch(e){return!1}}function qa(a,b){a.classList.add("i-amphtml-scoped");var c=b.replace(/^|,/g,"$&.i-amphtml-scoped "),d=a.querySelectorAll(c);a.classList.remove("i-amphtml-scoped");return d}function z(a,b){if(void 0!==y?y:y=pa(a))return a.querySelector(b.replace(/^|,/g,"$&:scope "));var c=qa(a,b);return void 0===c[0]?null:c[0]}function ra(a,b){/^[\w-]+$/.test(b);return z(a,"> ["+b+"]")}function sa(a,b){/^[\w-]+$/.test(b);b="> "+b;return(void 0!==y?y:y=pa(a))?a.querySelectorAll(b.replace(/^|,/g,"$&:scope ")):qa(a,b)}function A(a){var b;null==(b=a.parentElement)||b.removeChild(a)}function ta(a){for(;a.firstChild;)a.removeChild(a.firstChild)}function ua(a,b){a.insertBefore(b,a.firstChild)}function va(a,b){for(var c=a.length,d=0;d<c;d++)b(a[d],d)}function wa(a){var b;return"SCRIPT"==a.tagName&&"APPLICATION/JSON"==(null==(b=a.getAttribute("type"))?void 0:b.toUpperCase())}var B=self.AMP_CONFIG||{},xa=("string"==typeof B.cdnProxyRegex?new RegExp(B.cdnProxyRegex):B.cdnProxyRegex)||/^https:\/\/([a-zA-Z0-9_-]+\.)?cdn\.ampproject\.org$/;function ya(a){if(!self.document||!self.document.head||self.location&&xa.test(self.location.origin))return null;var b=self.document.head.querySelector('meta[name="'+a+'"]');return b&&b.getAttribute("content")||null}var za={thirdParty:B.thirdPartyUrl||"https://3p.ampproject.net",thirdPartyFrameHost:B.thirdPartyFrameHost||"ampproject.net",thirdPartyFrameRegex:("string"==typeof B.thirdPartyFrameRegex?new RegExp(B.thirdPartyFrameRegex):B.thirdPartyFrameRegex)||/^d-\d+\.ampproject\.net$/,cdn:B.cdnUrl||ya("runtime-host")||"https://cdn.ampproject.org",cdnProxyRegex:xa,localhostRegex:/^https?:\/\/localhost(:\d+)?$/,errorReporting:B.errorReportingUrl||"https://us-central1-amp-error-reporting.cloudfunctions.net/r",betaErrorReporting:B.betaErrorReportingUrl||"https://us-central1-amp-error-reporting.cloudfunctions.net/r-beta",localDev:B.localDev||!1,trustedViewerHosts:[/(^|\.)google\.(com?|[a-z]{2}|com?\.[a-z]{2}|cat)$/,/(^|\.)gmail\.(com|dev)$/],geoApi:B.geoApiUrl||ya("amp-geo-api")};var Aa=/(?:^[#?]?|&)([^=&]+)(?:=([^&]*))?/g;function Ba(a,b){var c=b=void 0===b?"":b;try{return decodeURIComponent(a)}catch(d){return c}}function Ca(a){a=(a||self).location;a=a.originalHash||a.hash;var b=Object.create(null);if(a)for(var c;c=Aa.exec(a);){var d=Ba(c[1],c[1]);c=c[2]?Ba(c[2].replace(/\+/g," "),c[2]):"";b[d]=c}return b}var Da="";function Ea(){var a=self;if(a.__AMP_MODE)a=a.__AMP_MODE;else{var b=Ca(a)||Ca(a);b=["1","actions","amp","amp4ads","amp4email"].includes(b.development)||!!a.AMP_DEV_MODE;if(!Da){var c;Da=(null==(c=a.AMP_CONFIG)?void 0:c.v)||"012110121450047"}a=a.__AMP_MODE={localDev:!1,development:b,esm:!1,test:!1,rtvVersion:Da}}return a}function Fa(a,b){function c(g){f=null;e=a.setTimeout(d,200);b.apply(null,g)}function d(){e=0;f&&c(f)}var e=0,f=null;return function(g){for(var k=[],h=0;h<arguments.length;++h)k[h-0]=arguments[h];e?f=k:c(k)}}function Ga(a,b){function c(){d=0;var g=500-(a.Date.now()-e);if(0<g)d=a.setTimeout(c,g);else{var k=f;f=null;b.apply(null,k)}}var d=0,e=0,f=null;return function(g){for(var k=[],h=0;h<arguments.length;++h)k[h-0]=arguments[h];e=a.Date.now();f=k;d||(d=a.setTimeout(c,500))}}self.__AMP_LOG=self.__AMP_LOG||{user:null,dev:null,userForEmbed:null};var C=self.__AMP_LOG;function Ha(){throw Error("failed to call initLogConstructor")}function D(){C.user||(C.user=Ha());return C.user}function E(){return C.dev||(C.dev=Ha())}function F(a,b,c,d,e){D().assert(a,b,c,d,e,void 0,void 0,void 0,void 0,void 0,void 0)}var Ia;function G(){return Ia?Ia:Ia=Promise.resolve(void 0)}function Ja(){var a=this;this.promise=new Promise((function(b,c){a.resolve=b;a.reject=c}))}function H(a,b){a=a.__AMP_TOP||(a.__AMP_TOP=a);return I(a,b)}function J(a,b){var c=K(a);c=L(c);return I(c,b)}function Ka(a,b){a=K(a);a=L(a);return La(a,b)?I(a,b):null}function Ma(a,b){return Na(L(a),b)}function K(a){if(a.nodeType){var b=oa(a);return H(b,"ampdoc").getAmpDoc(a)}return a}function L(a){a=K(a);return a.isSingleDoc()?a.win:a}function I(a,b){La(a,b);a=M(a)[b];a.obj||(a.obj=new a.ctor(a.context),a.context=null,a.resolve&&a.resolve(a.obj));return a.obj}function Na(a,b){var c=M(a)[b];if(c){if(c.promise)return c.promise;I(a,b);return c.promise=Promise.resolve(c.obj)}return null}function M(a){var b=a.__AMP_SERVICES;b||(b=a.__AMP_SERVICES={});return b}function Oa(a){a=M(a);var c,b={};for(c in a){b.K=c;if(Object.prototype.hasOwnProperty.call(a,b.K)){var d=a[b.K];d.sharedInstance||(d.obj?Pa(b.K,d.obj):d.promise&&d.promise.then(function(e){return function(f){return Pa(e.K,f)}}(b)))}b={K:b.K}}}function Pa(a,b){if("function"==typeof b.dispose)try{b.dispose()}catch(c){E().error("SERVICE","failed to dispose service",a,c)}}function La(a,b){a=a.__AMP_SERVICES&&a.__AMP_SERVICES[b];return!(!a||!a.ctor)}function Qa(){var a=new Ja,b=a.promise,c=a.reject;a=a.resolve;b.catch((function(){}));return{obj:null,promise:b,resolve:a,reject:c,context:null,ctor:null}}function Ra(a,b,c){var d=Ma(a,b);if(d)return d;var e=K(a);return e.whenExtensionsKnown().then((function(){var f=e.getExtensionVersion(c);return f?H(e.win,"extensions").waitForExtension(c,f):null})).then((function(f){if(f){var g=L(a);var k=Na(g,b);k?g=k:(g=M(g),g[b]=Qa(),g=g[b].promise)}else g=null;return g}))}function Sa(a){var b=Ka(a,"bind");return b?Promise.resolve(b):Ra(a,"bind","amp-bind")}function N(a){return J(a,"viewport")}var O;function Ta(a){a=a.ownerDocument||a;O&&O.ownerDocument===a||(O=a.createElement("div"));return Ua}function Ua(a){var b=O;b.innerHTML=a[0];a=b.firstElementChild;b.removeChild(a);return a}function Va(a){a=a.querySelectorAll("[ref]");for(var b=Object.create(null),c=0;c<a.length;c++){var d=a[c],e=d.getAttribute("ref");d.removeAttribute("ref");b[e]=d}return b}var P,Wa="Webkit webkit Moz moz ms O o".split(" ");function Q(a,b,c){var d=a.style;if(!b.startsWith("--")){P||(P=Object.create(null));var e=P[b];if(!e){e=b;if(void 0===d[b]){var f=b.charAt(0).toUpperCase()+b.slice(1);b:{for(var g=0;g<Wa.length;g++){var k=Wa[g]+f;if(void 0!==d[k]){f=k;break b}}f=""}void 0!==d[f]&&(e=f)}P[b]=e}b=e}b&&(b.startsWith("--")?a.style.setProperty(b,c):a.style[b]=c)}function Xa(a,b){void 0===b&&(b=a.hasAttribute("hidden"));b?a.removeAttribute("hidden"):a.setAttribute("hidden","")}function Ya(a,b,c){var d=!1;c=void 0===c?{}:c;d=void 0===d?!0:d;var e=c,f=d;Ra(a,"amp-analytics-instrumentation","amp-analytics").then((function(g){g&&g.triggerEventForTarget(a,b,e,f)}))}function Za(a,b){return{left:0,top:0,width:a,height:b,bottom:0+b,right:0+a,x:0,y:0}}function $a(a,b){return a&&b?a.left==b.left&&a.top==b.top&&a.width==b.width&&a.height==b.height:!1}function ab(a,b,c,d){this.element=b;this.xa=d;this.fidelity=c;this.turn=0==c?Math.floor(4*Math.random()):0;this.ba=null;this.o=N(a)}ab.prototype.update=function(a){var b=this;if(!a){if(0!=this.turn){this.turn--;return}0==this.fidelity&&(this.turn=4)}var c=this.o.getSize(),d=Za(c.width,c.height);this.o.getClientRectAsync(this.element).then((function(e){var f={positionRect:e,viewportRect:d,relativePos:null},g=b.ba;if(!(g&&$a(g.positionRect,f.positionRect)&&$a(g.viewportRect,f.viewportRect))){g=f.positionRect;var k=f.viewportRect;f.relativePos=g.top<k.top?"top":g.bottom>k.bottom?"bottom":"inside";k=f.viewportRect;g.top<=k.bottom&&k.top<=g.bottom&&g.left<=k.right&&k.left<=g.right?(b.ba=f,b.xa(f)):b.ba&&(b.ba=null,f.positionRect=null,b.xa(f))}}))};function R(a){var b=this;this.B=a;this.H=a.win;this.F=[];this.Z=H(this.H,"vsync");this.o=N(a);this.ga=[];this.ia=this.oa=this.ma=!1;this.Ra=Ga(this.H,(function(){b.ma=!1}))}R.prototype.observe=function(a,b,c){var d=this,e=new ab(this.B,a,b,c);this.F.push(e);this.ia||bb(this);e.update();return function(){for(var f=0;f<d.F.length;f++)if(d.F[f]==e){d.F.splice(f,1);0==d.F.length&&cb(d);break}}};R.prototype.unobserve=function(a){for(var b=0;b<this.F.length;b++)if(this.F[b].element==a){this.F.splice(b,1);0==this.F.length&&cb(this);return}E().error("POSITION_OBSERVER","cannot unobserve unobserved element")};function bb(a){a.ia=!0;a.ga.push(a.o.onScroll((function(){a.Ra();a.ma=!0;a.oa||db(a)})));a.ga.push(a.o.onResize((function(){a.updateAllEntries(!0)})))}function cb(a){for(a.ia=!1;a.ga.length;)a.ga.pop()()}R.prototype.updateAllEntries=function(a){for(var b=0;b<this.F.length;b++)this.F[b].update(a)};function db(a){a.updateAllEntries();a.oa=!0;a.ma?a.Z.measure((function(){db(a)})):a.oa=!1}function S(a,b){this.aa=a;this.ta=this.Ka=null;this.callback=b}S.prototype.observe=function(a,b){var c=this,d=a.ownerDocument.createElement("div");d.classList.add("i-amphtml-next-page-document-top-sentinel");var e=a.ownerDocument.createElement("div");e.classList.add("i-amphtml-next-page-document-bottom-sentinel");b.insertBefore(d,a);b.insertBefore(e,a.nextSibling);this.aa.getPositionObserver().observe(d,0,(function(f){c.Ka=f.relativePos;c.aa.updateRelativePos(c)}));this.aa.getPositionObserver().observe(e,0,(function(f){c.ta=f.relativePos;c.aa.updateRelativePos(c)}))};S.prototype.usesSentinel=function(){return!0};p.Object.defineProperties(S.prototype,{top:{configurable:!0,enumerable:!0,get:function(){return this.Ka}},bottom:{configurable:!0,enumerable:!0,get:function(){return this.ta}}});function T(a,b,c){S.call(this,a,b);this.Ya=c}ha(T,S);T.prototype.usesSentinel=function(){return!1};p.Object.defineProperties(T.prototype,{nextPageEl:{configurable:!0,enumerable:!0,get:function(){return this.Ya}}});function eb(a){this.B=a;this.ka=[];this.na=0;this.ea=-1;this.Ba=null;this.o=N(a);this.Oa=0;this.pa=!1;this.J=J(a,"mutator");var b=Fa(a.win,this.La.bind(this));this.o.onScroll(b.bind(this));this.o.onResize(b.bind(this));this.La()}m=eb.prototype;m.La=function(){var a=this;this.pa||(this.pa=!0,this.J.measureElement((function(){a.Oa=a.o.getHeight();var b=a.o.getScrollTop(),c=b-a.na;if(!(20>Math.abs(c))){var d=0<c?-1:1;a.ka.forEach((function(e){e.usesSentinel()&&a.Ba===d||a.updateRelativePos(e)}));a.na=b;a.Ba=a.ea;a.ea=d}})).then((function(){a.pa=!1})))};m.isScrollingUp=function(){return 1===this.ea};m.isScrollingDown=function(){return-1===this.ea};m.observe=function(a,b,c){c=new S(this,c);this.ka.push(c);c.observe(a,b)};m.observeHost=function(a,b){a=new T(this,b,a);this.ka.push(a)};m.getPositionObserver=function(){var a=K(this.B),b=L(a),c=M(b),d=c["position-observer"];d||(d=c["position-observer"]={obj:null,promise:null,resolve:null,reject:null,context:null,ctor:null,sharedInstance:!1});d.ctor||(d.ctor=R,d.context=a,d.sharedInstance=!1,d.resolve&&I(b,"position-observer"));return J(this.B.getHeadNode(),"position-observer")};m.updateRelativePos=function(a){var b=a.usesSentinel()?this.getRelativePosFromSentinel(a):this.getRelativePosFromScroll(a);b&&a.callback(b)};m.getRelativePosFromScroll=function(a){var b=this.na,c=this.Oa;a=a.nextPageEl.getLayoutBox().top;return b<a-c?5:b<a&&a<=c&&0>=b?1:b<a?this.isScrollingDown()?3:4:2};m.getRelativePosFromSentinel=function(a){var b=a.bottom;a=a.top;if(!a&&!b)return null;if("inside"===a&&"inside"===b)return 1;if(!(a&&"top"!==a||b&&"bottom"!==b))return 5;if((!a||"top"===a)&&"top"===b||"bottom"===a&&(!b||"bottom"===b))return 2;var c=("top"===a||"inside"===a)&&(!b||"bottom"===b),d=this.isScrollingUp();return!!c===!!d?3:4};p.Object.defineProperties(eb.prototype,{mutator:{configurable:!0,enumerable:!0,get:function(){return this.J}}});function U(a,b){this.R=a;this.Za=b.title;this.Wa=this.Ma=b.url;this.Va=b.image;this.va=this.ua=this.D=null;this.A=1;this.Y="prerender";this.Ia=2}m=U.prototype;m.is=function(a){return this.A===a};m.isLoaded=function(){return 3===this.A||5===this.A||6===this.A};m.isVisible=function(){return this.isLoaded()&&"visible"===this.Y};m.setVisibility=function(a){this.isLoaded()&&a!=this.Y&&(this.is(6)&&"visible"===a&&this.resume(),this.Y=a,this.D&&(this.D.setVisibilityState(a),this.D.ampdoc.getBody().classList.toggle("amp-next-page-visible",this.isVisible()),this.D.ampdoc.getBody().classList.toggle("amp-next-page-hidden",!this.isVisible())))};m.pause=function(){var a=this;return this.D?this.D.close().then((function(){return a.R.closeDocument(a).then((function(){a.D=null;a.Y="hidden";a.A=6}))})):G()};m.resume=function(){return fb(this)};m.fetch=function(){var a=this;if(5===this.A||2===this.A||3===this.A||4===this.A)return G();this.A=2;return this.R.fetchPageDocument(this).then((function(b){a.A=3;a.va=b;a.ua=a.R.createDocumentContainerForPage(a);return fb(a)})).catch((function(){a.A=4}))};function fb(a){return a.R.attachDocumentToPage(a,a.va,a.is(6)).then((function(b){b?(a.A=5,a.D=b,a.is(6)||a.R.setLastFetchedPage(a)):a.A=4}))}p.Object.defineProperties(U.prototype,{url:{configurable:!0,enumerable:!0,get:function(){return this.Ma},set:function(a){this.Ma=a}},initialUrl:{configurable:!0,enumerable:!0,get:function(){return this.Wa}},image:{configurable:!0,enumerable:!0,get:function(){return this.Va}},title:{configurable:!0,enumerable:!0,get:function(){return this.Za}},relativePos:{configurable:!0,enumerable:!0,get:function(){return this.Ia},set:function(a){this.Ia=a}},document:{configurable:!0,enumerable:!0,get:function(){if(this.D)return this.D.ampdoc.getRootNode()}},container:{configurable:!0,enumerable:!0,get:function(){return this.ua}},shadowDoc:{configurable:!0,enumerable:!0,get:function(){return this.D}}});function gb(a,b,c,d,e){U.call(this,a,b);this.A=c;this.Y=d;this.Ta=e}ha(gb,U);p.Object.defineProperties(gb.prototype,{document:{configurable:!0,enumerable:!0,get:function(){return this.Ta}}});function V(){this.Sa=100;this.ha=this.ra=0;this.$=Object.create(null)}V.prototype.has=function(a){return!!this.$[a]};V.prototype.get=function(a){var b=this.$[a];if(b)return b.access=++this.ha,b.payload};V.prototype.put=function(a,b){this.has(a)||this.ra++;this.$[a]={payload:b,access:this.ha};if(!(this.ra<=this.Sa)){a=this.$;var d,c=this.ha+1;for(d in a){var e=a[d].access;if(e<c){c=e;var f=d}}void 0!==f&&(delete a[f],this.ra--)}};var ib,jb,hb=new Set(["c","v","a","ad"]);function W(a){return"string"==typeof a?X(a):a}function X(a){ib||(ib=self.document.createElement("a"),jb=self.__AMP_URL_CACHE||(self.__AMP_URL_CACHE=new V));var b=ib,c=jb;if(c&&c.has(a))a=c.get(a);else{b.href=a;b.protocol||(b.href=b.href);var d={href:b.href,protocol:b.protocol,host:b.host,hostname:b.hostname,port:"0"==b.port?"":b.port,pathname:b.pathname,search:b.search,hash:b.hash,origin:null};"/"!==d.pathname[0]&&(d.pathname="/"+d.pathname);if("http:"==d.protocol&&80==d.port||"https:"==d.protocol&&443==d.port)d.port="",d.host=d.hostname;d.origin=b.origin&&"null"!=b.origin?b.origin:"data:"!=d.protocol&&d.host?d.protocol+"//"+d.host:d.href;c&&c.put(a,d);a=d}return a}function kb(a,b){var c=void 0===c?"source":c;F(null!=a,"%s %s must be available",b,c);var d=W(a);var e;(e="https:"==d.protocol||"localhost"==d.hostname||"127.0.0.1"==d.hostname)||(d=d.hostname,e=d.length-10,e=0<=e&&d.indexOf(".localhost",e)==e);F(e||/^\/\//.test(a),'%s %s must start with "https://" or "//" or be relative and served from either https or from localhost. Invalid value: %s',b,c,a)}function nb(a){a=W(a);if(!za.cdnProxyRegex.test(W(a).origin))return a.href;var b=a.pathname.split("/");F(hb.has(b[1]),"Unknown path prefix in url %s",a.href);var c=b[2],d="s"==c?"https://"+decodeURIComponent(b[3]):"http://"+decodeURIComponent(c);F(0<d.indexOf("."),"Expected a . in origin %s",d);b.splice(1,"s"==c?3:2);b=d+b.join("/");d=(d=a.search)&&"?"!=d?(d=d.replace(/[?&](amp_(js[^&=]*|gsa|r|kit)|usqp)\b[^&]*/g,"").replace(/^[?&]/,""))?"?"+d:"":"";return b+d+(a.hash||"")}function ob(a,b){a=X(a);var c=X(b).origin,d=X(nb(b)).origin;F(a.origin===c||a.origin===d,"Invalid page URL supplied to amp-next-page, pages must be from the same origin as the current document");return a}function pb(a,b){D().assertString(a.url,"page url must be a string");var c=nb(b),d=X(b).origin,e=a.url;c=W(c);if("function"==typeof URL)e=new URL(e,c.href).toString();else{c=W(c);e=e.replace(/\\/g,"/");var f=X(e);e=e.toLowerCase().startsWith(f.protocol)?f.href:e.startsWith("//")?c.protocol+e:e.startsWith("/")?c.origin+e:c.origin+c.pathname.replace(/\/[^/]*$/,"/")+e}a.url=e;e=ob(a.url,b);D().assertString(a.image,"page image must be a string");D().assertString(a.title,"page title must be a string");b=X(nb(b)).origin;b!==d&&e.origin===b&&(a.url=d+"/c/"+("https:"===e.protocol?"s/":"")+encodeURIComponent(e.host)+e.pathname+(e.search||"")+(e.hash||""))}function qb(a,b,c){c=void 0===c?{}:c;var d=void 0===c.expr?".":c.expr,e=void 0===c.urlReplacement?0:c.urlReplacement,f=void 0===c.refresh?!1:c.refresh,g=void 0===c.xssiPrefix?void 0:c.xssiPrefix;kb(b.getAttribute("src"),b);var k=H(a.win,"batched-xhr");return rb(b,e,f).then((function(h){return k.fetchJson(h.xhrUrl,h.fetchOpt)})).then((function(h){return H(a.win,"xhr").xssiJson(h,g)})).then((function(h){if(null==h)throw Error("Response is undefined.");var l=d||".";if("."!=l){l=l.split(".");var n="undefined"!=typeof Symbol&&Symbol.iterator&&l[Symbol.iterator];l=n?n.call(l):{next:aa(l)};for(n=l.next();!n.done;n=l.next())if((n=n.value)&&h&&void 0!==h[n]&&"object"==typeof h&&la.call(h,n))h=h[n];else{h=void 0;break}}return h})).catch((function(h){throw D().createError("failed fetching JSON data",h)}))}function rb(a,b,c){var d=a.getAttribute("src"),e=Ka(a,"url-replace");return(1<=b?e.expandUrlAsync(d):Promise.resolve(d)).then((function(f){if(1==b){var g=e.collectDisallowedVarsSync(a);if(0<g.length)throw D().createError('URL variable substitutions in CORS fetches from dynamic URLs (e.g. via amp-bind) require opt-in. Please add data-amp-replace="'+g.join(" ")+'" to the <'+a.tagName+"> element. See https://bit.ly/amp-var-subs.")}var k={};a.hasAttribute("credentials")&&(k.credentials=a.getAttribute("credentials"));c&&(k.cache="reload");return{xhrUrl:f,fetchOpt:k}}))}function sb(a){var b=a.querySelector('script[type="application/ld+json"]');if(b){var c=na(b.textContent);if(c&&c.image){if("string"===typeof c.image)return c.image;if(c.image["@list"]&&"string"===typeof c.image["@list"][0])return c.image["@list"][0];if("string"===typeof c.image.url)return c.image.url;if("string"===typeof c.image[0])return c.image[0]}}}var tb,ub;function vb(){void 0===ub&&(ub="none"!=wb()&&(xb(Element.prototype.attachShadow)||xb(Element.prototype.createShadowRoot)));return ub}function xb(a){return!!a&&-1!=a.toString().indexOf("[native code]")}function wb(){if(void 0===tb){var a=Element;tb=a.prototype.attachShadow?"v1":a.prototype.createShadowRoot?"v0":"none"}return tb}
/* Copyright (c) 2014 The Polymer Project Authors. All rights reserved. Use of this source code is governed by a BSD-style license that can be found in the LICENSE file or at https://developers.google.com/open-source/licenses/bsd */
var Bb={strictStyling:!1,scopeRules:function(a,b,c){var d="";a&&Array.prototype.forEach.call(a,(function(e){if(e.selectorText&&e.style&&void 0!==e.style.cssText)d+=this.scopeSelector(e.selectorText,b,this.strictStyling,c)+" {\n\t",d+=this.propertiesFromRule(e)+"\n}\n\n";else if(e.type===CSSRule.MEDIA_RULE)d+="@media "+e.media.mediaText+" {\n",d+=this.scopeRules(e.cssRules,b),d+="\n}\n\n";else try{e.cssText&&(d+=e.cssText+"\n\n")}catch(f){e.type===CSSRule.KEYFRAMES_RULE&&e.cssRules&&(d+=this.ieSafeCssTextFromKeyFrameRule(e))}}),this);return d},ieSafeCssTextFromKeyFrameRule:function(a){var b="@keyframes "+a.name+" {";Array.prototype.forEach.call(a.cssRules,(function(c){b+=" "+c.keyText+" {"+c.style.cssText+"}"}));return b+=" }"},scopeSelector:function(a,b,c,d){var e=[];a.split(",").forEach((function(f){f=f.trim();d&&(f=d(f));this.selectorNeedsScoping(f,b)&&(f=c&&!f.match(yb)?this.applyStrictSelectorScope(f,b):this.applySelectorScope(f,b));e.push(f)}),this);return e.join(", ")},selectorNeedsScoping:function(a,b){if(Array.isArray(b))return!0;var c=this.makeScopeMatcher(b);return!a.match(c)},makeScopeMatcher:function(a){a=a.replace(/\[/g,"\\[").replace(/\]/g,"\\]");return new RegExp("^("+a+")"+zb,"m")},applySelectorScope:function(a,b){return Array.isArray(b)?this.applySelectorScopeList(a,b):this.applySimpleSelectorScope(a,b)},applySelectorScopeList:function(a,b){for(var e,c=[],d=0;e=b[d];d++)c.push(this.applySimpleSelectorScope(a,e));return c.join(", ")},applySimpleSelectorScope:function(a,b){return a.match(Ab)?(a=a.replace(yb,b),a.replace(Ab,b+" ")):b+" "+a},applyStrictSelectorScope:function(a,b){b=b.replace(/\[is=([^\]]*)\]/g,"$1");var c=[" ",">","+","~"],d=a,e="["+b+"]";c.forEach((function(f){d=d.split(f).map((function(g){var k=g.trim().replace(Ab,"");k&&0>c.indexOf(k)&&0>k.indexOf(e)&&(g=k.replace(/([^:]*)(:*)(.*)/,"$1"+e+"$2$3"));return g})).join(f)}));return d},propertiesFromRule:function(a){var b=a.style.cssText;a.style.content&&!a.style.content.match(/['"]+|attr/)&&(b=b.replace(/content:[^;]*;/g,"content: '"+a.style.content+"';"));a=a.style;for(var c in a)"initial"===a[c]&&(b+=c+": initial; ");return b}},zb="([>\\s~+[.,{:][\\s\\S]*)?$",yb="-shadowcsshost-no-combinator",Ab=/-shadowcsshost/gim;function Y(a,b,c,d){var e=a.getHeadNode();var f=(a=e.__AMP_CSS_TR)?a(b):b;a:{var g=c||!1,k=d||null;(b=e.__AMP_CSS_SM)||(b=e.__AMP_CSS_SM=Object.create(null));var h=!g&&k&&"amp-custom"!=k&&"amp-keyframes"!=k;if(a=g?"amp-runtime":h?"amp-extension="+k:null){var l=Cb(e,b,a);if(l){l.textContent!==f&&(l.textContent=f);break a}}l=(e.ownerDocument||e).createElement("style");l.textContent=f;f=null;g?l.setAttribute("amp-runtime",""):h?(l.setAttribute("amp-extension",k||""),f=Cb(e,b,"amp-runtime")):(k&&l.setAttribute(k,""),f=e.lastChild);g=f;(g=void 0===g?null:g)?e.insertBefore(l,g.nextSibling):ua(e,l);a&&(b[a]=l)}}function Cb(a,b,c){return b[c]?b[c]:(a=a.querySelector("style["+c+"]"))?b[c]=a:null}function Db(a,b){a.__AMP_CSS_TR=b}function Eb(a){this.M=a.document.implementation.createHTMLDocument("");this.M.open();this.Z=H(a,"vsync");this.Qa=this.Xa.bind(this);this.U=this.S=this.T=null;this.qa=!1;this.W=G();this.L=!1;this.fa=null}m=Eb.prototype;m.onBody=function(a){this.T=a};m.onBodyChunk=function(a){this.S=a};m.onEnd=function(a){this.U=a};m.write=function(a){if(this.L)throw Error("closed already");a&&this.M.write(a);Fb(this);return this.W};m.close=function(){this.M.close();this.L=!0;Fb(this);return this.W};m.abort=function(){throw Error("Not implemented")};m.releaseLock=function(){throw Error("Not implemented")};function Fb(a){a.qa||(a.qa=!0,a.Z.mutate(a.Qa))}m.Xa=function(){this.qa=!1;!this.fa&&this.M.body&&(this.fa=this.T(this.M));if(this.fa){var a=this.M.body,b=this.fa,c=0;for(Gb(a);a.firstChild;)c++,b.appendChild(a.firstChild);0<c&&this.S()}this.L&&this.U()};p.Object.defineProperties(Eb.prototype,{closed:{configurable:!0,enumerable:!0,get:function(){throw Error("Not implemented")}},desiredSize:{configurable:!0,enumerable:!0,get:function(){throw Error("Not implemented")}},ready:{configurable:!0,enumerable:!0,get:function(){throw Error("Not implemented")}}});function Hb(a){this.wa=[];this.Z=H(a,"vsync");this.U=this.S=this.T=null;this.W=G();this.L=!1}m=Hb.prototype;m.onBody=function(a){this.T=a};m.onBodyChunk=function(a){this.S=a};m.onEnd=function(a){this.U=a};m.write=function(a){if(this.L)throw Error("closed already");a&&this.wa.push(a);return this.W};m.close=function(){var a=this;this.L=!0;this.Z.mutate((function(){var b=a.wa.join(""),c=(new DOMParser).parseFromString(b,"text/html");if(c.body){b=c.body;c=a.T(c);var d=0;for(Gb(b);b.firstChild;)d++,c.appendChild(b.firstChild);0<d&&a.S()}a.U()}));return this.W};m.abort=function(){throw Error("Not implemented")};m.releaseLock=function(){throw Error("Not implemented")};p.Object.defineProperties(Hb.prototype,{closed:{configurable:!0,enumerable:!0,get:function(){throw Error("Not implemented")}},desiredSize:{configurable:!0,enumerable:!0,get:function(){throw Error("Not implemented")}},ready:{configurable:!0,enumerable:!0,get:function(){throw Error("Not implemented")}}});function Gb(a){var b=sa(a,"noscript");va(b,(function(c){A(c)}))}var Kb,Ib=/[^\.\-_0-9a-zA-Z]/,Jb=/[^\-_0-9a-zA-Z]/;function Lb(a){var b=oa(a),c=a.shadowRoot||a.__AMP_SHADOW_ROOT;if(c)return c.innerHTML="",c;var d=wb();if("v1"==d){var e=a.attachShadow({mode:"open"});e.styleSheets||Object.defineProperty(e,"styleSheets",{get:function(){var g=[];va(e.childNodes,(function(k){"STYLE"===k.tagName&&g.push(k.sheet)}));return g}})}else e="v0"==d?a.createShadowRoot():Mb(a);if(!vb()){var f="i-amphtml-sd-"+b.Math.floor(1e4*b.Math.random());e.id=f;e.host.classList.add(f);Db(e,(function(g){var k=e,h=k.id;k=k.ownerDocument;var l=null;try{l=Nb(k.implementation.createHTMLDocument(""),g)}catch(n){}if(!l)try{l=Nb(k,g)}catch(n){}return l?Bb.scopeRules.call(Bb,l,"."+h,Ob):g}))}return e}function Mb(a){var b=a.ownerDocument;a.classList.add("i-amphtml-shadow-host-polyfill");var c=b.createElement("style");c.textContent=".i-amphtml-shadow-host-polyfill>:not(i-amphtml-shadow-root){display:none!important}";a.appendChild(c);var d=b.createElement("i-amphtml-shadow-root");a.appendChild(d);a.__AMP_SHADOW_ROOT=d;Object.defineProperty(a,"shadowRoot",{enumerable:!0,configurable:!0,value:d});d.host=a;d.getElementById=function(e){var f=String(e).replace(w,x);return d.querySelector("#"+f)};Object.defineProperty(d,"styleSheets",{get:function(){return b.styleSheets?u(b.styleSheets).filter((function(e){return d.contains(e.ownerNode)})):[]}});return d}function Pb(a,b,c){var d=a.ownerDocument;if(vb())var e=d.importNode(b,c);else{e=d.createElement("amp-body");e.style.display="block";for(var f=0;f<b.attributes.length;f++)e.setAttribute(b.attributes[0].name,b.attributes[0].value);if(c)for(b=b.firstChild;b;b=b.nextSibling)e.appendChild(d.importNode(b,!0))}Q(e,"position","relative");var g=a.body;g&&a.removeChild(g);a.appendChild(e);Object.defineProperty(a,"body",{configurable:!0,value:e});return e}function Ob(a){return a.replace(/(html|body)/g,Qb)}function Qb(a,b,c,d){var e=d.charAt(c-1),f=d.charAt(c+a.length);return e&&!Ib.test(e)||f&&!Jb.test(f)?a:"amp-"+a}function Nb(a,b){var c=a.createElement("style");c.textContent=b;try{return(a.head||a.documentElement).appendChild(c),c.sheet?c.sheet.cssRules:null}finally{c.parentNode&&c.parentNode.removeChild(c)}}function Rb(a){void 0===Kb&&(Kb=!a.document.implementation||"function"!=typeof a.document.implementation.createHTMLDocument||H(a,"platform").isFirefox()?!1:!0);return Kb?new Eb(a):new Hb(a)}function Sb(a,b,c,d){this.win=a;this.Pa=b;this.Ua=c;this.sa=d;this.O=[]}function Tb(a,b,c,d,e){d=d||Object.create(null);Ub(a);Q(b,"visibility","hidden");var f=Lb(b);f.AMP&&(D().warn("multidoc-manager","Shadow doc wasn't previously closed"),Vb(a,f));var g={};f.AMP=g;g.url=c;var k=X(c).origin,h=a.Pa.installShadowDoc(c,f,{params:d});g.ampdoc=h;E().fine("multidoc-manager","Attach to shadow root:",f,h);Y(h,AMP.combinedCss,!0);AMP.installAmpdocServices(h);var l=J(h,"viewer");g.setVisibilityState=function(r){h.overrideVisibilityState(r)};g.postMessage=l.receiveMessage.bind(l);var n;g.onMessage=function(r){n=r};l.setMessageDeliverer((function(r,v,lb){if("broadcast"==r)return Wb(a,v,f),lb?G():void 0;var mb;return null==(mb=n)?void 0:mb(r,v,lb)}),k);g.close=function(){return Vb(a,f)};Ea().development&&(g.toggleRuntime=l.toggleRuntime.bind(l),g.resources=J(h,"resources"));g.getState=function(r){return Sa(f).then((function(v){return v?v.getState(r):Promise.reject("amp-bind is not available in this document")}))};g.setState=function(r){return Sa(f).then((function(v){return v?"string"===typeof r?v.setStateWithExpression(r,{}):"[object Object]"===ma.call(r)||ia(r)?v.setStateWithObject(r):Promise.reject("Invalid state"):Promise.reject("amp-bind is not available in this document")}))};e(g,f,h).then((function(){h.setReady();h.signals().signal("render-start");Q(b,"visibility","visible")}));a.O.includes(f)||a.O.push(f);E().fine("multidoc-manager","Shadow root initialization is done:",f,h);return g}Sb.prototype.attachShadowDoc=function(a,b,c,d){var e=this;D().assertString(c);E().fine("multidoc-manager","Attach shadow doc:",b);return Tb(this,a,c,d,(function(f,g,k){Xb(e,k,g,b);b.body&&(f=Pb(g,b.body,!0),f.classList.add("amp-shadow"),k.setBody(f));setTimeout((function(){k.signals().signal("render-start");Q(a,"visibility","visible")}),50);return G()}))};Sb.prototype.attachShadowDocAsStream=function(a,b,c){var d=this;D().assertString(b);E().fine("multidoc-manager","Attach shadow doc as stream");return Tb(this,a,b,c,(function(e,f,g){var k=!1,h=Rb(d.win);e.writer=h;h.onBody((function(l){Xb(d,g,f,l);l=Pb(f,l.body,!1);l.classList.add("amp-shadow");g.setBody(l);return l}));h.onBodyChunk((function(){k||(k=!0,setTimeout((function(){g.signals().signal("render-start");Q(a,"visibility","visible")}),50))}));return new Promise((function(l){h.onEnd((function(){l();e.writer=null}))}))}))};function Xb(a,b,c,d){if(d.head){c.AMP.head=d.head;for(var e={},f=sa(a.win.document.head,"link"),g=0;g<f.length;g++){var k=f[g].getAttribute("href");k&&(e[k]=!0)}for(d=d.head.firstElementChild;d;d=d.nextElementSibling){g=d.tagName;var h=d.getAttribute("name"),l=d.getAttribute("rel");switch(g){case"TITLE":c.AMP.title=d.textContent;E().fine("multidoc-manager","- set title: ",c.AMP.title);break;case"META":d.hasAttribute("charset")||"viewport"!=h&&(h?b.setMetaByName(h,d.getAttribute("content")||""):E().warn("multidoc-manager","meta ignored: ",d));break;case"LINK":g=d.getAttribute("href");"canonical"==l?(c.AMP.canonicalUrl=g,E().fine("multidoc-manager","- set canonical: ",c.AMP.canonicalUrl)):"stylesheet"==l?e[g]?(E().fine("multidoc-manager","- stylesheet already included: ",g),Y(b,'@import "'+g+'"',!1)):(e[g]=!0,h=a.win.document.createElement("link"),h.setAttribute("rel","stylesheet"),h.setAttribute("type","text/css"),h.setAttribute("href",g),a.win.document.head.appendChild(h),E().fine("multidoc-manager","- import font to parent: ",g,h)):E().fine("multidoc-manager","- ignore link rel=",l);break;case"STYLE":d.hasAttribute("amp-boilerplate")?E().fine("multidoc-manager","- ignore boilerplate style: ",d):d.hasAttribute("amp-custom")?(Y(b,d.textContent,!1,"amp-custom"),E().fine("multidoc-manager","- import style: ",d)):d.hasAttribute("amp-keyframes")&&(Y(b,d.textContent,!1,"amp-keyframes"),E().fine("multidoc-manager","- import style: ",d));break;case"SCRIPT":if(d.hasAttribute("src")){E().fine("multidoc-manager","- src script: ",d);g=d.getAttribute("src");if(g){var n=g.match(/^(.*)\/(.*)-([0-9.]+|latest)(\.max)?\.(?:js|mjs)$/i);h=n?n[2]:void 0;n=n?n[3]:void 0;h=h&&n?{extensionId:h,extensionVersion:n}:null}else h=null;var r=d.getAttribute("custom-element"),v=d.getAttribute("custom-template");n=r||v;h?n?a.Ua.installExtensionForDoc(b,n,h.extensionVersion):d.hasAttribute("data-amp-report-test")||D().error("multidoc-manager","- unknown script: ",d,g):E().fine("multidoc-manager","- ignore runtime script: ",g)}else-1==(d.getAttribute("type")||"application/javascript").indexOf("javascript")?(c.appendChild(a.win.document.importNode(d,!0)),E().fine("multidoc-manager","- non-src script: ",d)):d.hasAttribute("amp-onerror")||D().error("multidoc-manager","- unallowed inline javascript: ",d);break;case"NOSCRIPT":break;default:D().error("multidoc-manager","- UNKNOWN head element:",d)}}}b.setExtensionsKnown()}function Wb(a,b,c){Ub(a);a.O.forEach((function(d){if(d!=c){var e=J(d.AMP.ampdoc,"viewer");a.sa.delay((function(){e.receiveMessage("broadcast",b,!1)}),0)}}))}function Vb(a,b){Yb(a,b);var c=b.AMP;delete b.AMP;var d=c.ampdoc;d.overrideVisibilityState("inactive");Oa(d);return a.sa.timeoutPromise(15,new a.win.Promise((function(e){Ma(d,"resources").then((function(f){if(f)f.onNextPass(e);else e()}))})),"Timeout reached waiting for visibility state change callback").catch((function(e){D().info("multidoc-manager",e)}))}function Yb(a,b){b=a.O.indexOf(b);-1!=b&&a.O.splice(b,1)}function Zb(a,b){a.sa.delay((function(){Vb(a,b)}),0)}function Ub(a){a.O.forEach((function(b){var c;if(!(c=!b.host)){c=b.host;var d=c.isConnected;if(void 0!==d)c=d;else{do{if(Node.prototype.getRootNode)c=c.getRootNode()||c;else for(;c.parentNode&&(!c||"I-AMPHTML-SHADOW-ROOT"!=c.tagName&&(11!=c.nodeType||"[object ShadowRoot]"!==Object.prototype.toString.call(c)));c=c.parentNode);if(c.host)c=c.host;else break}while(1);c=c.nodeType===Node.DOCUMENT_NODE}c=!c}c&&(D().warn("multidoc-manager","Shadow doc wasn't previously closed"),Yb(a,b),Zb(a,b))}))}var $b=['<div class=amp-next-page-separator aria-label="Next article separator" tabindex=0></div>'],ac=['<div class=amp-next-page-links aria-label="Read more articles"></div>'],bc=["<a class=amp-next-page-link><img ref=image class=amp-next-page-image> <span ref=title class=amp-next-page-text></span></a>"];function cc(){return G()}function dc(a){var b=this;this.B=a;this.H=a.win;this.C=this.H.document;this.o=N(a);this.Na=J(a,"viewer");this.J=J(a,"mutator");this.P=J(a,"templates");this.V=this.Ja=null;this.N=cc;this.la=!1;this.ja=this.G=this.Aa=this.Ea=this.za=this.Da=this.X=this.j=this.ca=null;this.da={};this.ya=!1;this.Ca=1/0;this.Ha=this.I=null;this.Ga=new Promise((function(c){b.Ha=c}))}m=dc.prototype;m.isBuilt=function(){return!!this.h};m.build=function(a){function b(){c.N();c.Ha()}var c=this;if(this.isBuilt())return G();this.B.getBody().lastElementChild!==a&&D().warn("amp-next-page","should be the last element in the body of the document, a footer element can be added as a child of <amp-next-page> if it has the `footer` attribute");this.j=a;this.I=this.j.getAttribute("src");this.ya=this.j.hasAttribute("deep-parsing")?"false"!==this.j.getAttribute("deep-parsing"):!this.I;this.Ca=this.j.hasAttribute("max-pages")?parseInt(this.j.getAttribute("max-pages"),10):1/0;this.Ja=ec(this,a);this.V=fc(this,a);this.ja=this.G=this.createHostPage();this.toggleHiddenAndReplaceableElements(this.C);ua(this.j,this.V);this.za=J(this.B,"history");this.Ea=J(this.B,"navigation");this.Da=new Sb(this.H,H(this.H,"ampdoc"),H(this.H,"extensions"),I(this.H,"timer"));this.X=new eb(this.B);this.Ga.then((function(){c.X.observeHost(c.j,(function(d){c.G.relativePos=d;c.updateVisibility()}))}));this.h||(this.h=[this.G],this.setLastFetchedPage(this.G));gc(this).then((function(){return hc(c)})).then(b,b);this.j.classList.add("i-amphtml-next-page");return this.Ga};function gc(a){return new Promise((function(b){if(0!=a.o.getScrollTop())return b();var c=a.o.onScroll((function(){b();c()}))}))}m.maybeFetchNext=function(a){var b=this,c=void 0===a?!1:a,d=this.h.filter((function(h){return!h.is(1)})).length>this.Ca,e=this.h.some((function(h){return h.is(2)})),f=3<ic(this)&&!c;if(this.la||e||f||d)return G();var g=this.h.length,k=this.h[this.h.indexOf(this.Aa)+1];return k?k.fetch().then((function(){k.is(4)&&b.setLastFetchedPage(k)})).then((function(){return b.N()}),(function(h){return b.N().then((function(){throw h}))})):jc(this).then((function(h){return kc(b,h)})).then((function(){return b.h.length<=g?(b.la=!0,b.N()):b.maybeFetchNext(!0)}))};m.updateVisibility=function(){var a=this;this.h.forEach((function(d,e){2===d.relativePos?d.isVisible()&&d.setVisibility("hidden"):3!==d.relativePos&&(d.isVisible()||d.setVisibility("visible"),lc(a,e),mc(a,e))}));this.h.some((function(d){return d.isVisible()}))||this.G.setVisibility("visible");this.h.filter((function(d){return d.isVisible()})).forEach((function(d){return a.toggleHiddenAndReplaceableElements(d.document)}));var b=ja(this.h,(function(d){return d.isVisible()})),c=this.h[b]||null;c&&this.ja!==c&&this.setTitlePage(c);this.maybeFetchNext()};function lc(a,b){a.X.isScrollingDown()&&a.G.isVisible()&&a.G.setVisibility("hidden");var c=a.X.isScrollingDown()?a.h.slice(1,b).reverse():a.h.slice(b+1);Promise.all(c.filter((function(d){return 2===d.relativePos})).map((function(d,e){d.isVisible()&&d.setVisibility("hidden");if(5<=e)return d.pause()})))}function mc(a,b){var c=a.h.slice(1).slice(Math.max(0,b-5-1),Math.min(a.h.length,b+5+1)).filter((function(d){return d.is(6)}));Promise.all(c.map((function(d){return d.resume()})))}m.setLastFetchedPage=function(a){this.Aa=a};m.setTitlePage=function(a){var b=a=void 0===a?this.G:a;if(b){a=b.title;var c=b.url;this.C.title=a;this.za.replace({title:a,url:c});this.ja=b;Ya(this.j,"amp-next-page-scroll",{title:a,url:c})}else E().warn("amp-next-page","setTitlePage called before next-page-service is built")};m.createHostPage=function(){var a=this.C,b=a.title;a=a.location.href;var c;(c=sb(this.C))||(c=(c=this.C.querySelector('meta[property="og:image"]'))?c.getAttribute("content"):void 0);c||(c=this.C,c=(c=c.querySelector('link[rel="shortcut icon"]')||c.querySelector('link[rel="icon"]'))?c.getAttribute("href"):void 0);return new gb(this,{url:a,title:b||"",image:c||""},5,"visible",this.C)};m.createDocumentContainerForPage=function(a){var b=this,c=this.C.createElement("div");c.classList.add("i-amphtml-next-page-document-container");this.j.insertBefore(c,this.V);var d=this.C.createElement("div");d.classList.add("i-amphtml-next-page-shadow-root");c.appendChild(d);this.X.observe(d,c,(function(e){a.relativePos=e;b.updateVisibility()}));return c};m.attachDocumentToPage=function(a,b,c){var d=void 0===c?!1:c;if(1>ic(this)&&!d)return Promise.resolve(null);c=a.container;var e=z(c,"> ."+"i-amphtml-next-page-shadow-root".replace(w,x));if(!e){a.is(6);var f=z(c,"> ."+"i-amphtml-next-page-placeholder".replace(w,x));e=this.C.createElement("div");e.classList.add("i-amphtml-next-page-shadow-root");c.replaceChild(e,f)}this.sanitizeDoc(b);try{var g=this.Da.attachShadowDoc(e,b,a.url,{visibilityState:"prerender",cap:this.Na.hasCapability("cid")?"cid":null}),k=this.Na.maybeGetMessageDeliverer();if(k)g.onMessage((function(n,r,v){"documentHeight"!==n&&"scroll"!==n&&"viewport"!==n&&k(n,r,v)}));var h=g.ampdoc;Y(h,'.i-amphtml-next-page-document{overflow:hidden}.i-amphtml-next-page-document:not(.amp-next-page-visible) [i-amphtml-fixedid]{display:none}.i-amphtml-next-page-document.amp-next-page-visible{opacity:1;overflow:visible}.i-amphtml-next-page-document:after,.i-amphtml-next-page-document:before{content:" ";display:table}.i-amphtml-next-page-placeholder{background:#eee}.amp-next-page-separator{border-bottom:1px solid rgba(0,0,0,0.12)}.amp-next-page-links{border-top:1px solid rgba(0,0,0,0.1);margin-top:16px;display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column}.amp-next-page-link{border-bottom:1px solid rgba(0,0,0,0.1);display:block;overflow:auto;padding:10px 0;text-decoration:none}.amp-next-page-image{width:72px;height:72px;float:left;margin:0 10px;background-size:cover;background-position:50%}.amp-next-page-text{position:relative;margin:5px 30px 5px 0;color:#3c4043;font-size:17px}\n/*# sourceURL=/extensions/amp-next-page/1.0/amp-next-page.css*/',!1,"amp-next-page");h.getBody().classList.add("i-amphtml-next-page-document");var l=this.Ja.cloneNode(!0);ua(c,l);return nc(this,l,a).then((function(){return g}))}catch(n){return E().error("amp-next-page","failed to attach shadow document for page",n),Promise.resolve(null)}};m.closeDocument=function(a){if(a.is(6))return G();var b=a.container,c=z(b,"> ."+"i-amphtml-next-page-shadow-root".replace(w,x)),d=this.C.createElement("div");d.classList.add("i-amphtml-next-page-placeholder");var e=0,f=0;return this.J.measureMutateElement(c,(function(){e=c.offsetHeight;f=c.offsetWidth}),(function(){var k,g={height:e+"px",width:f+"px"};for(k in g)Q(d,k,g[k]);b.replaceChild(d,c)}))};m.sanitizeDoc=function(a){var b=this;u(a.querySelectorAll("amp-next-page")).forEach((function(c){if(b.ya){var d=oc(c);pc(b,d)}A(c)}));a.body.classList.add("amp-next-page-hidden");this.toggleHiddenAndReplaceableElements(a,!1)};m.toggleHiddenAndReplaceableElements=function(a,b){var c=this,d=b=void 0===b?!0:b;a!==this.G.document&&u(a.querySelectorAll("[next-page-hide]")).forEach((function(e){return Xa(e,!1)}));d&&u(a.querySelectorAll("*:not(amp-next-page) [next-page-replace]")).forEach((function(e){var f=e.getAttribute("next-page-replace");f||(f=String(Date.now()+Math.floor(100*Math.random())),e.setAttribute("next-page-replace",f));c.da[f]&&c.da[f]!==e&&Xa(c.da[f],!1);c.da[f]=e;Xa(e,!0)}))};function ic(a){return Math.round((a.o.getScrollHeight()-a.o.getScrollTop()-a.o.getHeight())/a.o.getHeight())}m.fetchPageDocument=function(a){var b=this;return H(this.H,"xhr").fetch(a.url,{ampCors:!1}).then((function(c){ob(c.url,b.B.getUrl());a.url=c.url;return c.text()})).then((function(c){var d=b.C.implementation.createHTMLDocument("");d.open();d.write(c);d.close();return d})).catch((function(c){D().error("amp-next-page","failed to fetch %s",a.url,c);throw c}))};function hc(a){var b=oc(a.j);if(b.length)return pc(a,b);F(a.I,"%s should contain a <script> child or a URL specified in [src]","amp-next-page");return jc(a).then((function(c){return 0===c.length?(D().warn("amp-next-page","Could not find recommendations"),G()):pc(a,c)}))}function kc(a,b){if(!b.length||a.la)return G();b.forEach((function(c){try{pb(c,a.B.getUrl()),a.h.some((function(d){return d.initialUrl==c.url}))||a.h.push(new U(a,c))}catch(d){D().error("amp-next-page","Failed to queue page due to error:",d)}}));return G()}function pc(a,b){return kc(a,b).then((function(){return a.maybeFetchNext()}))}function oc(a){var b=sa(a,"SCRIPT");if(!b.length)return[];F(1===b.length,"amp-next-page should contain at most one <script> child");a=b[0];F(wa(a),'amp-next-page page list should be inside a <script> tag with type="application/json"');var c=na(a.textContent,(function(e){D().error("amp-next-page","failed to parse inline page list",e)})),d=D().assertArray(c,"amp-next-page Page list expected an array, found: "+typeof c);A(a);return d}function jc(a){if(!a.I)return Promise.resolve([]);if(a.ca)return a.ca;a.ca=qb(a.B,a.j,{urlReplacement:2,xssiPrefix:a.j.getAttribute("xssi-prefix")||void 0}).then((function(b){a.I=b.next||null;a.I&&a.j.setAttribute("src",a.I);return b.pages||[]})).catch((function(b){D().error("amp-next-page","error fetching page list from remote server",b);a.I=null;return[]}));return a.ca}function ec(a,b){var c=ra(b,"separator");return c?(A(c),c.hasAttribute("tabindex")||c.setAttribute("tabindex","0"),c):Ta(a.j)($b)}function nc(a,b,c){return a.P.hasTemplate(b)?a.P.findAndRenderTemplate(b,{title:c.title,url:c.url,image:c.image}).then((function(d){return a.J.mutateElement(b,(function(){ta(b);b.appendChild(d)}))})):G()}function fc(a,b){var c=ra(b,"recommendation-box");if(c)return a.N=a.P.hasTemplate(c)?function(){return qc(a)}:cc,c;a.N=function(){return rc(a)};return Ta(a.j)(ac)}function qc(a){var b=a.V;a.P.hasTemplate(b);var c=a.P.maybeFindTemplate(b),d={pages:(a.h||[]).filter((function(e){return!e.isLoaded()&&!e.is(2)})).map((function(e){return{title:e.title,url:e.url,image:e.image}}))};return a.P.findAndRenderTemplate(b,d).then((function(e){return a.J.mutateElement(b,(function(){ta(b);b.appendChild(c);b.appendChild(e)}))}))}function rc(a){var b=a.V,c={pages:(a.h||[]).filter((function(f){return!f.isLoaded()&&!f.is(2)})).map((function(f){return{title:f.title,url:f.url,image:f.image}}))},d=Ta(a.j),e=c.pages.map((function(f){var g=d(bc),k=Va(g),h=k.title;k.image.src=f.image;h.textContent=f.title;g.href=f.url;g.addEventListener("click",(function(l){Ya(a.j,"amp-next-page-click",{title:f.title,url:f.url});a.Ea.navigateToAmpUrl(f.url,"content-discovery")&&l.preventDefault()}));return g}));return a.J.mutateElement(b,(function(){ta(b);e.forEach((function(f){return b.appendChild(f)}))}))}function Z(a){a=AMP.BaseElement.call(this,a)||this;a.Fa=null;return a}ha(Z,AMP.BaseElement);Z.prototype.isLayoutSupported=function(a){return"container"===a};Z.prototype.buildCallback=function(){this.Fa=J(this.element,"next-page");return this.Fa.build(this.element)};AMP.registerServiceForDoc("next-page",dc);AMP.registerElement("amp-next-page",Z,'.i-amphtml-next-page-document{overflow:hidden}.i-amphtml-next-page-document:not(.amp-next-page-visible) [i-amphtml-fixedid]{display:none}.i-amphtml-next-page-document.amp-next-page-visible{opacity:1;overflow:visible}.i-amphtml-next-page-document:after,.i-amphtml-next-page-document:before{content:" ";display:table}.i-amphtml-next-page-placeholder{background:#eee}.amp-next-page-separator{border-bottom:1px solid rgba(0,0,0,0.12)}.amp-next-page-links{border-top:1px solid rgba(0,0,0,0.1);margin-top:16px;display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column}.amp-next-page-link{border-bottom:1px solid rgba(0,0,0,0.1);display:block;overflow:auto;padding:10px 0;text-decoration:none}.amp-next-page-image{width:72px;height:72px;float:left;margin:0 10px;background-size:cover;background-position:50%}.amp-next-page-text{position:relative;margin:5px 30px 5px 0;color:#3c4043;font-size:17px}\n/*# sourceURL=/extensions/amp-next-page/1.0/amp-next-page.css*/')}});//# sourceMappingURL=amp-next-page-1.0.js.map