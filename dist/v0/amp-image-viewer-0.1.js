(self.AMP=self.AMP||[]).push({m:0,v:"2110121450047",n:"amp-image-viewer",ev:"0.1",l:true,f:function(AMP,_){"use strict";var g;function aa(a){var b=0;return function(){return b<a.length?{done:!1,value:a[b++]}:{done:!0}}}function p(a){var b="undefined"!=typeof Symbol&&Symbol.iterator&&a[Symbol.iterator];return b?b.call(a):{next:aa(a)}}var ba="function"==typeof Object.create?Object.create:function(a){function b(){}b.prototype=a;return new b};function ca(a){for(var b=["object"==typeof globalThis&&globalThis,a,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global],c=0;c<b.length;++c){var d=b[c];if(d&&d.Math==Math)return}(function(){throw Error("Cannot find global object")})()}ca(this);"function"===typeof Symbol&&Symbol("x");var r;if("function"==typeof Object.setPrototypeOf)r=Object.setPrototypeOf;else{var t;a:{var da={a:!0},ea={};try{ea.__proto__=da;t=ea.a;break a}catch(a){}t=!1}r=t?function(a,b){a.__proto__=b;if(a.__proto__!==b)throw new TypeError(a+" is not extensible");return a}:null}var fa=r;function u(a,b){a.prototype=ba(b.prototype);a.prototype.constructor=a;if(fa)fa(a,b);else for(var c in b)if("prototype"!=c)if(Object.defineProperties){var d=Object.getOwnPropertyDescriptor(b,c);d&&Object.defineProperty(a,c,d)}else a[c]=b[c];a.zb=b.prototype}var w;function x(){return w?w:w=Promise.resolve(void 0)}function ha(){var a=this;this.promise=new Promise((function(b,c){a.resolve=b;a.reject=c}))}var ia=Array.isArray;function ja(a,b){for(var c=[],d=0,e=0;e<a.length;e++){var f=a[e];b(f,e,a)?c.push(f):(d<e&&(a[d]=f),d++)}d<a.length&&(a.length=d);return c}function ka(a,b){for(var c=0;c<a.length;c++)if(b(a[c],c,a))return c;return-1}function la(a,b,c,d){return function(e){return y(e,a,b,c,d)}}function y(a,b,c,d,e){a:{var f=a-0;if(0>=f)a=0;else if(1<=f)a=1;else{for(var h=0,k=1,l=0,m=0;8>m;m++){l=z(f,b,d);var n=(z(f+1e-6,b,d)-l)/1e-6;if(1e-6>Math.abs(l-a)){a=f;break a}if(1e-6>Math.abs(n))break;else l<a?h=f:k=f,f-=(l-a)/n}for(m=0;1e-6<Math.abs(l-a)&&8>m;m++)l<a?(h=f,f=(f+k)/2):(k=f,f=(f+h)/2),l=z(f,b,d);a=f}}0==a?e=0:1==a?e=1:(b=A(0,c,a),c=A(c,e,a),e=A(e,1,a),b=A(b,c,a),c=A(c,e,a),e=A(b,c,a));return e}function z(a,b,c){if(0==a)return 0;if(1==a)return 1;var d=A(0,b,a),e=A(b,c,a),f=A(c,1,a);d=A(d,e,a);e=A(e,f,a);return A(d,e,a)}function A(a,b,c){return a+c*(b-a)}var ma={linear:function(a){return a},ease:function(a){return y(a,.25,.1,.25,1)},"ease-in":function(a){return y(a,.42,0,1,1)},"ease-out":function(a){return y(a,0,0,.58,1)},"ease-in-out":function(a){return y(a,.42,0,.58,1)}};function na(a){if(!a)return null;if("string"==typeof a){if(-1!=a.indexOf("cubic-bezier")){var b=a.match(/cubic-bezier\((.+)\)/);if(b&&(b=b[1].split(",").map(parseFloat),4==b.length)){for(var c=0;4>c;c++)if(isNaN(b[c]))return null;return la(b[0],b[1],b[2],b[3])}return null}return ma[a]}return a}function oa(a){return 1==(null==a?void 0:a.nodeType)?a.tagName.toLowerCase()+(a.id?"#"+a.id:""):a}function pa(a,b,c,d){var e=void 0===c?"Assertion failed":c;if(b)return b;a&&-1==e.indexOf(a)&&(e+=a);for(var f=3,h=e.split("%s"),k=h.shift(),l=[k];h.length;){var m=arguments[f++],n=h.shift();k+=oa(m)+n;l.push(m,n.trim())}f=Error(k);f.messageArray=ja(l,(function(ab){return""!==ab}));var q,v;null==(v=(q=self).__AMP_REPORT_ERROR)||v.call(q,f);throw f}function B(a,b,c){return pa("​​​",a,b,c,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0)}function C(a,b,c,d){return{left:a,top:b,width:c,height:d,bottom:b+d,right:a+c,x:a,y:b}}function qa(a){for(var b=null,c="",d=p(arguments),e=d.next();!e.done;e=d.next())if(e=e.value,e instanceof Error&&!b){var f=b=void 0;if(null==(f=Object.getOwnPropertyDescriptor(e,"message"))?0:f.writable)b=e;else{f=e.stack;var h=Error(e.message);for(b in e)h[b]=e[b];h.stack=f;b=h}}else c&&(c+=" "),c+=e;b?c&&(b.message=c+": "+b.message):b=Error(c);return b}function ra(a){var b=qa.apply(null,arguments);setTimeout((function(){var c,d;null==(d=(c=self).__AMP_REPORT_ERROR)||d.call(c,b);throw b}))}function sa(a,b){for(var c=[],d=1;d<arguments.length;++d)c[d-1]=arguments[d];try{a.apply(null,c)}catch(e){ra(e)}}var D,ta="Webkit webkit Moz moz ms O o".split(" "),ua={getPropertyPriority:function(){return""},getPropertyValue:function(){return""}};function E(a,b){for(var c in b){var d=a,e=b[c];var f=d.style;var h=c;if(h.startsWith("--"))f=h;else{D||(D=Object.create(null));var k=D[h];if(!k){k=h;if(void 0===f[h]){var l=h;l=l.charAt(0).toUpperCase()+l.slice(1);b:{for(var m=0;m<ta.length;m++){var n=ta[m]+l;if(void 0!==f[n]){l=n;break b}}l=""}void 0!==f[l]&&(k=l)}D[h]=k}f=k}f&&(f.startsWith("--")?d.style.setProperty(f,e):d.style[f]=e)}}function va(a){var b=!1;void 0===b&&(b=a.hasAttribute("hidden"));b?a.removeAttribute("hidden"):a.setAttribute("hidden","")}function wa(a){return"number"==typeof a?a+"px":a}var xa=/vertical/,ya=new WeakMap,F=new WeakMap,za=new WeakMap;function Aa(a,b){var c=a.ownerDocument.defaultView;if(c){var d=F.get(a);d||(d=[],F.set(a,d),Ba(c).observe(a));if(!d.some((function(f){return f.callback===b&&0===f.type}))){d.push({type:0,callback:b});var e=za.get(a);e&&setTimeout((function(){return Ca(0,b,e)}))}}}function Da(a,b){var c=F.get(a);c&&(ja(c,(function(d){return d.callback===b&&0===d.type})),0==c.length&&(F.delete(a),za.delete(a),(c=a.ownerDocument.defaultView)&&Ba(c).unobserve(a)))}function Ba(a){var b=ya.get(a);b||(b=new a.ResizeObserver(Ea),ya.set(a,b));return b}function Ea(a){for(var b=new Set,c=a.length-1;0<=c;c--){var d=a[c],e=d.target;if(!b.has(e)){b.add(e);var f=F.get(e);if(f)for(za.set(e,d),e=0;e<f.length;e++){var h=f[e];Ca(h.type,h.callback,d)}}}}function Ca(a,b,c){if(0==a)a=c.contentRect,sa(b,{width:a.width,height:a.height});else if(1==a){var d=c.borderBoxSize;if(d)var e=0<d.length?d[0]:{inlineSize:0,blockSize:0};else{a=c.target;var f=xa.test(((a.ownerDocument||a).defaultView.getComputedStyle(a)||ua)["writing-mode"]),h=a.offsetHeight,k=a.offsetWidth;if(f){var l=k;var m=h}else m=k,l=h;e={inlineSize:m,blockSize:l}}sa(b,e)}}function Fa(a,b){var c=Ga;c=ia(c)?c:[c];c=p(c);for(var d=c.next();!d.done;d=c.next()){var e=d.value;d=a.getAttribute(e);null!==d&&b.setAttribute(e,d)}}
/* https://mths.be/cssescape v1.5.1 by @mathias | MIT license */
function Ha(a,b){for(;a&&void 0!==a;a=a.parentElement)if(b(a))return a;return null}function Ia(a){return a.closest?a.closest("[i-amphtml-scale-animation]"):Ha(a,(function(b){var c=b.matches||b.webkitMatchesSelector||b.mozMatchesSelector||b.msMatchesSelector||b.oMatchesSelector;return c?c.call(b,"[i-amphtml-scale-animation]"):!1}))}function Ja(a,b){for(a=a.lastElementChild;a;a=a.previousElementSibling)if(b(a))return a;return null}function Ka(a,b){var c=[];for(a=a.firstElementChild;a;a=a.nextElementSibling)b(a)&&c.push(a);return c}function La(a){/^[\w-]+$/.test("img");return a.querySelector("img")}function Ma(a){return Ka(a,(function(b){if("string"==typeof b)var c=b;else b.nodeType===Node.ELEMENT_NODE&&(c=b.tagName);b=c&&c.toLowerCase().startsWith("i-")?!0:b.nodeType!==Node.ELEMENT_NODE?!1:b.hasAttribute("placeholder")||b.hasAttribute("fallback")||b.hasAttribute("overflow");return!b}))}var Na=/(\S+)(?:\s+(?:(-?\d+(?:\.\d+)?)([a-zA-Z]*)))?\s*(?:,|$)/g;function Oa(a){var b=a.getAttribute("srcset");if(b){a=[];for(var c;c=Na.exec(b);){var d=c[1],e=void 0,f=void 0;if(c[2]){var h=c[3].toLowerCase();if("w"==h)e=parseInt(c[2],10);else if("x"==h)f=parseFloat(c[2]);else continue}else f=1;a.push({url:d,width:e,dpr:f})}return new G(a)}var k=B(a.getAttribute("src"),'Either non-empty "srcset" or "src" attribute must be specified: %s',a);return new G([{url:k,width:void 0,dpr:1}])}function G(a){B(0<a.length,"Srcset must have at least one source");this.ya=a;for(var b=!1,c=!1,d=0;d<a.length;d++){var e=a[d];b=b||!!e.width;c=c||!!e.dpr}B(!!(b^c),"Srcset must have width or dpr sources, but not both");a.sort(b?Pa:Qa);this.lb=b}G.prototype.select=function(a,b){if(this.lb){b*=a;a=this.ya;for(var c=0,d=1/0,e=1/0,f=0;f<a.length;f++){var h=a[f].width,k=Math.abs(h-b);if(k<=1.1*d||1.2<b/e)c=f,d=k,e=h;else break}b=c}else{a=this.ya;c=0;d=1/0;for(e=0;e<a.length;e++)if(f=Math.abs(a[e].dpr-b),f<=d)c=e,d=f;else break;b=c}return this.ya[b].url};G.prototype.getUrls=function(){return this.ya.map((function(a){return a.url}))};G.prototype.stringify=function(a){for(var b=[],c=this.ya,d=0;d<c.length;d++){var e=c[d],f=e.url;a&&(f=a(f));f=this.lb?f+" "+e.width+"w":f+" "+e.dpr+"x";b.push(f)}return b.join(", ")};function Pa(a,b){B(a.width!=b.width,"Duplicate width: %s",a.width);return a.width-b.width}function Qa(a,b){B(a.dpr!=b.dpr,"Duplicate dpr: %s",a.dpr);return a.dpr-b.dpr}function Ra(a,b){return function(c){return a+(b-a)*c}}function H(a,b,c,d){return Math.min(Math.max(a,b-d),c+d)}function Sa(a,b){return Math.sqrt(a*a+b*b)}var I=self.AMP_CONFIG||{},Ta=("string"==typeof I.cdnProxyRegex?new RegExp(I.cdnProxyRegex):I.cdnProxyRegex)||/^https:\/\/([a-zA-Z0-9_-]+\.)?cdn\.ampproject\.org$/;function Ua(a){if(self.document&&self.document.head&&(!self.location||!Ta.test(self.location.origin))){var b=self.document.head.querySelector('meta[name="'+a+'"]');b&&b.getAttribute("content")}}I.cdnUrl||Ua("runtime-host");I.geoApiUrl||Ua("amp-geo-api");self.__AMP_LOG=self.__AMP_LOG||{user:null,dev:null,userForEmbed:null};var J=self.__AMP_LOG;function Va(){throw Error("failed to call initLogConstructor")}function Wa(){J.user||(J.user=Va());return J.user}function K(){return J.dev||(J.dev=Va())}function Xa(a,b,c,d){Wa().assert(a,b,c,d,void 0,void 0,void 0,void 0,void 0,void 0,void 0)}function Ya(a,b){a=a.__AMP_TOP||(a.__AMP_TOP=a);return Za(a,b)}function $a(a){var b=bb(a);b=bb(b);b=b.isSingleDoc()?b.win:b;return Za(b,"owners")}function bb(a){return a.nodeType?Ya((a.ownerDocument||a).defaultView,"ampdoc").getAmpDoc(a):a}function Za(a,b){var c=a.__AMP_SERVICES;c||(c=a.__AMP_SERVICES={});a=c[b];a.obj||(a.obj=new a.ctor(a.context),a.context=null,a.resolve&&a.resolve(a.obj));return a.obj}function cb(){}function L(a){this.Y=a;this.aa=Ya(self,"vsync");this.ab=null;this.M=[]}function db(a,b,c){var d=eb;return new L(a).setCurve(d).add(0,b,1).start(c)}L.prototype.setCurve=function(a){a&&(this.ab=na(a));return this};L.prototype.add=function(a,b,c,d){this.M.push({delay:a,func:b,duration:c,curve:na(d)});return this};L.prototype.start=function(a){return new M(this.aa,this.Y,this.M,this.ab,a)};function M(a,b,c,d,e){this.aa=a;this.Y=b;this.M=[];for(b=0;b<c.length;b++){var f=c[b];this.M.push({delay:f.delay,func:f.func,duration:f.duration,curve:f.curve||d,started:!1,completed:!1})}this.ob=e;this.$=Date.now();this.Z=!0;this.gb={};c=new ha;this.va=c.promise;this.Ta=c.resolve;this.Sa=c.reject;this.ib=this.aa.createAnimTask(this.Y,{mutate:this.xb.bind(this)});this.aa.canAnimate(this.Y)?this.ib(this.gb):(K().warn("Animation","cannot animate"),N(this,!1,0))}M.prototype.then=function(a,b){return a||b?this.va.then(a,b):this.va};M.prototype.thenAlways=function(a){a=a||cb;return this.then(a,a)};M.prototype.halt=function(a){N(this,!1,a||0)};function N(a,b,c){if(a.Z){a.Z=!1;if(0!=c){1<a.M.length&&a.M.sort((function(e,f){return e.delay+e.duration-(f.delay+f.duration)}));try{if(0<c)for(c=0;c<a.M.length;c++)a.M[c].func(1,!0);else for(var d=a.M.length-1;0<=d;d--)a.M[d].func(0,!1)}catch(e){K().error("Animation","completion failed: "+e,e),b=!1}}b?a.Ta():a.Sa()}}M.prototype.xb=function(){if(this.Z){for(var a=Date.now(),b=Math.min((a-this.$)/this.ob,1),c=0;c<this.M.length;c++){var d=this.M[c];!d.started&&b>=d.delay&&(d.started=!0)}for(c=0;c<this.M.length;c++)if(d=this.M[c],d.started&&!d.completed)a:{var e;if(0<d.duration){var f=e=Math.min((b-d.delay)/d.duration,1);if(d.curve&&1!=f)try{f=d.curve(e)}catch(h){K().error("Animation","step curve failed: "+h,h);N(this,!1,0);break a}}else f=e=1;1==e&&(d.completed=!0);try{d.func(f,d.completed)}catch(h){K().error("Animation","step mutate failed: "+h,h),N(this,!1,0)}}1==b?N(this,!0,0):this.aa.canAnimate(this.Y)?this.ib(this.gb):(K().warn("Animation","cancel animation"),N(this,!1,0))}};var O,P;function fb(a,b,c,d){function e(m){try{return h(m)}catch(v){var n,q;null==(q=(n=self).__AMP_REPORT_ERROR)||q.call(n,v);throw v}}var f=a,h=c,k=gb(),l=!(null==d||!d.capture);f.addEventListener(b,e,k?d:l);return function(){var m;null==(m=f)||m.removeEventListener(b,e,k?d:l);e=f=h=null}}function gb(){if(void 0!==O)return O;O=!1;try{var a={get capture(){O=!0}};self.addEventListener("test-options",null,a);self.removeEventListener("test-options",null,a)}catch(b){}return O}function hb(a){if(void 0!==P)return P;P=!1;try{var b={get passive(){P=!0;return!1}};a.addEventListener("test-options",null,b);a.removeEventListener("test-options",null,b)}catch(c){}return P}function ib(a,b,c,d){var e=c,f=fb(a,b,(function(h){try{e(h)}finally{e=null,f()}}),d);return f}function jb(a){return!!(a.complete||"complete"==a.readyState||kb(a)&&0<a.readyState||a.document&&"complete"==a.document.readyState)}function lb(a){var b,c;if(jb(a))return Promise.resolve(a);var d=kb(a);return d&&a.__AMP_MEDIA_LOAD_FAILURE_SRC===a.currentSrc?Promise.reject(a):new Promise((function(e,f){b=d?ib(a,"loadedmetadata",e,{capture:!0}):ib(a,"load",e);if(a.tagName){var h=a;if(d&&!a.hasAttribute("src")&&(h=Ja(a,(function(k){return"SOURCE"===k.tagName})),!h))return f(Error("Media has no source."));c=ib(h,"error",f)}})).then((function(){c&&c();return a}),(function(){b&&b();kb(a)&&(a.__AMP_MEDIA_LOAD_FAILURE_SRC=a.currentSrc||!0);var e=a;e&&e.src&&(e=e.src);throw Wa().createError("Failed to load:",e)}))}function kb(a){return"AUDIO"===a.tagName||"VIDEO"===a.tagName}function mb(){this.V=null}g=mb.prototype;g.add=function(a){var b=this;this.V||(this.V=[]);this.V.push(a);return function(){b.remove(a)}};g.remove=function(a){if(this.V){var b=this.V;a=b.indexOf(a);-1!=a&&b.splice(a,1)}};g.removeAll=function(){this.V&&(this.V.length=0)};g.fire=function(a){if(this.V)for(var b=p(this.V),c=b.next();!c.done;c=b.next())c=c.value,c(a)};g.getHandlerCount=function(){var a,b;return null!=(b=null==(a=this.V)?void 0:a.length)?b:0};function Q(a,b){var c=this;this.jb=Za(a,"timer");this.pb=b;this.nb=0;this.wa=-1;this.Oa=0;this.Z=!1;this.mb=function(){c.Ca()}}Q.prototype.isPending=function(){return-1!=this.wa};Q.prototype.schedule=function(a){a=a||this.nb;this.Z&&10>a&&(a=10);var b=Date.now()+a;return!this.isPending()||-10>b-this.Oa?(this.cancel(),this.Oa=b,this.wa=this.jb.delay(this.mb,a),!0):!1};Q.prototype.Ca=function(){this.wa=-1;this.Oa=0;this.Z=!0;this.pb();this.Z=!1};Q.prototype.cancel=function(){this.isPending()&&(this.jb.cancel(this.wa),this.wa=-1)};function nb(a,b,c,d){this.type=a;this.data=b;this.time=c;this.event=d}function ob(a,b,c){this.W=a;this.C=[];this.ia=[];this.S=[];this.H=[];this.h=null;this.ub=b;this.vb=c;this.Ha=!1;this.Ca=new Q((a.ownerDocument||a).defaultView,this.bb.bind(this));this.fb=new mb;this.ua=Object.create(null);this.Ya=this.tb.bind(this);this.Wa=this.rb.bind(this);this.Xa=this.sb.bind(this);this.Va=this.qb.bind(this);var d=hb(a.ownerDocument.defaultView);this.W.addEventListener("touchstart",this.Ya,d?{passive:!0}:!1);this.W.addEventListener("touchend",this.Wa);this.W.addEventListener("touchmove",this.Xa,d?{passive:!0}:!1);this.W.addEventListener("touchcancel",this.Va);this.Pa=!1}function pb(a){var b=void 0===b?!1:b;var c=void 0===c?!1:c;var d=a.__AMP_Gestures;d||(d=new ob(a,b,c),a.__AMP_Gestures=d);return d}g=ob.prototype;g.cleanup=function(){this.W.removeEventListener("touchstart",this.Ya);this.W.removeEventListener("touchend",this.Wa);this.W.removeEventListener("touchmove",this.Xa);this.W.removeEventListener("touchcancel",this.Va);delete this.W.__AMP_Gestures;this.Ca.cancel()};g.onGesture=function(a,b){var c=new a(this),d=c.getType(),e=this.ua[d];e||(this.C.push(c),e=new mb,this.ua[d]=e);return e.add(b)};g.removeGesture=function(a){var b=new a(this).getType();if(a=this.ua[b]){a.removeAll();a=ka(this.C,(function(c){return c.getType()==b}));if(0>a)return!1;this.C.splice(a,1);this.S.splice(a,1);this.H.splice(a,1);this.ia.splice(a,1);delete this.ua[b];return!0}return!1};g.onPointerDown=function(a){return this.fb.add(a)};g.tb=function(a){var b=Date.now();this.Ha=!1;this.fb.fire(a);for(var c=0;c<this.C.length;c++)if(!this.S[c]&&(this.H[c]&&this.H[c]<b&&R(this,c),this.C[c].onTouchStart(a))){var d=c;this.ia[d]=!0;this.H[d]=0}S(this,a)};g.sb=function(a){for(var b=Date.now(),c=0;c<this.C.length;c++)this.ia[c]&&(this.H[c]&&this.H[c]<b?R(this,c):this.C[c].onTouchMove(a)||R(this,c));S(this,a)};g.rb=function(a){for(var b=Date.now(),c=0;c<this.C.length;c++)if(this.ia[c])if(this.H[c]&&this.H[c]<b)R(this,c);else{this.C[c].onTouchEnd(a);var d=!this.H[c],e=this.H[c]<b;this.h!=this.C[c]&&(d||e)&&R(this,c)}S(this,a)};g.qb=function(a){for(var b=0;b<this.C.length;b++){var c=b;this.S[c]=0;R(this,c)}S(this,a)};function S(a,b){var c=!!a.h||a.Ha;a.Ha=!1;if(!c)for(var d=Date.now(),e=0;e<a.C.length;e++)if(a.S[e]||a.H[e]&&a.H[e]>=d){c=!0;break}c?(b.stopPropagation(),a.ub||b.preventDefault()):a.vb&&b.stopPropagation();a.Pa&&(a.Pa=!1,a.bb())}g.bb=function(){for(var a=Date.now(),b=-1,c=0;c<this.C.length;c++)if(!this.S[c])this.H[c]&&this.H[c]<a&&R(this,c);else if(-1==b||this.S[c]>this.S[b])b=c;if(-1!=b){var d=0;for(c=0;c<this.C.length;c++)!this.S[c]&&this.ia[c]&&(d=Math.max(d,this.H[c]-a));if(2>d){a=b;c=this.C[a];for(var e=0;e<this.C.length;e++)if(e!=a){var f=e;this.S[f]=0;R(this,f)}this.S[a]=0;this.H[a]=0;this.h=c;c.acceptStart()}else this.Ca.schedule(d)}};function R(a,b){a.ia[b]=!1;a.H[b]=0;a.S[b]||a.C[b].acceptCancel()}function T(a,b){this.yb=a;this.za=b}g=T.prototype;g.getType=function(){return this.yb};g.signalReady=function(a){var b=this.za;if(b.h)this.acceptCancel();else{for(var c=Date.now(),d=0;d<b.C.length;d++)b.C[d]==this&&(b.S[d]=c+a,b.H[d]=0);b.Pa=!0}};g.signalPending=function(a){var b=this.za;if(b.h)this.acceptCancel();else for(var c=Date.now(),d=0;d<b.C.length;d++)b.C[d]==this&&(b.H[d]=c+a)};g.signalEnd=function(){var a=this.za;a.h==this&&(a.h=null,a.Ha=!0)};g.signalEmit=function(a,b){var c=this.za.ua[this.getType()];c&&c.fire(new nb(this.getType(),a,Date.now(),b))};g.acceptStart=function(){};g.acceptCancel=function(){};g.onTouchStart=function(){return!1};g.onTouchMove=function(){return!1};g.onTouchEnd=function(){};function qb(){}var rb=Math.round(-16.67/Math.log(.95));function U(a,b,c){1>b&&(b=1);var d=.5+Math.min(b/33.34,.5);return a/b*d+c*(1-d)}function sb(a,b,c,d,e,f){return new tb(a,b,c,d,e,f).start()}function tb(a,b,c,d,e,f){this.aa=Ya(self,"vsync");this.Y=a;this.Ia=f;this.j=b;this.o=c;this.La=d;this.Ma=e;this.G=this.F=0;a=new ha;this.va=a.promise;this.Ta=a.resolve;this.Sa=a.reject;this.ja=!1}g=tb.prototype;g.start=function(){this.ja=!0;if(.02>=Math.abs(this.La)&&.02>=Math.abs(this.Ma))this.Ia(this.j,this.o),this.Ja(!0);else{this.F=this.La;this.G=this.Ma;var a=this.wb.bind(this),b=this.Ja.bind(this,!0);this.aa.runAnimMutateSeries(this.Y,a,5e3).then(b,b)}return this};g.halt=function(){this.ja&&this.Ja(!1)};g.then=function(a,b){return a||b?this.va.then(a,b):this.va};g.thenAlways=function(a){a=a||qb;return this.then(a,a)};g.wb=function(a,b){if(!this.ja)return!1;this.j+=b*this.F;this.o+=b*this.G;if(!this.Ia(this.j,this.o))return!1;var c=Math.exp(-a/rb);this.F=this.La*c;this.G=this.Ma*c;return.02<Math.abs(this.F)||.02<Math.abs(this.G)};g.Ja=function(a){this.ja&&(this.ja=!1,this.Ia(this.j,this.o),a?this.Ta():this.Sa())};function V(a){T.call(this,"tap",a);this.o=this.j=this.B=this.A=0;this.hb=null}u(V,T);V.prototype.onTouchStart=function(a){var b=a.touches;this.hb=a.target;return b&&1==b.length?(this.A=b[0].clientX,this.B=b[0].clientY,!0):!1};V.prototype.onTouchMove=function(a){return(a=a.changedTouches||a.touches)&&1==a.length&&(this.j=a[0].clientX,this.o=a[0].clientY,a=8<=Math.abs(this.o-this.B),8<=Math.abs(this.j-this.A)||a)?!1:!0};V.prototype.onTouchEnd=function(){this.signalReady(0)};V.prototype.acceptStart=function(){this.signalEmit({clientX:this.j,clientY:this.o,target:this.hb},null);this.signalEnd()};function ub(a){T.call(this,"doubletap",a);this.U=this.o=this.j=this.B=this.A=0;this.cb=null}u(ub,T);g=ub.prototype;g.onTouchStart=function(a){return 1<this.U?!1:(a=a.touches)&&1==a.length?(this.A=a[0].clientX,this.B=a[0].clientY,this.j=a[0].clientX,this.o=a[0].clientY,!0):!1};g.onTouchMove=function(a){return(a=a.touches)&&1==a.length?(this.j=a[0].clientX,this.o=a[0].clientY,a=8<=Math.abs(this.o-this.B),8<=Math.abs(this.j-this.A)||a?(this.acceptCancel(),!1):!0):!1};g.onTouchEnd=function(a){this.U++;2>this.U?this.signalPending(200):(this.cb=a,this.signalReady(0))};g.acceptStart=function(){this.U=0;this.signalEmit({clientX:this.j,clientY:this.o},this.cb);this.signalEnd()};g.acceptCancel=function(){this.U=0};function W(a,b,c,d){T.call(this,a,b);this.eb=c;this.kb=d;this.h=!1;this.G=this.F=this.R=this.K=this.$=this.ca=this.ba=this.o=this.j=this.B=this.A=0}u(W,T);g=W.prototype;g.onTouchStart=function(a){a=a.touches;return this.h&&a&&1<a.length?!0:a&&1==a.length?(this.$=Date.now(),this.A=a[0].clientX,this.B=a[0].clientY,!0):!1};g.onTouchMove=function(a){var b=a.touches;if(b&&1<=b.length){var c=b[0];b=c.clientX;c=c.clientY;this.j=b;this.o=c;if(this.h)this.T(!1,!1,a);else if(a=Math.abs(b-this.A),b=Math.abs(c-this.B),this.eb&&this.kb)(8<=a||8<=b)&&this.signalReady(-10);else if(this.eb){if(8<=a&&a>b)this.signalReady(-10);else if(8<=b)return!1}else if(this.kb){if(8<=b&&b>a)this.signalReady(-10);else if(8<=a)return!1}else return!1;return!0}return!1};g.onTouchEnd=function(a){var b=a.touches;b&&0==b.length&&this.ka(a)};g.acceptStart=function(){this.h=!0;this.ba=this.A;this.ca=this.B;this.R=this.$;this.A=this.j;this.B=this.o;this.T(!0,!1,null)};g.acceptCancel=function(){this.h=!1};g.T=function(a,b,c){this.K=Date.now();var d=this.K-this.R;if(!b&&4<d||b&&16<d){var e=U(this.j-this.ba,d,this.F),f=U(this.o-this.ca,d,this.G);if(!b||32<d||0!=e||0!=f)this.F=1e-4<Math.abs(e)?e:0,this.G=1e-4<Math.abs(f)?f:0;this.ba=this.j;this.ca=this.o;this.R=this.K}this.signalEmit({first:a,last:b,time:this.K,deltaX:this.j-this.A,deltaY:this.o-this.B,startX:this.A,startY:this.B,lastX:this.j,lastY:this.o,velocityX:this.F,velocityY:this.G},c)};g.ka=function(a){this.h&&(this.h=!1,this.T(!1,!0,a),this.signalEnd())};function vb(a){W.call(this,"swipe-xy",a,!0,!0)}u(vb,W);function wb(a){T.call(this,"tapzoom",a);this.h=!1;this.G=this.F=this.R=this.K=this.ca=this.ba=this.U=this.o=this.j=this.B=this.A=0}u(wb,T);g=wb.prototype;g.onTouchStart=function(a){return this.h?!1:(a=a.touches)&&1==a.length?(this.A=a[0].clientX,this.B=a[0].clientY,!0):!1};g.onTouchMove=function(a){var b=a.touches;if(b&&1==b.length){this.j=b[0].clientX;this.o=b[0].clientY;if(this.h)this.T(!1,!1,a);else if(a=8<=Math.abs(this.o-this.B),8<=Math.abs(this.j-this.A)||a){if(0==this.U)return this.acceptCancel(),!1;this.signalReady(0)}return!0}return!1};g.onTouchEnd=function(a){this.h?this.ka(a):(this.U++,1==this.U?this.signalPending(400):this.acceptCancel())};g.acceptStart=function(){this.U=0;this.h=!0;this.T(!0,!1,null)};g.acceptCancel=function(){this.U=0;this.h=!1};g.T=function(a,b,c){this.K=Date.now();a?this.F=this.G=0:2<this.K-this.R&&(this.F=U(this.j-this.ba,this.K-this.R,this.F),this.G=U(this.o-this.ca,this.K-this.R,this.G));this.ba=this.j;this.ca=this.o;this.R=this.K;this.signalEmit({first:a,last:b,centerClientX:this.A,centerClientY:this.B,deltaX:this.j-this.A,deltaY:this.o-this.B,velocityX:this.F,velocityY:this.G},c)};g.ka=function(a){this.h&&(this.h=!1,this.T(!1,!0,a),this.signalEnd())};function xb(a){T.call(this,"pinch",a);this.h=!1;this.G=this.F=this.R=this.K=this.$=this.$a=this.Za=this.Ra=this.Qa=this.oa=this.ma=this.na=this.la=this.ha=this.fa=this.ga=this.ea=0}u(xb,T);g=xb.prototype;g.onTouchStart=function(a){a=a.touches;return a?1==a.length||this.h&&2<a.length?!0:2==a.length?(this.$=Date.now(),this.ea=a[0].clientX,this.ga=a[0].clientY,this.fa=a[1].clientX,this.ha=a[1].clientY,!0):!1:!1};g.onTouchMove=function(a){var b=a.touches;if(!b||0==b.length)return!1;if(1==b.length)return!0;this.la=b[0].clientX;this.na=b[0].clientY;this.ma=b[1].clientX;this.oa=b[1].clientY;if(this.h)return this.T(!1,!1,a),!0;a=this.la-this.ea;b=this.na-this.ga;var c=this.ma-this.fa,d=this.oa-this.ha,e=10<=Math.abs(a+c),f=10<=Math.abs(b+d);if((0<a*c||0<b*d)&&(e||f))return!1;a=this.la-this.ea;b=this.na-this.ga;c=this.ma-this.fa;d=this.oa-this.ha;e=4<=Math.abs(a-c);f=4<=Math.abs(b-d);0>=a*c&&0>=b*d&&(e||f)&&this.signalReady(0);return!0};g.onTouchEnd=function(a){var b=a.touches;b&&2>b.length&&this.ka(a)};g.acceptStart=function(){this.h=!0;this.R=this.$;this.Ra=this.Qa=0;this.Za=.5*(this.ea+this.fa);this.$a=.5*(this.ga+this.ha);this.T(!0,!1,null)};g.acceptCancel=function(){this.h=!1};g.T=function(a,b,c){this.K=Date.now();var d=this.K-this.R,e=Math.abs(this.la-this.ea-(this.ma-this.fa)),f=Math.abs(this.na-this.ga-(this.oa-this.ha));if(!b&&4<d||b&&16<d)this.F=U(e-this.Qa,d,this.F),this.G=U(f-this.Ra,d,this.G),this.F=1e-4<Math.abs(this.F)?this.F:0,this.G=1e-4<Math.abs(this.G)?this.G:0,this.Qa=e,this.Ra=f,this.R=this.K;d=this.ea;var h=this.fa,k=this.ga,l=this.ha,m=this.la,n=this.ma,q=this.na,v=this.oa;this.signalEmit({first:a,last:b,time:this.K,centerClientX:this.Za,centerClientY:this.$a,dir:Math.sign((m-n)*(m-n)+(q-v)*(q-v)-((d-h)*(d-h)+(k-l)*(k-l))),deltaX:.5*e,deltaY:.5*f,velocityX:.5*this.F,velocityY:.5*this.G},c)};g.ka=function(a){this.h&&(this.h=!1,this.T(!1,!0,a),this.signalEnd())};var eb=la(.4,0,.2,1.4),Ga=["aria-label","aria-describedby","aria-labelledby"],yb=new Set(["AMP-IMG","AMP-ANIM","IMG"]);function zb(a){a=AMP.BaseElement.call(this,a)||this;a.I=null;a.Ua=null;a.da=0;a.xa=0;a.J=null;a.P=null;a.Ga=null;a.Fa=null;a.D=1;a.Ea=1;a.Ka=1;a.Na=1;a.Aa=2;a.A=0;a.B=0;a.N=0;a.O=0;a.ra=0;a.sa=0;a.pa=0;a.qa=0;a.L=null;a.ta=null;a.Da=null;a.X=null;a.Ba=a.Ba.bind(a);return a}u(zb,AMP.BaseElement);g=zb.prototype;g.buildCallback=function(){this.element.classList.add("i-amphtml-image-viewer");var a=Ma(this.element);Xa(1==a.length,"%s should have its target element as its one and only child","amp-image-viewer");Xa(yb.has(a[0].tagName),"%s is not supported by %s",a[0].tagName,"amp-image-viewer");this.Da=a[0];$a(this.element).setOwner(this.Da,this.element)};g.layoutCallback=function(){var a=this;if(this.X)return this.X;if(Ia(this.element))return x();var b=this.Da,c=!!this.I,d=c?x():"IMG"===b.tagName?lb(b):b.signals().whenSignal("load-end");c||$a(this.element).scheduleLayout(this.element,b);return this.X=d.then((function(){return Ab(a)})).then((function(){return X(a)})).then((function(){return Bb(a)}))};g.pauseCallback=function(){var a=this;this.X&&this.X.then((function(){X(a);a.L&&(a.L.cleanup(),a.L=null)}))};g.resumeCallback=function(){var a=this;this.X&&this.X.then((function(){X(a);Bb(a)}))};g.unlayoutCallback=function(){this.L&&(this.L.cleanup(),this.L=null);this.X=null;Da(this.element,this.Ba);return!0};g.isLayoutSupported=function(a){return"fill"==a};g.getImageBox=function(){return this.P};g.getImage=function(){return this.I};g.getImageBoxWithOffset=function(){if(0==this.N&&0==this.O||!this.P)return this.P;var a=(this.D-1)/2;var b=this.P;b=C(b.left-b.width*a,b.top-b.height*a,b.width*(1+2*a),b.height*(1+2*a));var c=this.N,d=this.O;return 0==c&&0==d||0==b.width&&0==b.height?b:C(b.left+c,b.top+d,b.width,b.height)};function Cb(a,b){var c=La(b);a.measureElement((function(){c?(a.da=c.naturalWidth||b.offsetWidth,a.xa=c.naturalHeight||b.offsetHeight):(a.da=b.offsetWidth,a.xa=b.offsetHeight)}))}function Ab(a){if(a.I)return x();a.I=a.element.ownerDocument.createElement("img");a.I.classList.add("i-amphtml-image-viewer-image");var b=a.Da;Cb(a,b);a.Ua=Oa(b);Aa(a.element,a.Ba);return a.mutateElement((function(){E(a.I,{top:0,left:0,width:0,height:0});va(b);a.element.appendChild(a.I);return"IMG"===b.tagName?(Fa(b,a.I),x()):b.getImpl().then((function(c){return Fa(c.element,a.I)}))}))}g.Ba=function(){Ia(this.element)||X(this)};function X(a){return a.measureElement((function(){var b=a.element.getBoundingClientRect();b=C(Number(b.left),Number(b.top),Number(b.width),Number(b.height));a.J=b;b=a.da/a.xa;var c=Math.min(a.J.width/b,a.J.height),d=Math.min(a.J.height*b,a.J.width);16>=Math.abs(d-a.da)&&Math.abs(16>=c-a.xa)&&(d=a.da,c=a.xa);a.P=C(Math.round((a.J.width-d)/2),Math.round((a.J.height-c)/2),Math.round(d),Math.round(c));c=a.J.width/a.J.height;a.Aa=Math.max(2,Math.max(c/b,b/c));a.Ea=a.D=1;a.A=a.N=0;a.B=a.O=0;Db(a,a.D)})).then((function(){var b=a.I;return a.mutateElement((function(){E(b,{top:a.P.top+"px",left:a.P.left+"px",width:a.P.width+"px",height:a.P.height+"px"});Y(a)}),b)})).then((function(){return Eb(a)}))}function Eb(a){if(!a.Ua)return x();a.Ka=Math.max(a.Ka,a.D);var b=a.Ua.select(Math.max(a.P.width*a.Ka,a.da),self.devicePixelRatio||1);return b==a.I.getAttribute("src")?x():a.mutateElement((function(){a.I.setAttribute("src",b)}),a.I)}function Bb(a){a.L=pb(a.element);a.L.onGesture(ub,(function(b){var c=b.data;Fb(a,1==a.D?a.Aa:a.Na,a.J.width/2-c.clientX,a.J.height/2-c.clientY,!0).then((function(){return Gb(a)}))}));a.L.onGesture(V,(function(b){b=b.data.target;var c=a.win;var d={detail:null};Object.assign(d,{bubbles:!0});"function"==typeof c.CustomEvent?d=new c.CustomEvent("click",d):(c=c.document.createEvent("CustomEvent"),c.initCustomEvent("click",!!d.bubbles,!!d.cancelable,null),d=c);b.dispatchEvent(d)}));a.L.onGesture(wb,(function(b){b=b.data;var c=b.deltaX,d=b.deltaY;Hb(a,b.centerClientX,b.centerClientY,c,d,Math.abs(d)>Math.abs(c)?Math.sign(d):Math.sign(-c));b.last&&Ib(a,b.centerClientX,b.centerClientY,b.deltaX,b.deltaY,b.velocityY,b.velocityY)}));a.L.onGesture(xb,(function(b){b=b.data;Hb(a,b.centerClientX,b.centerClientY,b.deltaX,b.deltaY,b.dir);b.last&&Gb(a)}))}function Jb(a){a.Ga=a.L.onGesture(vb,(function(b){b=b.data;var c=b.deltaY,d=H(a.A+b.deltaX,a.ra,a.pa,0);c=H(a.B+c,a.sa,a.qa,0);Z(a,a.D,d,c,!1);b.last&&Kb(a,b.velocityX,b.velocityY)}));a.Fa=a.L.onPointerDown((function(){a.ta&&a.ta.halt()}))}function Db(a,b){var c=0,d=0,e=a.J.height-a.P.height*b;0<=e?d=c=0:(d=e/2,c=-d);var f=0,h=0;b=a.J.width-a.P.width*b;0<=b?h=f=0:(h=b/2,f=-h);a.ra=h;a.sa=d;a.pa=f;a.qa=c}function Y(a){var b=a.I;var c=a.N;var d=a.O;c=void 0===d||null===d?"translate("+wa(c)+")":"translate("+wa(c)+", "+wa(d)+")";E(b,{transform:c+" scale("+a.D+")"})}function Kb(a,b,c){a.ta=sb(a.I,a.N,a.O,b,c,(function(d,e){d=H(d,a.ra,a.pa,0);e=H(e,a.sa,a.qa,0);if(1>Math.abs(d-a.N)&&1>Math.abs(e-a.O))return!1;Z(a,a.D,d,e,!1);return!0}));a.ta.thenAlways((function(){a.ta=null;return Lb(a)}))}function Hb(a,b,c,d,e,f){if(0!=f){var h=Sa(d,e);f=a.Ea*(1+f*h/100);var k=a.J.width/2-b,l=a.J.height/2-c;d=Math.min(k,h/100*k);e=Math.min(l,h/100*l);Fb(a,f,d,e,!1)}}function Fb(a,b,c,d,e){b=H(b,a.Na,a.Aa,.25);if(b!=a.D)return Db(a,b),c=H(a.A+c*b,a.ra,a.pa,0),d=H(a.B+d*b,a.sa,a.qa,0),Z(a,b,c,d,e)}function Ib(a,b,c,d,e,f,h){(0==f&&0==h?x():sb(a.I,d,e,f,h,(function(k,l){Hb(a,b,c,k,l,Math.abs(l)>Math.abs(k)?Math.sign(l):Math.sign(-k));return!0})).thenAlways()).then((function(){Gb(a)}))}function Gb(a){var b=a.D>a.Ea;return Lb(a).then((function(){b&&Eb(a);1<a.D?Jb(a):(a.Ga&&(a.Ga(),a.Ga=null,a.L.removeGesture(vb)),a.Fa&&(a.Fa(),a.Fa=null))}))}function Z(a,b,c,d,e){var f=b-a.D,h=Sa(c-a.N,d-a.O),k=0;e&&(k=Math.min(250,Math.max(2.5*h,250*Math.abs(f))));if(16<k&&e){var l=Ra(a.D,b),m=Ra(a.N,c),n=Ra(a.O,d);e=db(a.I,(function(q){a.D=l(q);a.N=m(q);a.O=n(q);Y(a)}),k).thenAlways((function(){a.D=b;a.N=c;a.O=d;Y(a)}))}else a.D=b,a.N=c,a.O=d,Y(a),e=e?x():void 0;return e}function Lb(a){var b=H(a.D,a.Na,a.Aa,0);b!=a.D&&Db(a,b);var c=H(a.N/a.D*b,a.ra,a.pa,0),d=H(a.O/a.D*b,a.sa,a.qa,0);return Z(a,b,c,d,!0).then((function(){a.Ea=a.D;a.A=a.N;a.B=a.O}))}AMP.registerElement("amp-image-viewer",zb,".i-amphtml-image-viewer-image{position:absolute;-o-object-fit:contain;object-fit:contain}.i-amphtml-image-viewer{position:absolute;top:0;left:0;right:0;bottom:0;overflow:hidden;transform:translateZ(0)}.i-amphtml-image-viewer>amp-img{min-width:1px;min-height:1px}\n/*# sourceURL=/extensions/amp-image-viewer/0.1/amp-image-viewer.css*/")}});//# sourceMappingURL=amp-image-viewer-0.1.js.map