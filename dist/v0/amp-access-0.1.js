(self.AMP=self.AMP||[]).push({m:0,v:"2110121450047",n:"amp-access",ev:"0.1",l:true,f:function(AMP,_){"use strict";var h;function ba(a){var b=0;return function(){return b<a.length?{done:!1,value:a[b++]}:{done:!0}}}function q(a){var b="undefined"!=typeof Symbol&&Symbol.iterator&&a[Symbol.iterator];return b?b.call(a):{next:ba(a)}}function ca(a){for(var b=["object"==typeof globalThis&&globalThis,a,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global],c=0;c<b.length;++c){var d=b[c];if(d&&d.Math==Math)return}(function(){throw Error("Cannot find global object")})()}ca(this);"function"===typeof Symbol&&Symbol("x");var da;function t(){return da?da:da=Promise.resolve(void 0)}function ea(){var a=this;this.promise=new Promise((function(b,c){a.resolve=b;a.reject=c}))}var A=Array.isArray;function fa(a,b){for(var c=[],d=0,e=0;e<a.length;e++){var f=a[e];b(f,e,a)?c.push(f):(d<e&&(a[d]=f),d++)}d<a.length&&(a.length=d);return c}var ha=Object.prototype,la=ha.hasOwnProperty,ma=ha.toString;function E(a){return a||{}}function na(a,b){if("."==b)return a;var c=b.split(".");b=q(c);for(var d=b.next();!d.done;d=b.next()){var e=d.value;if(e&&a&&void 0!==a[e]&&"object"==typeof a&&la.call(a,e))a=a[e];else{a=void 0;break}}return a}function oa(a){return 1==(null==a?void 0:a.nodeType)?a.tagName.toLowerCase()+(a.id?"#"+a.id:""):a}function pa(a,b,c,d){var e=void 0===c?"Assertion failed":c;if(!b){a&&-1==e.indexOf(a)&&(e+=a);for(var f=3,g=e.split("%s"),m=g.shift(),p=[m];g.length;){var v=arguments[f++],D=g.shift();m+=oa(v)+D;p.push(v,D.trim())}f=Error(m);f.messageArray=fa(p,(function(x){return""!==x}));var H,y;null==(y=(H=self).__AMP_REPORT_ERROR)||y.call(H,f);throw f}}function qa(a,b){pa("​​​",a,"Object expected: %s",b,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0)}function ra(){this.D=null}h=ra.prototype;h.add=function(a){var b=this;this.D||(this.D=[]);this.D.push(a);return function(){b.remove(a)}};h.remove=function(a){if(this.D){var b=this.D;a=b.indexOf(a);-1!=a&&b.splice(a,1)}};h.removeAll=function(){this.D&&(this.D.length=0)};h.fire=function(a){if(this.D)for(var b=q(this.D),c=b.next();!c.done;c=b.next())c=c.value,c(a)};h.getHandlerCount=function(){var a,b;return null!=(b=null==(a=this.D)?void 0:a.length)?b:0};function sa(a,b){try{return JSON.parse(a)}catch(c){return null==b||b(c),null}}
/* https://mths.be/cssescape v1.5.1 by @mathias | MIT license */
var ta=/(\0)|^(-)$|([\x01-\x1f\x7f]|^-?[0-9])|([\x80-\uffff0-9a-zA-Z_-]+)|[^]/g;function ua(a,b,c,d,e){return e?e:b?"�":d?a.slice(0,-1)+"\\"+a.slice(-1).charCodeAt(0).toString(16)+" ":"\\"+a}function va(a){var b;return"SCRIPT"==a.tagName&&"APPLICATION/JSON"==(null==(b=a.getAttribute("type"))?void 0:b.toUpperCase())}var F=self.AMP_CONFIG||{},wa=("string"==typeof F.cdnProxyRegex?new RegExp(F.cdnProxyRegex):F.cdnProxyRegex)||/^https:\/\/([a-zA-Z0-9_-]+\.)?cdn\.ampproject\.org$/;function xa(a){if(!self.document||!self.document.head||self.location&&wa.test(self.location.origin))return null;var b=self.document.head.querySelector('meta[name="'+a+'"]');return b&&b.getAttribute("content")||null}var ya={thirdParty:F.thirdPartyUrl||"https://3p.ampproject.net",thirdPartyFrameHost:F.thirdPartyFrameHost||"ampproject.net",thirdPartyFrameRegex:("string"==typeof F.thirdPartyFrameRegex?new RegExp(F.thirdPartyFrameRegex):F.thirdPartyFrameRegex)||/^d-\d+\.ampproject\.net$/,cdn:F.cdnUrl||xa("runtime-host")||"https://cdn.ampproject.org",cdnProxyRegex:wa,localhostRegex:/^https?:\/\/localhost(:\d+)?$/,errorReporting:F.errorReportingUrl||"https://us-central1-amp-error-reporting.cloudfunctions.net/r",betaErrorReporting:F.betaErrorReportingUrl||"https://us-central1-amp-error-reporting.cloudfunctions.net/r-beta",localDev:F.localDev||!1,trustedViewerHosts:[/(^|\.)google\.(com?|[a-z]{2}|com?\.[a-z]{2}|cat)$/,/(^|\.)gmail\.(com|dev)$/],geoApi:F.geoApiUrl||xa("amp-geo-api")};var Ba=/(?:^[#?]?|&)([^=&]+)(?:=([^&]*))?/g;function Ca(a,b){var c=b=void 0===b?"":b;try{return decodeURIComponent(a)}catch(d){return c}}function Da(a){var b=Object.create(null);if(!a)return b;for(var c;c=Ba.exec(a);){var d=Ca(c[1],c[1]);c=c[2]?Ca(c[2].replace(/\+/g," "),c[2]):"";b[d]=c}return b}function Ea(a){a=(a||self).location;return Da(a.originalHash||a.hash)}var Fa="";function Ga(){var a=self;if(a.__AMP_MODE)a=a.__AMP_MODE;else{var b=Ea(a)||Ea(a);b=["1","actions","amp","amp4ads","amp4email"].includes(b.development)||!!a.AMP_DEV_MODE;if(!Fa){var c;Fa=(null==(c=a.AMP_CONFIG)?void 0:c.v)||"012110121450047"}a=a.__AMP_MODE={localDev:!1,development:b,esm:!1,test:!1,rtvVersion:Fa}}return a}self.__AMP_LOG=self.__AMP_LOG||{user:null,dev:null,userForEmbed:null};var J=self.__AMP_LOG;function Ha(){throw Error("failed to call initLogConstructor")}function K(){J.user||(J.user=Ha());return J.user}function M(){return J.dev||(J.dev=Ha())}function N(a,b,c,d,e){return K().assert(a,b,c,d,e,void 0,void 0,void 0,void 0,void 0,void 0)}function R(a,b){a=a.__AMP_TOP||(a.__AMP_TOP=a);return S(a,b)}function V(a){return S(a,"timer")}function Ia(a){a=a.__AMP_TOP||(a.__AMP_TOP=a);return Ja(a,"performance")?S(a,"performance"):null}function W(a,b){var c=Ka(a);c=X(c);return S(c,b)}function La(a,b){a=Ka(a);a=X(a);return Ja(a,b)?S(a,b):null}function Ka(a){return a.nodeType?R((a.ownerDocument||a).defaultView,"ampdoc").getAmpDoc(a):a}function X(a){a=Ka(a);return a.isSingleDoc()?a.win:a}function S(a,b){Ja(a,b);a=Ma(a)[b];a.obj||(a.obj=new a.ctor(a.context),a.context=null,a.resolve&&a.resolve(a.obj));return a.obj}function Na(a,b){var c=Oa(a,b);if(c)return c;a=Ma(a);a[b]=Pa();return a[b].promise}function Oa(a,b){var c=Ma(a)[b];if(c){if(c.promise)return c.promise;S(a,b);return c.promise=Promise.resolve(c.obj)}return null}function Ma(a){var b=a.__AMP_SERVICES;b||(b=a.__AMP_SERVICES={});return b}function Ja(a,b){a=a.__AMP_SERVICES&&a.__AMP_SERVICES[b];return!(!a||!a.ctor)}function Pa(){var a=new ea,b=a.promise,c=a.reject;a=a.resolve;b.catch((function(){}));return{obj:null,promise:b,resolve:a,reject:c,context:null,ctor:null}}function Qa(a){var b=Oa(X(a),"amp-analytics-instrumentation");if(b)return b;var c=Ka(a);return c.whenExtensionsKnown().then((function(){var d=c.getExtensionVersion("amp-analytics");return d?R(c.win,"extensions").waitForExtension("amp-analytics",d):null})).then((function(d){return d?Na(X(a),"amp-analytics-instrumentation"):null}))}function Ra(a,b){var c=void 0,d=!1;c=void 0===c?{}:c;d=void 0===d?!0:d;var e=c,f=d;Qa(a).then((function(g){g&&g.triggerEventForTarget(a,b,e,f)}))}var Y;function Sa(a,b,c){function d(m){try{return f(m)}catch(D){var p,v;null==(v=(p=self).__AMP_REPORT_ERROR)||v.call(p,D);throw D}}var e=a,f=c,g=Ta();e.addEventListener(b,d,g?void 0:!1);return function(){var m;null==(m=e)||m.removeEventListener(b,d,g?void 0:!1);d=e=f=null}}function Ta(){if(void 0!==Y)return Y;Y=!1;try{var a={get capture(){Y=!0}};self.addEventListener("test-options",null,a);self.removeEventListener("test-options",null,a)}catch(b){}return Y}function Ua(a,b){return Sa(a,"message",b)}function Va(a,b){var c=b,d=Sa(a,"click",(function(e){try{c(e)}finally{c=null,d()}}));return d}var Wa=function(){function a(k,w,u,r){u=u||{};for(r=k.length;r--;u[k[r]]=w);return u}function b(){this.yy={}}var c=[1,3],d=[1,4],e=[1,18],f=[1,19],g=[1,14],m=[1,15],p=[1,16],v=[1,17],D=[1,21],H=[1,22],y=[5,6,7,10],x=[5,6,7,10,15,16,17,18,19,20,21],I=[5,6,7,10,15,16,17,18,19,20,21,25,27],Q={trace:function(){},yy:{},pb:{error:2,result:3,search_condition:4,EOF:5,OR:6,AND:7,NOT:8,"(":9,")":10,predicate:11,comparison_predicate:12,truthy_predicate:13,scalar_exp:14,EQ:15,DEQ:16,NEQ:17,LT:18,LTE:19,GT:20,GTE:21,atom:22,field_ref:23,literal:24,DOT:25,field_name:26,"[":27,string:28,"]":29,NAME:30,STRING:31,NUMERIC:32,TRUE:33,FALSE:34,NULL:35,$accept:0,$end:1},ga:{2:"error",5:"EOF",6:"OR",7:"AND",8:"NOT",9:"(",10:")",15:"EQ",16:"DEQ",17:"NEQ",18:"LT",19:"LTE",20:"GT",21:"GTE",25:"DOT",27:"[",29:"]",30:"NAME",31:"STRING",32:"NUMERIC",33:"TRUE",34:"FALSE",35:"NULL"},Va:[0,[3,2],[4,3],[4,3],[4,2],[4,3],[4,1],[11,1],[11,1],[12,3],[12,3],[12,3],[12,3],[12,3],[12,3],[12,3],[13,1],[14,1],[14,1],[22,1],[23,3],[23,4],[23,1],[26,1],[28,1],[24,1],[24,1],[24,1],[24,1],[24,1]],performAction:function(k,w,u,r,C,l){var n=l.length-1;switch(C){case 1:return l[n-1];case 2:this.h=l[n-2]||l[n];break;case 3:this.h=l[n-2]&&l[n];break;case 4:this.h=!l[n];break;case 5:this.h=l[n-1];break;case 6:case 7:case 8:case 17:case 18:case 19:this.h=l[n];break;case 9:this.h=l[n-2]===l[n];break;case 10:throw Error('"==" is not allowed, use "="');case 11:this.h=l[n-2]!==l[n];break;case 12:this.h=typeof l[n-2]==typeof l[n]&&l[n-2]<l[n];break;case 13:this.h=typeof l[n-2]==typeof l[n]&&l[n-2]<=l[n];break;case 14:this.h=typeof l[n-2]==typeof l[n]&&l[n-2]>l[n];break;case 15:this.h=typeof l[n-2]==typeof l[n]&&l[n-2]>=l[n];break;case 16:this.h=void 0!==l[n]&&null!==l[n]&&""!==l[n]&&0!==l[n]&&!1!==l[n];break;case 20:this.h="[object Object]"==Object.prototype.toString.call(l[n-2])&&l[n-2].hasOwnProperty(l[n])?l[n-2][l[n]]:null;break;case 21:this.h="[object Object]"==Object.prototype.toString.call(l[n-3])&&l[n-3].hasOwnProperty(l[n-1])?l[n-3][l[n-1]]:null;break;case 22:this.h=void 0!==r[l[n]]?r[l[n]]:null;break;case 23:this.h=k;break;case 24:this.h=k.substring(1,k.length-1);break;case 26:this.h=Number(k);break;case 27:this.h=!0;break;case 28:this.h=!1;break;case 29:this.h=null}},table:[{3:1,4:2,8:c,9:d,11:5,12:6,13:7,14:8,22:9,23:10,24:11,26:12,28:13,30:e,31:f,32:g,33:m,34:p,35:v},{1:[3]},{5:[1,20],6:D,7:H},{4:23,8:c,9:d,11:5,12:6,13:7,14:8,22:9,23:10,24:11,26:12,28:13,30:e,31:f,32:g,33:m,34:p,35:v},{4:24,8:c,9:d,11:5,12:6,13:7,14:8,22:9,23:10,24:11,26:12,28:13,30:e,31:f,32:g,33:m,34:p,35:v},a(y,[2,6]),a(y,[2,7]),a(y,[2,8]),a(y,[2,16],{15:[1,25],16:[1,26],17:[1,27],18:[1,28],19:[1,29],20:[1,30],21:[1,31]}),a(x,[2,17]),a(x,[2,18],{25:[1,32],27:[1,33]}),a(x,[2,19]),a(I,[2,22]),a(x,[2,25]),a(x,[2,26]),a(x,[2,27]),a(x,[2,28]),a(x,[2,29]),a(I,[2,23]),a([5,6,7,10,15,16,17,18,19,20,21,29],[2,24]),{1:[2,1]},{4:34,8:c,9:d,11:5,12:6,13:7,14:8,22:9,23:10,24:11,26:12,28:13,30:e,31:f,32:g,33:m,34:p,35:v},{4:35,8:c,9:d,11:5,12:6,13:7,14:8,22:9,23:10,24:11,26:12,28:13,30:e,31:f,32:g,33:m,34:p,35:v},a(y,[2,4]),{6:D,7:H,10:[1,36]},{14:37,22:9,23:10,24:11,26:12,28:13,30:e,31:f,32:g,33:m,34:p,35:v},{14:38,22:9,23:10,24:11,26:12,28:13,30:e,31:f,32:g,33:m,34:p,35:v},{14:39,22:9,23:10,24:11,26:12,28:13,30:e,31:f,32:g,33:m,34:p,35:v},{14:40,22:9,23:10,24:11,26:12,28:13,30:e,31:f,32:g,33:m,34:p,35:v},{14:41,22:9,23:10,24:11,26:12,28:13,30:e,31:f,32:g,33:m,34:p,35:v},{14:42,22:9,23:10,24:11,26:12,28:13,30:e,31:f,32:g,33:m,34:p,35:v},{14:43,22:9,23:10,24:11,26:12,28:13,30:e,31:f,32:g,33:m,34:p,35:v},{26:44,30:e},{28:45,31:f},a([5,6,10],[2,2],{7:H}),a(y,[2,3]),a(y,[2,5]),a(y,[2,9]),a(y,[2,10]),a(y,[2,11]),a(y,[2,12]),a(y,[2,13]),a(y,[2,14]),a(y,[2,15]),a(I,[2,20]),{29:[1,46]},a(I,[2,21])],defaultActions:{20:[2,1]},parseError:function(k,w){if(w.recoverable)this.trace(k);else throw k=Error(k),k.hash=w,k},parse:function(k){function w(){var aa=z.lex()||1;"number"!==typeof aa&&(aa=u.pb[aa]||aa);return aa}var u=this,r=[0],C=[null],l=[],n=this.table,eb="",ia=0,fb=0,gb=0,$b=l.slice.call(arguments,1),z=Object.create(this.lexer),O={yy:{}};for(T in this.yy)Object.prototype.hasOwnProperty.call(this.yy,T)&&(O.yy[T]=this.yy[T]);z.setInput(k,O.yy);O.yy.lexer=z;O.yy.parser=this;"undefined"==typeof z.yylloc&&(z.yylloc={});var za=z.yylloc;l.push(za);var ac=z.options&&z.options.ranges;this.parseError="function"===typeof O.yy.parseError?O.yy.parseError:Object.getPrototypeOf(this).parseError;for(var B,Aa,P,G,ja,L,hb,ka,U={};;){P=r[r.length-1];if(this.defaultActions[P])G=this.defaultActions[P];else{if(null===B||"undefined"==typeof B)B=w();G=n[P]&&n[P][B]}if("undefined"===typeof G||!G.length||!G[0]){var ib="";ka=[];for(ja in n[P])this.ga[ja]&&2<ja&&ka.push("'"+this.ga[ja]+"'");ib=z.showPosition?"Parse error on line "+(ia+1)+":\n"+z.showPosition()+"\nExpecting "+ka.join(", ")+", got '"+(this.ga[B]||B)+"'":"Parse error on line "+(ia+1)+": Unexpected "+(1==B?"end of input":"'"+(this.ga[B]||B)+"'");this.parseError(ib,{text:z.match,token:this.ga[B]||B,line:z.yylineno,loc:za,expected:ka})}if(G[0]instanceof Array&&1<G.length)throw Error("Parse Error: multiple actions possible at state: "+P+", token: "+B);switch(G[0]){case 1:r.push(B);C.push(z.yytext);l.push(z.yylloc);r.push(G[1]);B=null;Aa?(B=Aa,Aa=null):(fb=z.yyleng,eb=z.yytext,ia=z.yylineno,za=z.yylloc,0<gb&&gb--);break;case 2:L=this.Va[G[1]][1];U.h=C[C.length-L];U.La={first_line:l[l.length-(L||1)].first_line,last_line:l[l.length-1].last_line,first_column:l[l.length-(L||1)].first_column,last_column:l[l.length-1].last_column};ac&&(U.La.range=[l[l.length-(L||1)].range[0],l[l.length-1].range[1]]);var T=this.performAction.apply(U,[eb,fb,ia,O.yy,G[1],C,l].concat($b));if("undefined"!==typeof T)return T;L&&(r=r.slice(0,-2*L),C=C.slice(0,-1*L),l=l.slice(0,-1*L));r.push(this.Va[G[1]][0]);C.push(U.h);l.push(U.La);hb=n[r[r.length-2]][r[r.length-1]];r.push(hb);break;case 3:return!0}}}},jb=function(){return{EOF:1,parseError:function(k,w){if(this.yy.parser)this.yy.parser.parseError(k,w);else throw Error(k)},setInput:function(k,w){this.yy=w||this.yy||{};this._input=k;this._more=this._backtrack=this.done=!1;this.yylineno=this.yyleng=0;this.yytext=this.matched=this.match="";this.conditionStack=["INITIAL"];this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0};this.options.ranges&&(this.yylloc.range=[0,0]);this.offset=0;return this},input:function(){var k=this._input[0];this.yytext+=k;this.yyleng++;this.offset++;this.match+=k;this.matched+=k;k.match(/(?:\r\n?|\n).*/g)?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++;this.options.ranges&&this.yylloc.range[1]++;this._input=this._input.slice(1);return k},unput:function(k){var w=k.length,u=k.split(/(?:\r\n?|\n)/g);this._input=k+this._input;this.yytext=this.yytext.substr(0,this.yytext.length-w);this.offset-=w;var r=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1);this.matched=this.matched.substr(0,this.matched.length-1);u.length-1&&(this.yylineno-=u.length-1);k=this.yylloc.range;this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:u?(u.length===r.length?this.yylloc.first_column:0)+r[r.length-u.length].length-u[0].length:this.yylloc.first_column-w};this.options.ranges&&(this.yylloc.range=[k[0],k[0]+this.yyleng-w]);this.yyleng=this.yytext.length;return this},more:function(){this._more=!0;return this},reject:function(){if(this.options.backtrack_lexer)this._backtrack=!0;else return this.parseError("Lexical error on line "+(this.yylineno+1)+". You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).\n"+this.showPosition(),{text:"",token:null,line:this.yylineno});return this},less:function(k){this.unput(this.match.slice(k))},pastInput:function(){var k=this.matched.substr(0,this.matched.length-this.match.length);return(20<k.length?"...":"")+k.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var k=this.match;20>k.length&&(k+=this._input.substr(0,20-k.length));return(k.substr(0,20)+(20<k.length?"...":"")).replace(/\n/g,"")},showPosition:function(){var k=this.pastInput(),w=Array(k.length+1).join("-");return k+this.upcomingInput()+"\n"+w+"^"},test_match:function(k,w){var u;if(this.options.backtrack_lexer){var r={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done};this.options.ranges&&(r.yylloc.range=this.yylloc.range.slice(0))}if(u=k[0].match(/(?:\r\n?|\n).*/g))this.yylineno+=u.length;this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:u?u[u.length-1].length-u[u.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+k[0].length};this.yytext+=k[0];this.match+=k[0];this.matches=k;this.yyleng=this.yytext.length;this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]);this._backtrack=this._more=!1;this._input=this._input.slice(k[0].length);this.matched+=k[0];k=this.performAction.call(this,this.yy,this,w,this.conditionStack[this.conditionStack.length-1]);this.done&&this._input&&(this.done=!1);if(k)return k;if(this._backtrack)for(var C in r)this[C]=r[C];return!1},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var k;this._more||(this.match=this.yytext="");for(var w=this._currentRules(),u=0;u<w.length;u++)if((k=this._input.match(this.rules[w[u]]))&&(!r||k[0].length>r[0].length)){var r=k;var C=u;if(this.options.backtrack_lexer){r=this.test_match(k,w[u]);if(!1!==r)return r;if(this._backtrack)r=!1;else return!1}else if(!this.options.flex)break}return r?(r=this.test_match(r,w[C]),!1!==r?r:!1):""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var k=this.next();return k?k:this.lex()},begin:function(k){this.conditionStack.push(k)},popState:function(){return 0<this.conditionStack.length-1?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(k){k=this.conditionStack.length-1-Math.abs(k||0);return 0<=k?this.conditionStack[k]:"INITIAL"},pushState:function(k){this.begin(k)},stateStackSize:function(){return this.conditionStack.length},options:{},performAction:function(k,w,u){switch(u){case 1:return 7;case 2:return 6;case 3:return 8;case 4:return 35;case 5:return 33;case 6:return 33;case 7:return 34;case 8:return 34;case 9:return 9;case 10:return 10;case 11:return 27;case 12:return 29;case 13:return"|";case 14:return 19;case 15:return 18;case 16:return 21;case 17:return 20;case 18:return 17;case 19:return 16;case 20:return 15;case 21:return 32;case 22:return 30;case 23:return 31;case 24:return 31;case 25:return 25;case 26:return"INVALID";case 27:return 5}},rules:[/^(?:\s+)/,/^(?:AND\b)/,/^(?:OR\b)/,/^(?:NOT\b)/,/^(?:NULL\b)/,/^(?:TRUE\b)/,/^(?:true\b)/,/^(?:FALSE\b)/,/^(?:false\b)/,/^(?:\()/,/^(?:\))/,/^(?:\[)/,/^(?:\])/,/^(?:\|)/,/^(?:<=)/,/^(?:<)/,/^(?:>=)/,/^(?:>)/,/^(?:!=)/,/^(?:==)/,/^(?:=)/,/^(?:-?[0-9]+(\.[0-9]+)?\b)/,/^(?:[a-zA-Z_][a-zA-Z0-9_]*)/,/^(?:'[^']*')/,/^(?:"[^"]*")/,/^(?:\.)/,/^(?:.)/,/^(?:$)/],conditions:{INITIAL:{rules:[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27],inclusive:!0}}}}();Q.lexer=jb;b.prototype=Q;Q.Parser=b;return new b}();function Xa(){this.Sa=this.cache=null}Xa.prototype.evaluate=function(a,b){this.Sa!==b&&(this.Sa=b,this.cache=Object.create(null));if(!la.call(this.cache,a)){var c=this.cache;a:{try{Wa.yy=b;var d=!!Wa.parse(a);break a}finally{Wa.yy=null}d=void 0}c[a]=d}return this.cache[a]};function Ya(a){if(a.__AMP__EXPERIMENT_TOGGLES)return a.__AMP__EXPERIMENT_TOGGLES;a.__AMP__EXPERIMENT_TOGGLES=Object.create(null);var c,d,e,g,b=a.__AMP__EXPERIMENT_TOGGLES,f=Object.assign({},null!=(d=a.AMP_CONFIG)?d:{},null!=(e=a.AMP_EXP)?e:JSON.parse((null==(c=a.__AMP_EXP)?void 0:c.textContent)||"{}"));for(g in f){var m=f[g];"number"===typeof m&&0<=m&&1>=m&&(b[g]=Math.random()<m)}var p,v=null==(p=a.AMP_CONFIG)?void 0:p["allow-doc-opt-in"];if(A(v)&&v.length){var D=a.document.head.querySelector('meta[name="amp-experiments-opt-in"]');if(D){var H=D.getAttribute("content").split(",");d=q(H);for(c=d.next();!c.done;c=d.next()){var y=c.value;v.includes(y)&&(b[y]=!0)}}}c=Object;d=c.assign;e="";try{"localStorage"in a&&(e=a.localStorage.getItem("amp-experiment-toggles"))}catch(jb){M().warn("EXPERIMENTS","Failed to retrieve experiments from localStorage.")}var x;e=(null==(x=e)?void 0:x.split(/\s*,\s*/g))||[];x=Object.create(null);e=q(e);for(g=e.next();!g.done;g=e.next())(g=g.value)&&("-"==g[0]?x[g.substr(1)]=!1:x[g]=!0);d.call(c,b,x);var I,Q=null==(I=a.AMP_CONFIG)?void 0:I["allow-url-opt-in"];if(A(Q)&&Q.length)for(a=Da(a.location.originalHash||a.location.hash),I=q(Q),c=I.next();!c.done;c=I.next())x=c.value,c=a["e-"+x],"1"==c&&(b[x]=!0),"0"==c&&(b[x]=!1);return b}function Za(){this.ab=100;this.va=this.Ga=0;this.ja=Object.create(null)}Za.prototype.has=function(a){return!!this.ja[a]};Za.prototype.get=function(a){var b=this.ja[a];if(b)return b.access=++this.va,b.payload};Za.prototype.put=function(a,b){this.has(a)||this.Ga++;this.ja[a]={payload:b,access:this.va};if(!(this.Ga<=this.ab)){a=this.ja;var d,c=this.va+1;for(d in a){var e=a[d].access;if(e<c){c=e;var f=d}}void 0!==f&&(delete a[f],this.Ga--)}};var ab,bb,$a=new Set(["c","v","a","ad"]);function cb(a){return"string"==typeof a?Z(a):a}function Z(a){ab||(ab=self.document.createElement("a"),bb=self.__AMP_URL_CACHE||(self.__AMP_URL_CACHE=new Za));var b=ab,c=bb;if(c&&c.has(a))a=c.get(a);else{b.href=a;b.protocol||(b.href=b.href);var d={href:b.href,protocol:b.protocol,host:b.host,hostname:b.hostname,port:"0"==b.port?"":b.port,pathname:b.pathname,search:b.search,hash:b.hash,origin:null};"/"!==d.pathname[0]&&(d.pathname="/"+d.pathname);if("http:"==d.protocol&&80==d.port||"https:"==d.protocol&&443==d.port)d.port="",d.host=d.hostname;d.origin=b.origin&&"null"!=b.origin?b.origin:"data:"!=d.protocol&&d.host?d.protocol+"//"+d.host:d.href;c&&c.put(a,d);a=d}return a}function db(a){var c,b=[];for(c in a){var d=a[c];if(null!=d){d=A(d)?d:[d];for(var e=0;e<d.length;e++){var f=b,g=f.push;var m=d[e];m=encodeURIComponent(c)+"="+encodeURIComponent(m);g.call(f,m)}}}return b.join("&")}function kb(a,b){var c=void 0===c?"source":c;N(null!=a,"%s %s must be available",b,c);var d=cb(a);var e;(e="https:"==d.protocol||"localhost"==d.hostname||"127.0.0.1"==d.hostname)||(d=d.hostname,e=d.length-10,e=0<=e&&d.indexOf(".localhost",e)==e);N(e||/^\/\//.test(a),'%s %s must start with "https://" or "//" or be relative and served from either https or from localhost. Invalid value: %s',b,c,a)}function lb(a){var b=a.indexOf("#");return-1==b?a:a.substring(0,b)}function mb(a){return ya.cdnProxyRegex.test(cb(a).origin)}function nb(a){a=cb(a);if(!mb(a))return a.href;var b=a.pathname.split("/");N($a.has(b[1]),"Unknown path prefix in url %s",a.href);var c=b[2],d="s"==c?"https://"+decodeURIComponent(b[3]):"http://"+decodeURIComponent(c);N(0<d.indexOf("."),"Expected a . in origin %s",d);b.splice(1,"s"==c?3:2);b=d+b.join("/");d=(d=a.search)&&"?"!=d?(d=d.replace(/[?&](amp_(js[^&=]*|gsa|r|kit)|usqp)\b[^&]*/g,"").replace(/^[?&]/,""))?"?"+d:"":"";return b+d+(a.hash||"")}function ob(a,b,c){this.ampdoc=a;this.F=c;this.V=N(b.authorization,'"authorization" URL must be specified');kb(this.V,'"authorization"');this.$=!b.noPingback;this.ra=b.pingback;this.$&&(N(this.ra,'"pingback" URL must be specified'),kb(this.ra,'"pingback"'));b.authorizationTimeout?(c=b.authorizationTimeout,N("number"==typeof c,'"authorizationTimeout" must be a number'),Ga().development||(c=Math.min(c,3e3))):c=3e3;this.xa=c;this.T=R(a.win,"xhr");this.C=V(a.win)}h=ob.prototype;h.getConfig=function(){return{authorizationUrl:this.V,pingbackEnabled:this.$,pingbackUrl:this.ra,authorizationTimeout:this.xa}};h.getAuthorizationUrl=function(){return this.V};h.isAuthorizationEnabled=function(){return!0};h.getAuthorizationTimeout=function(){return this.xa};h.authorize=function(){var a=this;M().fine("amp-access-client","Start authorization via ",this.V);return this.F.buildUrl(this.V,!1).then((function(b){M().fine("amp-access-client","Authorization URL: ",b);return a.C.timeoutPromise(a.xa,a.T.fetchJson(b,{credentials:"include"})).then((function(c){return c.json()}))}))};h.isPingbackEnabled=function(){return this.$};h.pingback=function(){var a=this;return this.F.buildUrl(this.ra,!0).then((function(b){M().fine("amp-access-client","Pingback URL: ",b);return a.T.sendSignal(b,{method:"POST",credentials:"include",headers:E({"Content-Type":"application/x-www-form-urlencoded"}),body:""})}))};h.postAction=function(){};function pb(a){var b=!1;void 0===b&&(b=a.hasAttribute("hidden"));b?a.removeAttribute("hidden"):a.setAttribute("hidden","")}function qb(a,b,c){this.$a=a;this.Ha=b;this.A=c;this.R=this.Ia=null;this.Oa=this.ib.bind(this);this.ob=0;this.Ka={}}h=qb.prototype;h.connect=function(a){if(this.R)throw Error("already connected");this.R=a;this.$a.addEventListener("message",this.Oa)};h.disconnect=function(){this.R&&(this.R=null,this.$a.removeEventListener("message",this.Oa))};h.isConnected=function(){return null!=this.A};h.getTarget=function(){var a=rb(this);if(!a)throw Error("not connected");return a};function rb(a){a.R&&!a.Ia&&(a.Ia="function"==typeof a.Ha?a.Ha():a.Ha);return a.Ia}h.getTargetOrigin=function(){if(null==this.A)throw Error("not connected");return this.A};h.sendCommand=function(a,b){sb(this,void 0,a,b)};h.sendCommandRsvp=function(a,b){var c=String(++this.ob),d=null,e=new Promise((function(f){d=f}));this.Ka[c]={promise:e,resolver:d};sb(this,c,a,b);return e};function sb(a,b,c,d){var e=a.getTarget();a="connect"==c?null!=a.A?a.A:"*":a.getTargetOrigin();e.postMessage({sentinel:"__AMP__",_rsvp:b,cmd:c,payload:d||null},a)}h.ib=function(a){var b=this,c=a.data;if(c&&"__AMP__"==c.sentinel){var d=a.origin,e=c.cmd,f=c.payload||null;null==this.A&&"start"==e&&(this.A=d);null==this.A&&a.source&&rb(this)==a.source&&(this.A=d);if(d==this.A){var g=c._rsvp,m=!!g&&"rsvp"!=e;a=this.Aa(g,e,f);m&&Promise.resolve(a).then((function(p){sb(b,g,"rsvp",{result:p})}),(function(p){sb(b,g,"rsvp",{error:String(p)})}))}}};h.Aa=function(a,b,c){if("rsvp"==b){var d=a&&this.Ka[a];d&&("error"in c?d.resolver(Promise.reject(Error(c.error))):d.resolver(c.result),delete this.Ka[a])}else return this.R(b,c)};function tb(a,b,c){var d=this;this.ampdoc=a;this.F=c;this.cb=b;this.C=V(a.win);this.oa=N(b.iframeSrc,'"iframeSrc" URL must be specified');kb(this.oa,'"iframeSrc"');(this.Y=b.iframeVars||null)&&N(A(this.Y),'"iframeVars" must be an array');this.eb=N(b.defaultResponse,'"defaultResponse" must be specified');this.A=Z(this.oa).origin;this.ya=this.ka=null;this.Z=a.win.document.createElement("iframe");pb(this.Z);this.ca=new qb(this.ampdoc.win,(function(){return d.Z.contentWindow}),this.A);this.Qa=null}h=tb.prototype;h.disconnect=function(){this.ca.disconnect();this.ampdoc.getBody().removeChild(this.Z)};h.getConfig=function(){return{iframeSrc:this.oa,iframeVars:this.Y}};h.isAuthorizationEnabled=function(){return!0};h.authorize=function(){return Promise.race([ub(this),vb(this)])};h.isPingbackEnabled=function(){return!0};h.pingback=function(){var a=this;return this.connect().then((function(){return a.ca.sendCommandRsvp("pingback",{})}))};h.postAction=function(){wb(this,null)};h.connect=function(){if(!this.ya){var a=new ea;this.ya=a.promise;this.ka=a.resolve;this.Qa=xb(this);this.ca.connect(this.Aa.bind(this));this.ampdoc.getBody().appendChild(this.Z);this.Z.src=this.oa}return this.ya};function xb(a){return new Promise((function(b){var c=JSON.parse(JSON.stringify(a.cb));if(a.Y){var d=a.Y.join("&"),e=a.F.collectUrlVars(d,!1);b(e.then((function(f){c.iframeVars=f;return c})))}else b(c)}))}function ub(a){var b=3e3*(Ga().development?2:1);return a.C.promise(b).then((function(){return yb(a)||a.eb}))}function vb(a){return a.connect().then((function(){return a.ca.sendCommandRsvp("authorize",{})})).then((function(b){b&&t().then((function(){return wb(a,b)}));return b}))}function yb(a){var b=a.ampdoc.win,c=b.sessionStorage||b.localStorage;if(!c)return null;try{var d=c.getItem("amp-access-iframe");if(!d)return null;var e=JSON.parse(d);return e.t+6048e5<a.ampdoc.win.Date.now()?null:e.d||null}catch(f){M().error("amp-access-iframe","failed to restore access response: ",f);try{c.removeItem("amp-access-iframe")}catch(g){}return null}}function wb(a,b){var c=a.ampdoc.win;if(c=c.sessionStorage||c.localStorage)try{b?c.setItem("amp-access-iframe",JSON.stringify(E({t:a.ampdoc.win.Date.now(),d:b}))):c.removeItem("amp-access-iframe")}catch(d){M().error("amp-access-iframe","failed to store access response: ",d)}}h.Aa=function(a){var b=this;"connect"==a&&this.Qa.then((function(c){b.ca.sendCommandRsvp("start",{protocol:"amp-access",config:c}).then((function(){b.ka&&(b.ka(),b.ka=null)}))}))};function zb(a,b,c){this.ampdoc=a;this.F=c;this.wa=b.authorizationFallbackResponse||null;this.G=mb(a.win.location)}h=zb.prototype;h.getConfig=function(){return{authorizationResponse:this.wa}};h.isAuthorizationEnabled=function(){return!!this.wa&&!this.G};h.authorize=function(){M().fine("amp-access-other","Use the authorization fallback for type=other");return Promise.resolve(this.wa)};h.isPingbackEnabled=function(){return!1};h.pingback=function(){M().fine("amp-access-other","Ignore pingback");return t()};h.postAction=function(){};var Ab=["GET","POST"];function Bb(a,b){var c=Object.assign({},b),d=b.body;if(d&&"function"==typeof d.getFormData){var e=b.body;c.headers["Content-Type"]="multipart/form-data;charset=utf-8";b=e.entries();d=[];for(var f=b.next();!f.done;f=b.next())d.push(f.value);c.body=d}return{input:a,init:c}}function Cb(a,b){qa("[object Object]"===ma.call(a),a);if("document"!=b)return new Response(a.body,a.init);var c=Object.create(null),d={status:200,statusText:"OK",getResponseHeader:function(f){return c[String(f).toLowerCase()]||null}};if(a.init){var e=a.init;A(e.headers)&&e.headers.forEach((function(f){var g=f[1];c[String(f[0]).toLowerCase()]=String(g)}));e.status&&(d.status=parseInt(e.status,10));e.statusText&&(d.statusText=String(e.statusText))}return new Response(a.body?String(a.body):"",d)}function Db(a,b,c,d){if(!b)return t();var e=d.prerenderSafe?t():b.whenFirstVisible(),f=W(b,"viewer"),g=mb(c),m=f.hasCapability("xhrInterceptor"),p=d.bypassInterceptorForDev&&!1;return g||!m||p||!b.getRootNode().documentElement.hasAttribute("allow-xhr-interception")?e:e.then((function(){return f.isTrustedViewer()})).then((function(v){if(v||Ya(a)["untrusted-xhr-interception"]){var D=E({originalRequest:Bb(c,d)});return f.sendMessageAwaitResponse("xhr",D).then((function(H){return Cb(H,d.responseType)}))}}))}function Eb(a,b,c){!1!==c.ampCors&&(c=Z(b),c=Da(c.search),N(!("__amp_source_origin"in c),"Source origin is not allowed in %s",b),a=Z(nb(a.location.href)).origin,a=encodeURIComponent("__amp_source_origin")+"="+encodeURIComponent(a))&&(b=b.split("#",2),c=b[0].split("?",2),a=c[0]+(c[1]?"?"+c[1]+"&"+a:"?"+a),b=a+=b[1]?"#"+b[1]:"");return b}function Fb(a){a=a||{};var b=a.method;void 0===b?b="GET":(b=b.toUpperCase(),Ab.includes(b));a.method=b;a.headers=a.headers||E({});a.headers.Accept="text/html";return a}function Gb(a,b,c){c=c||{};var d=a.origin||Z(a.location.href).origin;a=Z(b).origin;d==a&&(c.headers=c.headers||{},c.headers["AMP-Same-Origin"]="true");return c}function Hb(a){return new Promise((function(b){if(a.ok)return b(a);b=a.status;var c=K().createError("HTTP error "+b);c.retriable=415==b||500<=b&&600>b;c.response=a;throw c}))}function Ib(a,b,c){var d=Fb(c);d=Gb(a,b,d);b=Eb(a,b,d);c=R(a,"ampdoc");c=c.isSingleDoc()?c.getSingleDoc():null;d.responseType="document";return Db(a,c,b,d).then((function(e){return e?e.text().then((function(f){return(new DOMParser).parseFromString(f,"text/html")})):Jb(b,d).then((function(f){return f.xhr.responseXML}))}))}function Jb(a,b){return new Promise((function(c,d){var e=new XMLHttpRequest;e.open(b.method||"GET",a,!0);e.withCredentials="include"==b.credentials;e.responseType="document";for(var f in b.headers)e.setRequestHeader(f,b.headers[f]);e.onreadystatechange=function(){if(!(2>e.readyState))if(100>e.status||599<e.status)e.onreadystatechange=null,d(K().createExpectedError("Unknown HTTP status "+e.status));else if(4==e.readyState){var g={status:e.status,statusText:e.statusText,headers:Kb(e.getAllResponseHeaders())};g=new Response("",g);g=Hb(g).then((function(m){return{response:m,xhr:e}}));c(g)}};e.onerror=function(){d(K().createExpectedError("Request failure"))};e.onabort=function(){d(K().createExpectedError("Request aborted"))};"POST"==b.method?e.send(b.body):e.send()}))}function Kb(a){var b=E({});a.replace(/\r?\n[\t ]+/g," ").split(/\r?\n/).forEach((function(c){var d=c.split(":"),e=d.shift().trim();e&&(d=d.join(":").trim(),b[e]=d)}));return b}function Lb(a,b,c){this.ampdoc=a;this.F=c;this.o=new ob(a,b,c);this.T=R(a.win,"xhr");this.C=V(a.win);this.S=R(a.win,"vsync");this.H=a.getMetaByName("i-amphtml-access-state");var d=!!Ya(a.win)["amp-access-server"];this.G=mb(a.win.location)||d;this.fa=(d?a.getParam("serverAccessService"):null)||lb(a.win.location.href)}h=Lb.prototype;h.getConfig=function(){return{client:this.o.getConfig(),proxy:this.G,serverState:this.H}};h.isAuthorizationEnabled=function(){return!0};h.authorize=function(){var a=this;M().fine("amp-access-server","Start authorization with ",this.G?"proxy":"non-proxy",this.H,this.o.getAuthorizationUrl());if(!this.G||!this.H)return M().fine("amp-access-server","Proceed via client protocol"),this.o.authorize();M().fine("amp-access-server","Proceed via server protocol");return this.F.collectUrlVars(this.o.getAuthorizationUrl(),!1).then((function(b){var d,c={};for(d in b)null!=b[d]&&(c[d]=String(b[d]));b=E({url:lb(a.ampdoc.win.location.href),state:a.H,vars:c});M().fine("amp-access-server","Authorization request: ",a.fa,b);return a.C.timeoutPromise(a.o.getAuthorizationTimeout(),Ib(a.ampdoc.win,a.fa,{method:"POST",body:"request="+encodeURIComponent(JSON.stringify(b)),headers:E({"Content-Type":"application/x-www-form-urlencoded"})}))})).then((function(b){M().fine("amp-access-server","Authorization response: ",b);var c=b.querySelector('script[id="amp-access-data"]').textContent,d=JSON.parse(c);M().fine("amp-access-server","- access data: ",d);return a.Fa(b).then((function(){return d}))}))};h.isPingbackEnabled=function(){return this.o.isPingbackEnabled()};h.pingback=function(){return this.o.pingback()};h.postAction=function(){};h.Fa=function(a){var b=this,c=a.querySelectorAll("[i-amphtml-access-id]");M().fine("amp-access-server","- access sections: ",c);return this.S.mutatePromise((function(){for(var d=0;d<c.length;d++){var e=c[d],f=e.getAttribute("i-amphtml-access-id"),g=b.ampdoc.getRootNode(),m=g.querySelector;var p=String(f).replace(ta,ua);(g=m.call(g,'[i-amphtml-access-id="'+p+'"]'))?g.parentElement.replaceChild(b.ampdoc.win.document.importNode(e,!0),g):M().warn("amp-access-server","Section not found: ",f)}}))};function Mb(a){if("undefined"!==typeof TextDecoder)return new TextDecoder("utf-8").decode(a);a=new Uint8Array(a.buffer||a);for(var b=Array(a.length),c=0;c<a.length;c++)b[c]=String.fromCharCode(a[c]);a=b.join("");return decodeURIComponent(escape(a))}function Nb(a){for(var b=new Uint8Array(a.length),c=0;c<a.length;c++){var d=a.charCodeAt(c);b[c]=d}return b}var Ob={"-":"+",_:"/",".":"="};function Pb(a){var b=atob(a.replace(/[-_.]/g,(function(c){return Ob[c]})));return Nb(b)}function Qb(a){this.win=a;this.ta=a.crypto&&(a.crypto.subtle||a.crypto.webkitSubtle)||null}Qb.prototype.decode=function(a){return Rb(a).payload};Qb.prototype.isVerificationSupported=function(){return!!this.ta};Qb.prototype.decodeAndVerify=function(a,b){var c=this;if(!this.ta)throw Error("Crypto is not supported on this platform");return new Promise((function(d){return d(Rb(a))})).then((function(d){var e=d.header.alg;if(!e||"RS256"!=e)throw Error("Only alg=RS256 is supported");return Sb(c,b).then((function(f){var g=Pb(d.sig);return c.ta.verify({name:"RSASSA-PKCS1-v1_5"},f,g,Nb(d.verifiable))})).then((function(f){if(f)return d.payload;throw Error("Signature verification failed")}))}))};function Rb(a){function b(){throw Error('Invalid token: "'+a+'"')}var c=a.split(".");3!=c.length&&b();var d=Pb(c[0]),e=Pb(c[1]);return{header:sa(Mb(d),b),payload:sa(Mb(e),b),verifiable:c[0]+"."+c[1],sig:c[2]}}function Sb(a,b){return b.then((function(c){var d=a.ta,e=d.importKey;c=c.trim().replace(/^-+BEGIN[^-]*-+/,"").replace(/-+END[^-]*-+$/,"").replace(/[\r\n]/g,"").trim();c=Nb(atob(c));return e.call(d,"spki",c,{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}},!1,["verify"])}))}function Tb(a,b,c){this.ampdoc=a;this.F=c;this.o=new ob(a,b,c);this.T=R(a.win,"xhr");this.C=V(a.win);this.S=R(a.win,"vsync");this.H=a.getMetaByName("i-amphtml-access-state");c=!!Ya(a.win)["amp-access-server-jwt"];this.G=mb(a.win.location)||c;this.fa=(c?a.getParam("serverAccessService"):null)||lb(a.win.location.href);this.aa=b.publicKey||null;this.O=b.publicKeyUrl||null;N(this.aa||this.O,'"publicKey" or "publicKeyUrl" must be specified');this.O&&kb(this.O,'"publicKeyUrl"');this.aa&&this.O&&K().warn("amp-access-server-jwt",'Both "publicKey" and "publicKeyUrl" specified. The "publicKeyUrl" will be ignored.');this.Ba=new Qb(a.win)}h=Tb.prototype;h.getConfig=function(){return{client:this.o.getConfig(),proxy:this.G,serverState:this.H,publicKey:this.aa,publicKeyUrl:this.O}};h.isAuthorizationEnabled=function(){return!0};h.authorize=function(){M().fine("amp-access-server-jwt","Start authorization with ",this.G?"proxy":"non-proxy",this.H,this.o.getAuthorizationUrl());return this.G&&this.H?Ub(this):Vb(this)};h.isPingbackEnabled=function(){return this.o.isPingbackEnabled()};h.pingback=function(){return this.o.pingback()};h.postAction=function(){};function Wb(a){var b=a.F.buildUrl(a.o.getAuthorizationUrl(),!1).then((function(c){M().fine("amp-access-server-jwt","Authorization URL: ",c);return a.C.timeoutPromise(3e3,a.T.fetchText(c,{credentials:"include"}))})).then((function(c){return c.text()})).then((function(c){var d=a.Ba.decode(c);N(d.amp_authdata,'"amp_authdata" must be present in JWT');return{encoded:c,jwt:d}}));Ga().development&&(a.Ba.isVerificationSupported()?b=b.then((function(c){return a.Ba.decodeAndVerify(c.encoded,Xb(a)).then((function(){return c}))})):K().warn("amp-access-server-jwt","Cannot verify signature on this browser since it doesn't support WebCrypto APIs"),b=b.then((function(c){var d=c.jwt,e=Date.now(),f=d.exp;N(f,'"exp" field must be specified');N(1e3*parseFloat(f)>e,"token has expired: %s",f);d=d.aud;N(d,'"aud" field must be specified');e=!1;if(A(d)){for(f=0;f<d.length;f++)if("ampproject.org"==d[f]){e=!0;break}}else e="ampproject.org"==d;N(e,'"aud" must be "%s": %s',"ampproject.org",d);return c})));return b.catch((function(c){throw K().createError("JWT fetch or validation failed: ",c)}))}function Xb(a){return a.aa?Promise.resolve(a.aa):a.T.fetchText(a.O).then((function(b){return b.text()}))}function Vb(a){M().fine("amp-access-server-jwt","Proceed via client protocol via ",a.o.getAuthorizationUrl());return Wb(a).then((function(b){return b.jwt.amp_authdata}))}function Ub(a){M().fine("amp-access-server-jwt","Proceed via server protocol");return Wb(a).then((function(b){var c=b.encoded,d=b.jwt.amp_authdata;b=db(E({url:lb(a.ampdoc.win.location.href),state:a.H,jwt:c}));M().fine("amp-access-server-jwt","Authorization request: ",a.fa,b);M().fine("amp-access-server-jwt","- access data: ",d);return a.C.timeoutPromise(3e3,Ib(a.ampdoc.win,a.fa,{method:"POST",body:b,headers:E({"Content-Type":"application/x-www-form-urlencoded"})})).then((function(e){M().fine("amp-access-server-jwt","Authorization response: ",e);return a.Fa(e)})).then((function(){return d}))}))}h.Fa=function(a){var b=this,c=a.querySelectorAll("[i-amphtml-access-id]");M().fine("amp-access-server-jwt","- access sections: ",c);return this.S.mutatePromise((function(){for(var d=0;d<c.length;d++){var e=c[d],f=e.getAttribute("i-amphtml-access-id"),g=b.ampdoc.getRootNode().querySelector('[i-amphtml-access-id="'+String(f).replace(ta,ua)+'"]');g?g.parentElement.replaceChild(b.ampdoc.win.document.importNode(e,!0),g):M().warn("amp-access-server-jwt","Section not found: ",f)}}))};function Yb(a,b){this.ampdoc=a;this.ua=N(b.vendor,'"vendor" name must be specified');this.rb=b[this.ua]||{};this.$=!b.noPingback;a=new ea;this.Ya=a.promise;this.Ja=a.resolve}h=Yb.prototype;h.getVendorName=function(){return this.ua};h.getConfig=function(){return this.rb};h.registerVendor=function(a){N(this.Ja,"Vendor has already been registered");this.Ja(a);this.Ja=null};h.isAuthorizationEnabled=function(){return!0};h.authorize=function(){M().fine("amp-access-vendor","Start authorization via ",this.ua);return this.Ya.then((function(a){return a.authorize()}))};h.isPingbackEnabled=function(){return this.$};h.pingback=function(){M().fine("amp-access-vendor","Pingback via ",this.ua);return this.Ya.then((function(a){return a.pingback()}))};h.postAction=function(){};function Zb(a,b,c){try{var d=a.open(b,"_blank",c)}catch(g){M().error("DOM","Failed to open url on target: ","_blank",g)}var e;if(!(e=d||!1)){e=c||"";var f;"number"!==typeof f&&(f=0);e=f+8>e.length?!1:-1!==e.indexOf("noopener",f)}e||(d=a.open(b,"_top"));return d}var bc=/RETURN_URL/;function cc(a,b){var c=W(a,"viewer");return parseInt(a.getParam("dialog"),10)?new dc(c,b):new ec(a.win,c,b)}function fc(a,b){return cc(a,b).open()}function dc(a,b){this.viewer=a;this.urlOrPromise=b}dc.prototype.getLoginUrl=function(){return("string"==typeof this.urlOrPromise?Promise.resolve(this.urlOrPromise):this.urlOrPromise).then((function(a){return gc(a,"RETURN_URL")}))};dc.prototype.open=function(){var a=this;return this.getLoginUrl().then((function(b){M().fine("amp-access-login","Open viewer dialog: ",b);return a.viewer.sendMessageAwaitResponse("openDialog",E({url:b}))}))};function ec(a,b,c){this.win=a;this.viewer=b;this.urlOrPromise=c;this.pa=this.N=this.W=this.B=this.Ea=this.ea=null}ec.prototype.open=function(){var a=this;N(!this.ea,"Dialog already opened");return new Promise((function(b,c){a.ea=b;a.Ea=c;hc(a)})).then((function(b){ic(a);return b}),(function(b){ic(a);throw b}))};function ic(a){a.ea=null;a.Ea=null;if(a.B){try{a.B.close()}catch(b){}a.B=null}a.N&&(a.win.clearInterval(a.N),a.N=null);a.pa&&(a.pa(),a.pa=null)}ec.prototype.getLoginUrl=function(){var a=this;return("string"==typeof this.urlOrPromise?Promise.resolve(this.urlOrPromise):this.urlOrPromise).then((function(b){return gc(b,jc(a))}))};function hc(a){var b=a.win.screen,c=Math.floor(Math.min(700,.9*b.width)),d=Math.floor(Math.min(450,.9*b.height)),e=Math.floor((b.width-c)/2);b=Math.floor((b.height-d)/2);var f="height="+d+",width="+c+",left="+e+",top="+b+",resizable=yes,scrollbars=yes",g=jc(a);a.W=null;if("string"==typeof a.urlOrPromise){var m=gc(a.urlOrPromise,g);M().fine("amp-access-login","Open dialog: ",m,g,c,d,e,b);a.B=Zb(a.win,m,f);a.B&&(a.W=t())}else M().fine("amp-access-login","Open dialog: ","about:blank",g,c,d,e,b),a.B=Zb(a.win,"",f),a.B&&(a.W=a.urlOrPromise.then((function(p){p=gc(p,g);M().fine("amp-access-login","Set dialog url: ",p);a.B.location.replace(p)}),(function(p){throw Error("failed to resolve url: "+p)})));a.W?a.W.then((function(){kc(a,g)}),(function(p){lc(a,null,p)})):lc(a,null,Error("failed to open dialog"))}function kc(a,b){var c=Z(b).origin;a.N=a.win.setInterval((function(){a.B.closed&&(a.win.clearInterval(a.N),a.N=null,a.win.setTimeout((function(){lc(a,"")}),3e3))}),500);a.pa=Ua(a.win,(function(d){M().fine("amp-access-login","MESSAGE:",d);d.origin==c&&d.data&&"amp"==d.data.sentinel&&(M().fine("amp-access-login","Received message from dialog: ",d.data),"result"==d.data.type&&(a.B&&a.B.postMessage(E({sentinel:"amp",type:"result-ack"}),c),lc(a,d.data.result)))}))}function lc(a,b,c){a.ea&&(M().fine("amp-access-login","Login done: ",b,c),c?a.Ea(c):a.ea(b),ic(a))}function jc(a){var b=a.viewer.getResolvedViewerUrl();return ya.cdn+"/v0/amp-login-done-0.1.html?url="+encodeURIComponent(b)}function gc(a,b){return bc.test(a)?a.replace(bc,encodeURIComponent(b)):a+(-1==a.indexOf("?")?"?":"&")+"return="+encodeURIComponent(b)}function mc(a,b,c,d,e,f){this.ampdoc=a;this.ma=c;this.sa=d;this.Ca=e;this.J=f;this.Ra=!!Ya(a.win)["amp-access-server"];this.jb=!!Ya(a.win)["amp-access-jwt"];var g=b.type;N(!g||"client"===g||"iframe"===g||"server"===g||"vendor"===g||"other"===g,"Unknown access type: "+g);g||(g=b.vendor?"vendor":"client");"server"!=g||this.Ra||(K().warn("amp-access",'Experiment "amp-access-server" is not enabled.'),g="client");"client"==g&&this.Ra&&(K().info("amp-access","Forcing access type: SERVER"),g="server");this.ha=g;g=b.login;var m={};if(g)if("string"==typeof g)m[""]=g;else if("[object Object]"===ma.call(g))for(var p in g)m[p]=g[p];else N(!1,'"login" must be either a single URL or a map of URLs');for(var v in m)kb(m[v],this.J);this.ba=m;this.Na=b.authorizationFallbackResponse;this.lb=b.namespace||null;this.K=nc(this,b);this.Xa=La(f,"url-replace");this.nb=fc.bind(null,a);this.ia=null;a=new ea;this.gb=a.promise;this.za=a.resolve;this.Ua={};this.L=null;this.Ta=0}h=mc.prototype;h.getNamespace=function(){return this.lb};h.getType=function(){return this.ha};h.getAdapter=function(){return this.K};h.getAuthResponse=function(){return this.ia};function nc(a,b){var c={buildUrl:a.buildUrl.bind(a),collectUrlVars:a.collectUrlVars.bind(a)},d=a.jb&&!0===b.jwt;switch(a.ha){case"client":return d?new Tb(a.ampdoc,b,c):new ob(a.ampdoc,b,c);case"iframe":return new tb(a.ampdoc,b,c);case"server":return d?new Tb(a.ampdoc,b,c):new Lb(a.ampdoc,b,c);case"vendor":return new Yb(a.ampdoc,b);case"other":return new zb(a.ampdoc,b,c)}throw M().createError("Unsupported access type: ",a.ha)}h.getAdapterConfig=function(){return this.K.getConfig()};h.whenFirstAuthorized=function(){return this.gb};h.na=function(){var a=this.ampdoc.getRootNode();return a.documentElement||a.body||a};h.I=function(a){Ra(this.na(),a)};h.start=function(){M().fine("amp-access","config:",this.ha,this.ba,this.K.getConfig());oc(this)};h.buildUrl=function(a,b){var c=this;return pc(this,b).then((function(d){return c.Xa.expandUrlAsync(a,d)}))};h.collectUrlVars=function(a,b){var c=this;return pc(this,b).then((function(d){return c.Xa.collectVars(a,d)}))};function pc(a,b){return a.ma().then((function(c){var d={READER_ID:c,ACCESS_READER_ID:c};b&&(d.AUTHDATA=function(e){if(a.ia)return na(a.ia,e)});return d}))}h.runAuthorization=function(a){var b=this;return this.K.isAuthorizationEnabled()?this.K.authorize().catch((function(c){b.I("access-authorization-failed");if(b.Na&&!a)return K().error("amp-access","Authorization failed: ",c),b.Na;throw c})).then((function(c){M().fine("amp-access","Authorization response: ",c);b.ia=c;b.za();oc(b);return c})).catch((function(c){K().error("amp-access","Authorization failed: ",c);b.za();throw c})):(M().fine("amp-access","Ignore authorization for type=",this.ha),this.za(),t())};h.reportViewToServer=function(){var a=this;return this.K.pingback().then((function(){M().fine("amp-access","Pingback complete");a.I("access-pingback-sent")})).catch((function(b){a.I("access-pingback-failed");throw K().createError("Pingback failed: ",b)}))};h.getLoginUrl=function(a){return cc(this.ampdoc,a).getLoginUrl()};h.loginWithType=function(a){N(this.ba[a],"Login URL is not configured: %s",a);var b=N(this.Ua[a],"Login URL is not ready: %s",a);return qc(this,b,a)};h.loginWithUrl=function(a,b){b=void 0===b?"":b;return qc(this,a,b)};function qc(a,b,c){var d=Date.now();if(a.L&&1e3>d-a.Ta)return a.L;M().fine("amp-access","Start login: ",b,c);rc(a,c,"started");var e=a.nb(b).then((function(f){M().fine("amp-access","Login dialog completed: ",c,f);a.L=null;f=Da(f).success;var g="true"==f||"yes"==f||"1"==f;g?rc(a,c,"success"):rc(a,c,"rejected");if(g||!f){a.K.postAction();var m=a.runAuthorization(!0);a.Ca(m);return m.then((function(){a.sa(0)}))}})).catch((function(f){M().fine("amp-access","Login dialog failed: ",c,f);rc(a,c,"failed");a.L==e&&(a.L=null);throw f}));a.L=e;a.Ta=d;return a.L}function rc(a,b,c){a.I("access-login-"+c);b&&a.I("access-login-"+b+"-"+c)}function oc(a){if(0!=Object.keys(a.ba).length){var d,b=[],c={};for(d in a.ba)c.U=d,b.push(a.buildUrl(a.ba[c.U],!0).then(function(e){return function(f){a.Ua[e.U]=f;return{type:e.U,url:f}}}(c))),c={U:c.U};Promise.all(b)}}function sc(a,b){var c=a.getHeadNode(),d=tc(c,uc(c));if(b){var e=a.getRootNode();if(vc(e,d))b(d);else var f=setInterval((function(){vc(e,d)&&(clearInterval(f),b(d))}),4)}}function tc(a,b){var c=a.__AMP_CSS_SM;c||(c=a.__AMP_CSS_SM=Object.create(null));var d=wc(a,c,"amp-extension=amp-access");if(d)return d.textContent!==b&&(d.textContent=b),d;var e=(a.ownerDocument||a).createElement("style");e.textContent=b;e.setAttribute("amp-extension","amp-access");b=wc(a,c,"amp-runtime");(b=void 0===b?null:b)?a.insertBefore(e,b.nextSibling):a.insertBefore(e,a.firstChild);return c["amp-extension=amp-access"]=e}function wc(a,b,c){return b[c]?b[c]:(a=a.querySelector("style["+c+"]"))?b[c]=a:null}function uc(a){return(a=a.__AMP_CSS_TR)?a("\n/*# sourceURL=/extensions/amp-access/0.1/amp-access.css*/"):"\n/*# sourceURL=/extensions/amp-access/0.1/amp-access.css*/"}function vc(a,b){var c=a.styleSheets;for(a=0;a<c.length;a++)if(c[a].ownerNode==b)return!0;return!1}self.__AMP_ERRORS=self.__AMP_ERRORS||[];function xc(a){var b=this;this.ampdoc=a;sc(a,(function(){}));var c=a.getElementById("amp-access");if(this.X=!!c)this.J=c,this.Wa=Z(nb(a.win.location)).origin,this.C=V(a.win),this.S=R(a.win,"vsync"),this.bb=Na(X(a),"cid"),this.Za=W(a,"viewer"),this.sb=W(a,"viewport"),this.qb=W(a,"templates"),this.kb=W(a,"mutator"),this.qa=Ia(a.win),this.Da=null,this.fb=new Xa,this.j=yc(this),c=this.j.map((function(d){return d.whenFirstAuthorized()})),this.la=!1,this.P=Promise.all(c),this.da=null,this.Ma=new ra,this.P.then((function(){b.la=!0;b.I("access-authorization-received");b.qa&&(b.qa.tick("aaa"),b.qa.tickSinceVisible("aaav"),b.qa.flush())})),a.getRootNode().addEventListener("amp:dom-update",this.mb.bind(this))}h=xc.prototype;h.getAccessReaderId=function(){return this.X?this.ma():null};h.ma=function(){if(!this.Da){var a=t();this.Da=this.bb.then((function(b){return b.get({scope:"amp-access",createCookieIfNotPresent:!0},a)}))}return this.Da};h.areFirstAuthorizationsCompleted=function(){return this.la};h.onApplyAuthorizations=function(a){this.Ma.add(a)};function yc(a){N(va(a.J),'amp-access config should be inside a <script> tag with type="application/json"');var b=sa(a.J.textContent,(function(p){throw K().createError('Failed to parse "amp-access" JSON: '+p)})),c={};if(A(b))for(var d=0;d<b.length;d++){var e=b[d].namespace;N(!!e,"Namespace required");N(!c[e],"Namespace already used: "+e);c[e]=b[d]}else c[b.namespace||""]=b;var f=a.ma.bind(a),g=a.sa.bind(a),m=a.Ca.bind(a);return Object.keys(c).map((function(p){return new mc(a.ampdoc,c[p],f,g,m,a.J)}))}h.mb=function(a){var b=this;if(this.la){var c=a.target;return this.P.then((function(){var d=b.combinedResponses();zc(b,c,d)}))}};h.getVendorSource=function(a){for(var b=0;b<this.j.length;b++){var c=this.j[b];if("vendor"==c.getType()&&c.getAdapter().getVendorName()==a)return c}N(!1,'Access vendor "%s" can only be used for "type=vendor", but none found',a);throw Error()};h.isEnabled=function(){return this.X};h.na=function(){var a=this.ampdoc.getRootNode();return a.documentElement||a.body||a};h.I=function(a){Ra(this.na(),a)};function Ac(a){a.Za.onBroadcast((function(b){"amp-access-reauthorize"==b.type&&b.origin==a.Wa&&Bc(a)}))}h.Ca=function(a){var b=this;this.Pa();a.then((function(){b.la&&b.P.then((function(){b.ampdoc.whenReady().then((function(){var c=b.ampdoc.getRootNode(),d=b.combinedResponses();return zc(b,c,d)}))}))}))};h.Pa=function(){this.Za.broadcast(E({type:"amp-access-reauthorize",origin:this.Wa}))};function Bc(a){Cc(a,"amp-access-loading",!0);var b=a.ampdoc.whenFirstVisible().then((function(){return Promise.all(a.j.map((function(c){return Dc(a,c)})))})).then((function(){Cc(a,"amp-access-loading",!1);return a.ampdoc.whenReady().then((function(){var c=a.ampdoc.getRootNode(),d=a.combinedResponses();return zc(a,c,d)}))}));a.P=b}function Dc(a,b){return b.runAuthorization().catch((function(){Cc(a,"amp-access-error",!0)}))}h.getAuthdataField=function(a){var b=this;return this.X?this.P.then((function(){var c=b.combinedResponses();c=na(c,a);return void 0!==c?c:null})):null};function zc(a,b,c){b=b.querySelectorAll("[amp-access]");for(var d=[],e=0;e<b.length;e++)d.push(Ec(a,b[e],c));return Promise.all(d).then((function(){a.Ma.fire()}))}function Ec(a,b,c){var d=b.getAttribute("amp-access"),e=!1;try{e=a.fb.evaluate(d,c)}catch(g){K().error("amp-access",g)}if(e){var f=Fc(a,b,c);if(f)return f.then((function(){return Gc(a,b,e)}))}return Gc(a,b,e)}function Gc(a,b,c){var d=!b.hasAttribute("amp-access-hide");return c==d?t():a.kb.mutateElement(b,(function(){c?b.removeAttribute("amp-access-hide"):b.setAttribute("amp-access-hide","")}))}function Fc(a,b,c){var d=[],e=b.querySelectorAll("[amp-access-template]");if(0<e.length)for(var f={M:0};f.M<e.length;f={M:f.M},f.M++){var g=Hc(a,e[f.M],c).catch(function(m){return function(p){M().error("amp-access","Template failed: ",p,e[m.M],b)}}(f));d.push(g)}return 0<d.length?Promise.all(d):null}function Hc(a,b,c){var d=b,e=null;"TEMPLATE"!=d.tagName&&(e=d,d=e.__AMP_ACCESS__TEMPLATE);return d?a.qb.renderTemplate(d,c).then((function(f){return a.S.mutatePromise((function(){f.setAttribute("amp-access-template","");f.__AMP_ACCESS__TEMPLATE=d;d.parentElement?d.parentElement.replaceChild(f,d):e&&e.parentElement&&e.parentElement.replaceChild(f,e)}))})):Promise.reject(Error("template not found"))}h.sa=function(a){var b=this;this.j.some((function(c){return c.getAdapter().isPingbackEnabled()}))&&(this.da=null,this.ampdoc.whenReady().then((function(){b.ampdoc.isVisible()&&Ic(b,a);b.ampdoc.onVisibilityChanged((function(){b.ampdoc.isVisible()&&Ic(b,a)}))})))};function Ic(a,b){a.da||(M().fine("amp-access","start view monitoring"),a.da=Jc(a,b).then((function(){return a.P})).then((function(){a.I("access-viewed");for(var c=[],d=0;d<a.j.length;d++)a.j[d].getAdapter().isPingbackEnabled()&&c.push(a.j[d].reportViewToServer());return Promise.all(c)})).catch((function(c){M().fine("amp-access","view cancelled:",c);a.da=null;throw c})),a.da.then(a.Pa.bind(a)))}function Jc(a,b){if(0==b)return t();var c=[];return new Promise((function(d,e){c.push(a.ampdoc.onVisibilityChanged((function(){a.ampdoc.isVisible()||e(Error("CANCELLED"))})));var f=a.C.delay(d,b);c.push((function(){return a.C.cancel(f)}));c.push(a.sb.onScroll(d));c.push(Va(a.ampdoc.getRootNode(),d))})).then((function(){c.forEach((function(d){return d()}))}),(function(d){c.forEach((function(e){return e()}));throw d}))}function Cc(a,b,c){a.S.mutate((function(){a.na().classList.toggle(b,c)}))}h.hb=function(a){if(!a.satisfiesTrust(2))return null;"login"==a.method?(a.event&&a.event.preventDefault(),Kc(this,"")):a.method.startsWith("login-")?(a.event&&a.event.preventDefault(),Kc(this,a.method.substring(6))):"refresh"==a.method&&(a.event&&a.event.preventDefault(),Bc(this));return null};h.getSource=function(a){N(0<=a&&a<this.j.length,"Invalid index: %d",a);return this.j[a]};function Kc(a,b){var c=b.indexOf("-"),d=1==a.j.length,e=-1<c?b.substring(0,c):b,f=a.j.filter((function(g){return g.getNamespace()==e}));f.length?(a=-1<c?b.substring(c+1):"",f[0].loginWithType(a)):(N(d,"Login must match namespace: %s",e),a.j[0].loginWithType(b))}h.combinedResponses=function(){if(1==this.j.length&&!this.j[0].getNamespace())return this.j[0].getAuthResponse()||{};var a={};this.j.forEach((function(b){return a[b.getNamespace()]=b.getAuthResponse()}));return a};AMP.registerServiceForDoc("access",(function(a){a=new xc(a);if(a.X){La(a.J,"action").installActionHandler(a.J,a.hb.bind(a));for(var b=0;b<a.j.length;b++)a.j[b].start();Bc(a);a.sa(2e3);Ac(a)}else K().info("amp-access",'Access is disabled - no "id=amp-access" element');return a}))}});//# sourceMappingURL=amp-access-0.1.js.map