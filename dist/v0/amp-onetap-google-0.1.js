(self.AMP=self.AMP||[]).push({m:0,v:"2110121450047",n:"amp-onetap-google",ev:"0.1",l:true,f:function(AMP,_){"use strict";var m="function"==typeof Object.create?Object.create:function(a){function b(){}b.prototype=a;return new b};function q(a){for(var b=["object"==typeof globalThis&&globalThis,a,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global],c=0;c<b.length;++c){var d=b[c];if(d&&d.Math==Math)return}(function(){throw Error("Cannot find global object")})()}q(this);"function"===typeof Symbol&&Symbol("x");var r;if("function"==typeof Object.setPrototypeOf)r=Object.setPrototypeOf;else{var t;a:{var u={a:!0},v={};try{v.__proto__=u;t=v.a;break a}catch(a){}t=!1}r=t?function(a,b){a.__proto__=b;if(a.__proto__!==b)throw new TypeError(a+" is not extensible");return a}:null}var w=r;var x=Object.prototype.toString;function y(a){return a||{}}
/* https://mths.be/cssescape v1.5.1 by @mathias | MIT license */
var z,A="Webkit webkit Moz moz ms O o".split(" ");function B(a,b){void 0===b&&(b=a.hasAttribute("hidden"));b?a.removeAttribute("hidden"):a.setAttribute("hidden","")}var C=self.AMP_CONFIG||{},aa=("string"==typeof C.cdnProxyRegex?new RegExp(C.cdnProxyRegex):C.cdnProxyRegex)||/^https:\/\/([a-zA-Z0-9_-]+\.)?cdn\.ampproject\.org$/;function D(a){if(self.document&&self.document.head&&(!self.location||!aa.test(self.location.origin))){var b=self.document.head.querySelector('meta[name="'+a+'"]');b&&b.getAttribute("content")}}C.cdnUrl||D("runtime-host");C.geoApiUrl||D("amp-geo-api");self.__AMP_LOG=self.__AMP_LOG||{user:null,dev:null,userForEmbed:null};var E=self.__AMP_LOG;function F(){throw Error("failed to call initLogConstructor")}function G(){E.user||(E.user=F());return E.user}function ba(){var a=this;this.promise=new Promise((function(b,c){a.resolve=b;a.reject=c}))}function H(a,b){a=a.__AMP_TOP||(a.__AMP_TOP=a);return I(a,b)}function J(a,b){a=K(a);a=L(a);return M(a,b)?I(a,b):null}function K(a){return a.nodeType?H((a.ownerDocument||a).defaultView,"ampdoc").getAmpDoc(a):a}function L(a){a=K(a);return a.isSingleDoc()?a.win:a}function I(a,b){M(a,b);a=N(a)[b];a.obj||(a.obj=new a.ctor(a.context),a.context=null,a.resolve&&a.resolve(a.obj));return a.obj}function O(a){var b=N(a).subscriptions;if(b){if(b.promise)return b.promise;I(a,"subscriptions");return b.promise=Promise.resolve(b.obj)}return null}function N(a){var b=a.__AMP_SERVICES;b||(b=a.__AMP_SERVICES={});return b}function M(a,b){a=a.__AMP_SERVICES&&a.__AMP_SERVICES[b];return!(!a||!a.ctor)}function ca(){var a=new ba,b=a.promise,c=a.reject;a=a.resolve;b.catch((function(){}));return{obj:null,promise:b,resolve:a,reject:c,context:null,ctor:null}}function da(a){var b=O(L(a));if(b)return b;var c=K(a);return c.whenExtensionsKnown().then((function(){var d=c.getExtensionVersion("amp-subscriptions");return d?H(c.win,"extensions").waitForExtension("amp-subscriptions",d):null})).then((function(d){if(d){var g=L(a);var e=O(g);e?g=e:(g=N(g),g.subscriptions=ca(),g=g.subscriptions.promise)}else g=null;return g}))}var P;function ea(a,b,c){function d(k){try{return e(k)}catch(n){var h,l;null==(l=(h=self).__AMP_REPORT_ERROR)||l.call(h,n);throw n}}var g=a,e=c,f=fa();g.addEventListener(b,d,f?void 0:!1);return function(){var k;null==(k=g)||k.removeEventListener(b,d,f?void 0:!1);d=g=e=null}}function fa(){if(void 0!==P)return P;P=!1;try{var a={get capture(){P=!0}};self.addEventListener("test-options",null,a);self.removeEventListener("test-options",null,a)}catch(b){}return P}function Q(a,b,c){return ea(a,b,c)}function R(){this.D=100;this.A=this.B=0;this.j=Object.create(null)}R.prototype.has=function(a){return!!this.j[a]};R.prototype.get=function(a){var b=this.j[a];if(b)return b.access=++this.A,b.payload};R.prototype.put=function(a,b){this.has(a)||this.B++;this.j[a]={payload:b,access:this.A};if(!(this.B<=this.D)){a=this.j;var d,c=this.A+1;for(d in a){var g=a[d].access;if(g<c){c=g;var e=d}}void 0!==e&&(delete a[e],this.B--)}};new Set(["c","v","a","ad"]);var S,T;function V(a){a=AMP.BaseElement.call(this,a)||this;a.h=null;a.C=!0;a.o=null;return a}var W=AMP.BaseElement;V.prototype=m(W.prototype);V.prototype.constructor=V;if(w)w(V,W);else for(var X in W)if("prototype"!=X)if(Object.defineProperties){var Y=Object.getOwnPropertyDescriptor(W,X);Y&&Object.defineProperty(V,X,Y)}else V[X]=W[X];V.F=W.prototype;V.prototype.isLayoutSupported=function(a){return"nodisplay"==a};V.prototype.buildCallback=function(){var a=this;this.getAmpDoc().whenFirstVisible().then((function(){var b=ha,c=a.element.dataset.src,d=a.element;var g=void 0===g?"source":g;var e=null!=c;G().assert(e,"%s %s must be available",d,g,void 0,void 0,void 0,void 0,void 0,void 0,void 0);e=c;if("string"==typeof e){S||(S=self.document.createElement("a"),T=self.__AMP_URL_CACHE||(self.__AMP_URL_CACHE=new R));var f=S,k=T;if(k&&k.has(e))e=k.get(e);else{f.href=e;f.protocol||(f.href=f.href);var h={href:f.href,protocol:f.protocol,host:f.host,hostname:f.hostname,port:"0"==f.port?"":f.port,pathname:f.pathname,search:f.search,hash:f.hash,origin:null};"/"!==h.pathname[0]&&(h.pathname="/"+h.pathname);if("http:"==h.protocol&&80==h.port||"https:"==h.protocol&&443==h.port)h.port="",h.host=h.hostname;h.origin=f.origin&&"null"!=f.origin?f.origin:"data:"!=h.protocol&&h.host?h.protocol+"//"+h.host:h.href;k&&k.put(e,h);e=h}}(f="https:"==e.protocol||"localhost"==e.hostname||"127.0.0.1"==e.hostname)||(e=e.hostname,f=e.length-10,f=0<=f&&e.indexOf(".localhost",f)==f);e=f||/^\/\//.test(c);G().assert(e,'%s %s must start with "https://" or "//" or be relative and served from either https or from localhost. Invalid value: %s',d,g,c,void 0,void 0,void 0,void 0,void 0,void 0);b(a,c)}))};function ia(a,b,c){a.postMessage(b,c)}function ja(a,b,c){if(a.h&&c.source==a.h.contentWindow&&c.origin===b){var d=c.data;if("[object Object]"===x.call(d)&&"onetap_google"==d.sentinel)switch(d.command){case"intermediate_iframe_ready":var g=d.nonce;if(!g)break;ia(c.source,y({sentinel:"onetap_google",command:"parent_frame_ready",nonce:g}),c.origin);break;case"intermediate_iframe_resize":var e=d.height;"number"===typeof e&&!isNaN(e)&&0<e&&a.mutateElement((function(){B(a.element,0<e);var k=a.h,h=d.height+"px";var l=k.style;if("height".startsWith("--"))l="height";else{z||(z=Object.create(null));var n=z.height;if(!n){n="height";if(void 0===l.height){var p;b:{for(p=0;p<A.length;p++){var U=A[p]+"Height";if(void 0!==l[U]){p=U;break b}}p=""}void 0!==l[p]&&(n=p)}z.height=n}l=n}l&&(l.startsWith("--")?k.style.setProperty(l,h):k.style[l]=h)}));break;case"intermediate_iframe_close":a.mutateElement((function(){Z(a)}));break;case"intermediate_iframe_done":a.mutateElement((function(){Z(a);ka(a)}));break;case"set_ui_mode":var f=d.mode;if(!f)break;la(a,f);break;case"set_tap_outside_mode":a.C=!!d.cancel;break;default:(E.dev||(E.dev=F())).warn("amp-onetap-google","Unknown action type: "+d.command)}}}function la(a,b){a.mutateElement((function(){a.h.classList.add("i-amphtml-onetap-google-ui-"+b)}))}function ka(a){Promise.all([ma(a),na(a)]).then((function(b){b.reduce((function(c,d){return c||d}))||G().warn("amp-onetap-google","Sign-in was completed, but there were no entitlements to refresh. Please include amp-access or amp-subscriptions.")}))}function ma(a){var b=a.getAmpDoc().getElementById("amp-access");if(!b)return!1;J(a.element,"action").execute(b,"refresh",null,null,null,null,2);return!0}function na(a){return da(a.element).then((function(b){if(!b)return!1;b.resetPlatforms();return!0}))}function ha(a,b){a.h||(a.h=a.getAmpDoc().win.document.createElement("iframe"),J(a.element,"url-replace").expandUrlAsync(b).then((function(c){a.win&&oa(a,c)})))}function oa(a,b){B(a.element,!1);var c=J(a.element,"url").parse(b).origin;a.o=[Q(a.win,"message",(function(d){ja(a,c,d)})),Q(a.getAmpDoc().getRootNode(),"click",(function(){a.C&&!a.element.hasAttribute("hidden")&&Z(a)}))];a.h.classList.add("i-amphtml-onetap-google-iframe");a.h.src=b;a.element.appendChild(a.h);a.getViewport().addToFixedLayer(a.h)}function Z(a){if(a.h){B(a.element,!1);var c,b=a.h;null==(c=b.parentElement)||c.removeChild(b);a.h=null;if(a.o)for(;0<a.o.length;)a.o.pop()()}}AMP.registerElement("amp-onetap-google",V,".i-amphtml-onetap-google-iframe{z-index:2147483647;border:none;position:fixed}.i-amphtml-onetap-google-ui-card{width:391px;right:20px;top:20px}.i-amphtml-onetap-google-ui-bottom_sheet{right:auto;left:0;top:auto;bottom:0;width:100%}\n/*# sourceURL=/extensions/amp-onetap-google/0.1/amp-onetap-google.css*/")}});//# sourceMappingURL=amp-onetap-google-0.1.js.map