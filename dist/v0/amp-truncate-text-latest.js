(self.AMP=self.AMP||[]).push({m:0,v:"2110121450047",n:"amp-truncate-text",ev:"0.1",l:true,f:function(AMP,_){"use strict";function m(a){var b=0;return function(){return b<a.length?{done:!1,value:a[b++]}:{done:!0}}}function p(a){var b="undefined"!=typeof Symbol&&Symbol.iterator&&a[Symbol.iterator];return b?b.call(a):{next:m(a)}}var q="function"==typeof Object.create?Object.create:function(a){function b(){}b.prototype=a;return new b};function r(a){for(var b=["object"==typeof globalThis&&globalThis,a,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global],c=0;c<b.length;++c){var d=b[c];if(d&&d.Math==Math)return}(function(){throw Error("Cannot find global object")})()}r(this);"function"===typeof Symbol&&Symbol("x");var t;if("function"==typeof Object.setPrototypeOf)t=Object.setPrototypeOf;else{var u;a:{var v={a:!0},w={};try{w.__proto__=v;u=w.a;break a}catch(a){}u=!1}t=u?function(a,b){a.__proto__=b;if(a.__proto__!==b)throw new TypeError(a+" is not extensible");return a}:null}var x=t;function y(a){return a?Array.prototype.slice.call(a):[]}var z=Array.isArray;function A(a){return a.trimEnd?a.trimEnd():("_"+a).trim().slice(1)}
/* https://mths.be/cssescape v1.5.1 by @mathias | MIT license */
function B(a,b){for(;a&&void 0!==a;a=a.parentElement)if(b(a))return a;return null}function C(a){return a.closest?a.closest("a[href]"):B(a,(function(b){var c=b.matches||b.webkitMatchesSelector||b.mozMatchesSelector||b.msMatchesSelector||b.oMatchesSelector;return c?c.call(b,"a[href]"):!1}))}function D(a,b){var c=[];for(a=a.firstChild;a;a=a.nextSibling)b(a)&&c.push(a);return c}function E(a){return D(a,(function(b){if("string"==typeof b)var c=b;else b.nodeType===Node.ELEMENT_NODE&&(c=b.tagName);b=c&&c.toLowerCase().startsWith("i-")?!0:b.nodeType!==Node.ELEMENT_NODE?!1:b.hasAttribute("placeholder")||b.hasAttribute("fallback")||b.hasAttribute("overflow");return!b}))}function F(a,b){for(var c=a.length,d=0;d<c;d++)b(a[d],d)}var G;function H(a){var b=a.ownerDocument||a;G&&G.ownerDocument===b||(G=b.createElement("div"));return aa}function aa(a){var b=G;b.innerHTML=a[0];a=b.firstElementChild;b.removeChild(a);return a}var ba=/(?:^[#?]?|&)([^=&]+)(?:=([^&]*))?/g;function I(a,b){var c=b=void 0===b?"":b;try{return decodeURIComponent(a)}catch(d){return c}}var J=self.AMP_CONFIG||{},ca=("string"==typeof J.cdnProxyRegex?new RegExp(J.cdnProxyRegex):J.cdnProxyRegex)||/^https:\/\/([a-zA-Z0-9_-]+\.)?cdn\.ampproject\.org$/;function K(a){if(self.document&&self.document.head&&(!self.location||!ca.test(self.location.origin))){var b=self.document.head.querySelector('meta[name="'+a+'"]');b&&b.getAttribute("content")}}J.cdnUrl||K("runtime-host");J.geoApiUrl||K("amp-geo-api");self.__AMP_LOG=self.__AMP_LOG||{user:null,dev:null,userForEmbed:null};var da=self.__AMP_LOG;function L(a){if(a.nodeType){var b=(a.ownerDocument||a).defaultView;b=b.__AMP_TOP||(b.__AMP_TOP=b);return M(b,"ampdoc").getAmpDoc(a)}return a}function M(a,b){N(a,b);var c=a.__AMP_SERVICES;c||(c=a.__AMP_SERVICES={});a=c[b];a.obj||(a.obj=new a.ctor(a.context),a.context=null,a.resolve&&a.resolve(a.obj));return a.obj}function N(a,b){a=a.__AMP_SERVICES&&a.__AMP_SERVICES[b];return!(!a||!a.ctor)}function ea(a){if(a.__AMP__EXPERIMENT_TOGGLES)var b=a.__AMP__EXPERIMENT_TOGGLES;else{a.__AMP__EXPERIMENT_TOGGLES=Object.create(null);b=a.__AMP__EXPERIMENT_TOGGLES;var c,d,k,f=Object.assign({},null!=(d=a.AMP_CONFIG)?d:{},null!=(k=a.AMP_EXP)?k:JSON.parse((null==(c=a.__AMP_EXP)?void 0:c.textContent)||"{}"));for(h in f)c=f[h],"number"===typeof c&&0<=c&&1>=c&&(b[h]=Math.random()<c);var e;f=null==(e=a.AMP_CONFIG)?void 0:e["allow-doc-opt-in"];if(z(f)&&f.length&&(e=a.document.head.querySelector('meta[name="amp-experiments-opt-in"]'))){e=e.getAttribute("content").split(",");var h=p(e);for(e=h.next();!e.done;e=h.next())e=e.value,f.includes(e)&&(b[e]=!0)}e=Object;f=e.assign;h="";try{"localStorage"in a&&(h=a.localStorage.getItem("amp-experiment-toggles"))}catch(n){if(!(c=da.dev))throw Error("failed to call initLogConstructor");c.warn("EXPERIMENTS","Failed to retrieve experiments from localStorage.")}var g;h=(null==(g=h)?void 0:g.split(/\s*,\s*/g))||[];g=Object.create(null);h=p(h);for(c=h.next();!c.done;c=h.next())(c=c.value)&&("-"==c[0]?g[c.substr(1)]=!1:g[c]=!0);f.call(e,b,g);var l;g=null==(l=a.AMP_CONFIG)?void 0:l["allow-url-opt-in"];if(z(g)&&g.length){l=a.location.originalHash||a.location.hash;a=Object.create(null);if(l)for(;f=ba.exec(l);)e=I(f[1],f[1]),f=f[2]?I(f[2].replace(/\+/g," "),f[2]):"",a[e]=f;l=p(g);for(e=l.next();!e.done;e=l.next())g=e.value,e=a["e-"+g],"1"==e&&(b[g]=!0),"0"==e&&(b[g]=!1)}}return!!b["amp-truncate-text-shadow"]}function fa(a,b){var c=1,d=1;c=void 0===c?0:c;d=void 0===d?1:d;var k=c,f=d,e=0,h=a-1,g=NaN;for(a=NaN;h>=e;){var l=e+Math.floor((h-e)/2),n=b(l);if(0<n||0==n&&1==k)g=2==f?l:g,a=0==n?l:a,e=l+1;else if(0>n||0==n&&2==k)g=1==f?l:g,a=0==n?l:a,h=l-1;else{a=l;break}}return isNaN(a)?-((isNaN(g)?1==f?e:h:g)+1):a}function O(a,b){var c="slot"==a.localName?a.assignedNodes({flatten:!0}):a.childNodes;for(a=0;a<c.length;a++)b(c[a])}function P(a){var b=a.__AMP_TRUNCATE_TEXT_DATA;b&&b.modifiedText==a.data&&(a.data=b.originalText);a.nodeType==Node.ELEMENT_NODE&&a.removeAttribute("i-amphtml-truncate-child-overflow");O(a,(function(c){return P(c)}))}function Q(a,b,c){a.__AMP_TRUNCATE_TEXT_DATA={originalText:b,modifiedText:c};a.data=c}function R(a,b,c){var d=c=void 0===c?[]:c;if(!b(a))return d;d.push(a);O(a,(function(k){return R(k,b,d)}));return d}function ha(a,b,c){for(var d=R(a,(function(e){return!c.includes(e)})),k=d.length-1;0<=k;k--){var f=d[k];f.nodeType==Node.ELEMENT_NODE&&f.setAttribute("i-amphtml-truncate-child-overflow","");if(f.nodeType==Node.TEXT_NODE&&ia(f,a,b))break}}function ia(a,b,c){var d=document.createRange();d.selectNode(a);var k=d.getBoundingClientRect(),f=a.data;if(k.height)if(k.top>c.bottom)Q(a,f,"");else{var e=fa(f.length,(function(g){for(;!f[g].trim()&&0<g;)g--;a.data=f.slice(0,g+1)+"… ";return-(b.scrollHeight-b.offsetHeight)})),h=A(f.slice(0,0<=e?e+1:-(e+1)));Q(a,f,h?h+"… ":"");return!!h}}var ja=["<div class=i-amphtml-truncate-content><span class=i-amphtml-default-slot></span> <span class=i-amphtml-truncate-collapsed-slot name=collapsed></span> <span class=i-amphtml-truncate-expanded-slot name=expanded></span> <span class=i-amphtml-truncate-persistent-slot name=persistent></span></div>"],ka=["<div class=content><slot></slot><slot class=collapsed-slot name=collapsed></slot><slot class=expanded-slot name=expanded></slot><slot class=persistent-slot name=persistent></slot></div>"];function S(a){var b=AMP.BaseElement.call(this,a)||this;b.h=null;b.j=null;b.o=null;b.B=null;b.A=!1;b.C=new b.win.MutationObserver((function(){T(b)}));return b}var U=AMP.BaseElement;S.prototype=q(U.prototype);S.prototype.constructor=S;if(x)x(S,U);else for(var V in U)if("prototype"!=V)if(Object.defineProperties){var W=Object.getOwnPropertyDescriptor(U,V);W&&Object.defineProperty(S,V,W)}else S[V]=U[V];S.D=U.prototype;function la(a){a.registerAction("expand",(function(){return X(a)}));a.registerAction("collapse",(function(){return Y(a)}))}S.prototype.buildCallback=function(){var a=this;this.C.observe(this.element,{attributes:!0,characterData:!0,childList:!0,subtree:!0});(this.A=!!this.element.attachShadow&&ea(this.win))?ma(this):na(this);la(this);this.j.addEventListener("click",(function(b){Z(a,b,!0)}));this.o.addEventListener("click",(function(b){Z(a,b,!1)}))};function na(a){a.h=H(a.element)(ja);var b=a.h.querySelector(".i-amphtml-default-slot");a.j=a.h.querySelector(".i-amphtml-truncate-collapsed-slot");a.o=a.h.querySelector(".i-amphtml-truncate-expanded-slot");a.B=a.h.querySelector(".i-amphtml-truncate-persistent-slot");F(a.element.querySelectorAll('[slot="collapsed"]'),(function(c){a.j.appendChild(c)}));F(a.element.querySelectorAll('[slot="expanded"]'),(function(c){a.o.appendChild(c)}));F(a.element.querySelectorAll('[slot="persistent"]'),(function(c){a.B.appendChild(c)}));E(a.element).forEach((function(c){b.appendChild(c)}));a.element.appendChild(a.h)}function ma(a){var b=H(a.element),c=a.element;b=b(ka);var d=c.querySelector("i-amphtml-sizer");d&&d.setAttribute("slot","i-amphtml-sizer");c=c.attachShadow({mode:"open"});d=document.createElement("style");d.textContent=":host{padding:0!important;border:none!important}:host([i-amphtml-truncate-expanded]){height:auto!important}:host([i-amphtml-truncate-expanded]) ::slotted(i-amphtml-sizer){display:none!important}:host([i-amphtml-truncate-expanded]) .content{position:static}:host(:not([i-amphtml-truncate-expanded])) .expanded-slot{display:none}.content{position:absolute;top:0;left:0;bottom:0;right:0}.expand-slot::slotted(*){margin:0!important;white-space:nowrap!important}:host(:not([i-amphtml-truncate-overflow])) .collapsed-slot{display:none}::slotted([i-amphtml-truncate-child-overflow]){display:none!important}\n/*# sourceURL=/extensions/amp-truncate-text/0.1/amp-truncate-text-shadow.css*/";var k=document.createElement("slot");k.setAttribute("name","i-amphtml-sizer");c.appendChild(d);c.appendChild(k);c.appendChild(b);a.h=null;a.j=c.querySelector(".collapsed-slot");a.o=c.querySelector(".expanded-slot");a.B=c.querySelector(".persistent-slot")}S.prototype.layoutCallback=function(){var a=this;return this.mutateElement((function(){T(a)}))};S.prototype.isRelayoutNeeded=function(){return!0};S.prototype.isLayoutSupported=function(){return!0};function T(a){var b=a.A?a.element:a.h,c=a.A?y(a.element.querySelectorAll('[slot="persistent"], [slot="collapsed"]')):y(a.element.querySelectorAll(".i-amphtml-truncate-persistent-slot, .i-amphtml-truncate-collapsed-slot"));b.__AMP_TRUNCATE_TRUNCATED&&(b.__AMP_TRUNCATE_TRUNCATED=!1,b.removeAttribute("i-amphtml-truncate-overflow"),P(b));if(!(0>=b.scrollHeight-b.offsetHeight)){var d=b.getBoundingClientRect();b.__AMP_TRUNCATE_TRUNCATED=!0;b.setAttribute("i-amphtml-truncate-overflow","");ha(b,d,c)}a.C.takeRecords()}function Z(a,b,c){b=b.target;var d=L(a.element);d=L(d);d=d.isSingleDoc()?d.win:d;(N(d,"action")?M(d,"action"):null).hasAction(b,"tap")||C(b)||(c?X(a):Y(a))}function X(a){a.element.setAttribute("i-amphtml-truncate-expanded","")}function Y(a){a.element.removeAttribute("i-amphtml-truncate-expanded")}AMP.registerElement("amp-truncate-text",S,"amp-truncate-text{padding:0!important;border:none!important}amp-truncate-text[i-amphtml-truncate-expanded]{height:auto!important}amp-truncate-text[i-amphtml-truncate-expanded]>i-amphtml-sizer{display:none!important}amp-truncate-text[i-amphtml-truncate-expanded] .i-amphtml-truncate-content{position:static!important}amp-truncate-text:not([i-amphtml-truncate-expanded]) .i-amphtml-truncate-expanded-slot{display:none!important}.i-amphtml-truncate-content{position:absolute!important;top:0!important;left:0!important;bottom:0!important;right:0!important}.i-amphtml-truncate-content [slot=expanded]{margin:0!important;white-space:nowrap!important}.i-amphtml-truncate-content:not([i-amphtml-truncate-overflow]) .i-amphtml-truncate-collapsed-slot,[i-amphtml-truncate-child-overflow]{display:none!important}\n/*# sourceURL=/extensions/amp-truncate-text/0.1/amp-truncate-text.css*/")}});//# sourceMappingURL=amp-truncate-text-0.1.js.map