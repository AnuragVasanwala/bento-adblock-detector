(self.AMP=self.AMP||[]).push({m:0,v:"2110121450047",n:"amp-megaphone",ev:"0.1",l:true,f:function(AMP,_){"use strict";var k;function m(a){var b=0;return function(){return b<a.length?{done:!1,value:a[b++]}:{done:!0}}}var q="function"==typeof Object.create?Object.create:function(a){function b(){}b.prototype=a;return new b};function r(a){for(var b=["object"==typeof globalThis&&globalThis,a,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global],c=0;c<b.length;++c){var d=b[c];if(d&&d.Math==Math)return}(function(){throw Error("Cannot find global object")})()}r(this);"function"===typeof Symbol&&Symbol("x");var t;if("function"==typeof Object.setPrototypeOf)t=Object.setPrototypeOf;else{var u;a:{var v={a:!0},w={};try{w.__proto__=v;u=w.a;break a}catch(a){}u=!1}t=u?function(a,b){a.__proto__=b;if(a.__proto__!==b)throw new TypeError(a+" is not extensible");return a}:null}var x=t;var y=Object.prototype.toString;var z=Array.isArray;function A(a,b){for(var c=[],d=0,e=0;e<a.length;e++){var g=a[e];b(g,e,a)?c.push(g):(d<e&&(a[d]=g),d++)}d<a.length&&(a.length=d)}
/* https://mths.be/cssescape v1.5.1 by @mathias | MIT license */
function C(a){var b=null,c="";var d=arguments;var e="undefined"!=typeof Symbol&&Symbol.iterator&&d[Symbol.iterator];d=e?e.call(d):{next:m(d)};for(e=d.next();!e.done;e=d.next())if(e=e.value,e instanceof Error&&!b){var g=b=void 0;if(null==(g=Object.getOwnPropertyDescriptor(e,"message"))?0:g.writable)b=e;else{g=e.stack;var f=Error(e.message);for(b in e)f[b]=e[b];f.stack=g;b=f}}else c&&(c+=" "),c+=e;b?c&&(b.message=c+": "+b.message):b=Error(c);return b}function D(a){var b=C.apply(null,arguments);setTimeout((function(){var c,d;null==(d=(c=self).__AMP_REPORT_ERROR)||d.call(c,b);throw b}))}function E(a,b){for(var c=[],d=1;d<arguments.length;++d)c[d-1]=arguments[d];try{a.apply(null,c)}catch(e){D(e)}}var F={getPropertyPriority:function(){return""},getPropertyValue:function(){return""}};var G=/vertical/,H=new WeakMap,I=new WeakMap,J=new WeakMap;function K(a,b){var c=a.ownerDocument.defaultView;if(c){var d=I.get(a);d||(d=[],I.set(a,d),L(c).observe(a));if(!d.some((function(g){return g.callback===b&&1===g.type}))){d.push({type:1,callback:b});var e=J.get(a);e&&setTimeout((function(){return M(1,b,e)}))}}}function N(a,b){var c=I.get(a);c&&(A(c,(function(d){return d.callback===b&&1===d.type})),0==c.length&&(I.delete(a),J.delete(a),(c=a.ownerDocument.defaultView)&&L(c).unobserve(a)))}function L(a){var b=H.get(a);b||(b=new a.ResizeObserver(O),H.set(a,b));return b}function O(a){for(var b=new Set,c=a.length-1;0<=c;c--){var d=a[c],e=d.target;if(!b.has(e)){b.add(e);var g=I.get(e);if(g)for(J.set(e,d),e=0;e<g.length;e++){var f=g[e];M(f.type,f.callback,d)}}}}function M(a,b,c){if(0==a)a=c.contentRect,E(b,{width:a.width,height:a.height});else if(1==a){var d=c.borderBoxSize;if(d)var e=0<d.length?d[0]:{inlineSize:0,blockSize:0};else{a=c.target;var g=G.test(((a.ownerDocument||a).defaultView.getComputedStyle(a)||F)["writing-mode"]),f=a.offsetHeight,p=a.offsetWidth;if(g){var l=p;var n=f}else n=p,l=f;e={inlineSize:n,blockSize:l}}E(b,e)}}function P(a){this.B=a;this.C=this.F=!1;this.A=this.A.bind(this)}P.prototype.updatePlaying=function(a){a!==this.F&&((this.F=a)?(this.C=!1,K(this.B,this.A)):N(this.B,this.A))};P.prototype.A=function(a){var b=a.blockSize,c=0<a.inlineSize&&0<b;c!==this.C&&(this.C=c,a=this.B,c||a.pause())};var Q=self.AMP_CONFIG||{},aa=("string"==typeof Q.cdnProxyRegex?new RegExp(Q.cdnProxyRegex):Q.cdnProxyRegex)||/^https:\/\/([a-zA-Z0-9_-]+\.)?cdn\.ampproject\.org$/;function R(a){if(self.document&&self.document.head&&(!self.location||!aa.test(self.location.origin))){var b=self.document.head.querySelector('meta[name="'+a+'"]');b&&b.getAttribute("content")}}Q.cdnUrl||R("runtime-host");Q.geoApiUrl||R("amp-geo-api");self.__AMP_LOG=self.__AMP_LOG||{user:null,dev:null,userForEmbed:null};var S=self.__AMP_LOG;var T;function ba(a,b){function c(f){try{return e(f)}catch(n){var p,l;null==(l=(p=self).__AMP_REPORT_ERROR)||l.call(p,n);throw n}}var d=a,e=b,g=ca();d.addEventListener("message",c,g?void 0:!1);return function(){var f;null==(f=d)||f.removeEventListener("message",c,g?void 0:!1);c=d=e=null}}function ca(){if(void 0!==T)return T;T=!1;try{var a={get capture(){T=!0}};self.addEventListener("test-options",null,a);self.removeEventListener("test-options",null,a)}catch(b){}return T}new Set(["c","v","a","ad"]);function U(a){a=AMP.BaseElement.call(this,a)||this;a.h=null;a.D=null;a.j=!1;a.o="";a.G=new P(a.element);return a}var V=AMP.BaseElement;U.prototype=q(V.prototype);U.prototype.constructor=U;if(x)x(U,V);else for(var W in V)if("prototype"!=W)if(Object.defineProperties){var X=Object.getOwnPropertyDescriptor(V,W);X&&Object.defineProperty(U,W,X)}else U[W]=V[W];U.I=V.prototype;k=U.prototype;k.preconnectCallback=function(a){var b=this.win;b=b.__AMP_TOP||(b.__AMP_TOP=b);var c=b.__AMP_SERVICES;c||(c=b.__AMP_SERVICES={});b=c.preconnect;b.obj||(b.obj=new b.ctor(b.context),b.context=null,b.resolve&&b.resolve(b.obj));b=b.obj;c=this.getAmpDoc();b.url(c,this.o,a);b.url(c,"https://assets.megaphone.fm",a);b.url(c,"https://megaphone.imgix.net",a)};k.isLayoutSupported=function(a){return"fixed"==a||"fixed-height"==a};k.buildCallback=function(){this.element.classList.add("i-amphtml-media-component");Y(this)};k.mutatedAttributesCallback=function(){Y(this);this.h&&(this.h.src=Z(this))};k.layoutCallback=function(){var a=this.element.ownerDocument.createElement("iframe");a.setAttribute("frameborder","no");a.setAttribute("scrolling","no");a.src=Z(this);var b=this.H.bind(this);this.D=ba(this.win,b);a.classList.add("i-amphtml-fill-content");this.element.appendChild(a);this.h=a;this.G.updatePlaying(!0);return this.loadPromise(a)};k.unlayoutCallback=function(){if(this.h){var b,a=this.h;null==(b=a.parentElement)||b.removeChild(a);this.h=null}this.D&&this.D();this.G.updatePlaying(!1);return!0};function Z(a){Y(a);var b=a.element.getAttribute("data-playlist")||a.element.getAttribute("data-episode");var c=a.element;if(!S.user)throw Error("failed to call initLogConstructor");c=S.user.assert(b,"data-playlist or data-episode is required for <amp-megaphone> %s",c,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0);var d=a.element.hasAttribute("data-light"),e=a.element.hasAttribute("data-sharing"),g=a.element.getAttribute("data-episodes"),f=a.element.getAttribute("data-start"),p=a.element.hasAttribute("data-tile");b=a.o+"/"+(a.j?"":c+"/");a={p:a.j?c:void 0,light:d||void 0,sharing:e||void 0,episodes:a.j&&g||void 0,start:!a.j&&f||void 0,tile:!a.j&&p||void 0};c=[];for(h in a)if(f=a[h],null!=f){f=z(f)?f:[f];for(var l=0;l<f.length;l++){var n=c,da=n.push;var B=f[l];B=encodeURIComponent(h)+"="+encodeURIComponent(B);da.call(n,B)}}var h=c.join("&");h?(b=b.split("#",2),a=b[0].split("?",2),h=a[0]+(a[1]?"?"+a[1]+"&"+h:"?"+h),h+=b[1]?"#"+b[1]:""):h=b;return h}function Y(a){a.j=a.element.hasAttribute("data-playlist");a.o="https://"+(a.j?"playlist":"player")+".megaphone.fm"}k.H=function(a){if(a.origin==this.o&&a.source==this.h.contentWindow){var b=a.data;if(b&&("[object Object]"===y.call(b)||b.startsWith("{"))){if("[object Object]"===y.call(b))var c=b;else try{c=JSON.parse(b)}catch(d){c=null}a=c;"iframe.resize"==a.context&&this.attemptChangeHeight(a.height).catch((function(){}))}}};k.pauseCallback=function(){if(this.h&&this.h.contentWindow){var a=this.h.contentWindow,b=JSON;a.postMessage.call(a,b.stringify.call(b,{method:"pause"}),this.o);this.h.src=this.h.src}};AMP.registerElement("amp-megaphone",U)}});//# sourceMappingURL=amp-megaphone-0.1.js.map