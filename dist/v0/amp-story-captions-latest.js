(self.AMP=self.AMP||[]).push({m:0,v:"2110121450047",n:"amp-story-captions",ev:"0.1",l:true,f:function(AMP,_){"use strict";var l="function"==typeof Object.create?Object.create:function(a){function b(){}b.prototype=a;return new b};function n(a){for(var b=["object"==typeof globalThis&&globalThis,a,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global],c=0;c<b.length;++c){var g=b[c];if(g&&g.Math==Math)return}(function(){throw Error("Cannot find global object")})()}n(this);"function"===typeof Symbol&&Symbol("x");var p;if("function"==typeof Object.setPrototypeOf)p=Object.setPrototypeOf;else{var q;a:{var t={a:!0},u={};try{u.__proto__=t;q=u.a;break a}catch(a){}q=!1}p=q?function(a,b){a.__proto__=b;if(a.__proto__!==b)throw new TypeError(a+" is not extensible");return a}:null}var v=p;function w(a){return a?Array.prototype.slice.call(a):[]}var x;function y(a,b,c){function g(e){try{return f(e)}catch(r){var h,m;null==(m=(h=self).__AMP_REPORT_ERROR)||m.call(h,r);throw r}}var k=a,f=c,d=z();k.addEventListener(b,g,d?void 0:!1);return function(){var e;null==(e=k)||e.removeEventListener(b,g,d?void 0:!1);g=k=f=null}}function z(){if(void 0!==x)return x;x=!1;try{var a={get capture(){x=!0}};self.addEventListener("test-options",null,a);self.removeEventListener("test-options",null,a)}catch(b){}return x}
/* https://mths.be/cssescape v1.5.1 by @mathias | MIT license */
var A=self.AMP_CONFIG||{},B=("string"==typeof A.cdnProxyRegex?new RegExp(A.cdnProxyRegex):A.cdnProxyRegex)||/^https:\/\/([a-zA-Z0-9_-]+\.)?cdn\.ampproject\.org$/;function C(a){if(self.document&&self.document.head&&(!self.location||!B.test(self.location.origin))){var b=self.document.head.querySelector('meta[name="'+a+'"]');b&&b.getAttribute("content")}}A.cdnUrl||C("runtime-host");A.geoApiUrl||C("amp-geo-api");self.__AMP_LOG=self.__AMP_LOG||{user:null,dev:null,userForEmbed:null};function D(a,b,c){return y(a,b,c)}function E(a){for(;a.firstChild;)a.removeChild(a.firstChild)}var F,G="Webkit webkit Moz moz ms O o".split(" ");function H(a){var c,b={position:"absolute",bottom:0,left:0,right:0};for(c in b){var g=a,k=b[c];var f=g.style;var d=c;if(d.startsWith("--"))f=d;else{F||(F=Object.create(null));var e=F[d];if(!e){e=d;if(void 0===f[d]){var h=d;h=h.charAt(0).toUpperCase()+h.slice(1);b:{for(var m=0;m<G.length;m++){var r=G[m]+h;if(void 0!==f[r]){h=r;break b}}h=""}void 0!==f[h]&&(e=h)}F[d]=e}f=e}f&&(f.startsWith("--")?g.style.setProperty(f,k):g.style[f]=k)}}function I(a,b,c){var g=this;this.j=a;this.D=b;this.h=c.ownerDocument.createElement("div");c.appendChild(this.h);this.A=[];J(this);this.F=D(b,"cuechange",(function(){J(g)}));this.G=D(a,"timeupdate",(function(){K(g)}))}I.prototype.dispose=function(){this.F();this.G();var b,a=this.h;null==(b=a.parentElement)||b.removeChild(a);this.D=this.j=null};function J(a){E(a.h);a.A.length=0;w(a.D.activeCues).forEach((function(b){var c=a.h.ownerDocument.createElement("div");H(c);var g=b.getCueAsHTML(),k=a.h.ownerDocument.createElement("span");c.appendChild(k);var f=[];w(g.childNodes).forEach((function(d){if("timestamp"===d.target){var e=/^(?:(\d{2,}):)?(\d{2}):(\d{2})\.(\d{3})$/.exec(d.data);if(e){d=e[1]?parseInt(e[1],10):0;var h=parseInt(e[2],10),m=parseInt(e[3],10);e=parseInt(e[4],10);d=3600*d+60*h+m+e/1e3}else d=null;null!==d&&(f.push(d),k=a.h.ownerDocument.createElement("span"),c.appendChild(k))}else k.appendChild(d)}));a.A.push(f);a.h.appendChild(c)}));K(a)}function K(a){var b=a.j.currentTime;w(a.h.childNodes).forEach((function(c,g){w(c.childNodes).forEach((function(k,f){0<f&&k.classList.toggle("amp-story-captions-future",a.A[g][f-1]>b)}))}))}function L(a){a=AMP.BaseElement.call(this,a)||this;a.o=null;a.j=null;a.B=null;a.C=[];return a}var M=AMP.BaseElement;L.prototype=l(M.prototype);L.prototype.constructor=L;if(v)v(L,M);else for(var N in M)if("prototype"!=N)if(Object.defineProperties){var O=Object.getOwnPropertyDescriptor(M,N);O&&Object.defineProperty(L,N,O)}else L[N]=M[N];L.H=M.prototype;L.prototype.buildCallback=function(){this.o=this.element.ownerDocument.createElement("div");this.element.appendChild(this.o);var a=this.o;a.classList.add("i-amphtml-fill-content");a.classList.add("i-amphtml-replaced-content")};L.prototype.isLayoutSupported=function(a){return"fixed"==a||"fixed-height"==a||"responsive"==a||"fill"==a||"flex-item"==a||"fluid"==a||"intrinsic"==a};L.prototype.setVideoElement=function(a){var b=this;this.B&&this.B();this.j=a;P(this);this.B=D(a.textTracks,"change",(function(){P(b)}))};function P(a){for(;a.C.length;)a.C.pop().dispose();w(a.j.textTracks).forEach((function(b){if("showing"===b.mode||"hidden"===b.mode)b.mode="hidden",a.C.push(new I(a.j,b,a.o))}))}AMP.registerElement("amp-story-captions",L,"amp-story-captions{white-space:pre-wrap}.amp-story-captions-future{color:gray}\n/*# sourceURL=/extensions/amp-story-captions/0.1/amp-story-captions.css*/")}});//# sourceMappingURL=amp-story-captions-0.1.js.map